function qh(i,r){for(var n=0;n<r.length;n++){const o=r[n];if(typeof o!="string"&&!Array.isArray(o)){for(const l in o)if(l!=="default"&&!(l in i)){const u=Object.getOwnPropertyDescriptor(o,l);u&&Object.defineProperty(i,l,u.get?u:{enumerable:!0,get:()=>o[l]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function $l(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Zm(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var r=i.default;if(typeof r=="function"){var n=function o(){var l=!1;try{l=this instanceof o}catch{}return l?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};n.prototype=r.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(o){var l=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:function(){return i[o]}})}),n}var tl={exports:{}},ys={},rl={exports:{}},de={};var Qd;function eg(){if(Qd)return de;Qd=1;var i=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.iterator;function _(C){return C===null||typeof C!="object"?null:(C=v&&C[v]||C["@@iterator"],typeof C=="function"?C:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,j={};function w(C,D,ce){this.props=C,this.context=D,this.refs=j,this.updater=ce||S}w.prototype.isReactComponent={},w.prototype.setState=function(C,D){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,D,"setState")},w.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function O(){}O.prototype=w.prototype;function L(C,D,ce){this.props=C,this.context=D,this.refs=j,this.updater=ce||S}var R=L.prototype=new O;R.constructor=L,E(R,w.prototype),R.isPureReactComponent=!0;var U=Array.isArray,F=Object.prototype.hasOwnProperty,W={current:null},Z={key:!0,ref:!0,__self:!0,__source:!0};function se(C,D,ce){var he,me={},ge=null,je=null;if(D!=null)for(he in D.ref!==void 0&&(je=D.ref),D.key!==void 0&&(ge=""+D.key),D)F.call(D,he)&&!Z.hasOwnProperty(he)&&(me[he]=D[he]);var we=arguments.length-2;if(we===1)me.children=ce;else if(1<we){for(var Ce=Array(we),dt=0;dt<we;dt++)Ce[dt]=arguments[dt+2];me.children=Ce}if(C&&C.defaultProps)for(he in we=C.defaultProps,we)me[he]===void 0&&(me[he]=we[he]);return{$$typeof:i,type:C,key:ge,ref:je,props:me,_owner:W.current}}function J(C,D){return{$$typeof:i,type:C.type,key:D,ref:C.ref,props:C.props,_owner:C._owner}}function fe(C){return typeof C=="object"&&C!==null&&C.$$typeof===i}function rt(C){var D={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(ce){return D[ce]})}var ae=/\/+/g;function ue(C,D){return typeof C=="object"&&C!==null&&C.key!=null?rt(""+C.key):D.toString(36)}function _e(C,D,ce,he,me){var ge=typeof C;(ge==="undefined"||ge==="boolean")&&(C=null);var je=!1;if(C===null)je=!0;else switch(ge){case"string":case"number":je=!0;break;case"object":switch(C.$$typeof){case i:case r:je=!0}}if(je)return je=C,me=me(je),C=he===""?"."+ue(je,0):he,U(me)?(ce="",C!=null&&(ce=C.replace(ae,"$&/")+"/"),_e(me,D,ce,"",function(dt){return dt})):me!=null&&(fe(me)&&(me=J(me,ce+(!me.key||je&&je.key===me.key?"":(""+me.key).replace(ae,"$&/")+"/")+C)),D.push(me)),1;if(je=0,he=he===""?".":he+":",U(C))for(var we=0;we<C.length;we++){ge=C[we];var Ce=he+ue(ge,we);je+=_e(ge,D,ce,Ce,me)}else if(Ce=_(C),typeof Ce=="function")for(C=Ce.call(C),we=0;!(ge=C.next()).done;)ge=ge.value,Ce=he+ue(ge,we++),je+=_e(ge,D,ce,Ce,me);else if(ge==="object")throw D=String(C),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return je}function De(C,D,ce){if(C==null)return C;var he=[],me=0;return _e(C,he,"","",function(ge){return D.call(ce,ge,me++)}),he}function Ie(C){if(C._status===-1){var D=C._result;D=D(),D.then(function(ce){(C._status===0||C._status===-1)&&(C._status=1,C._result=ce)},function(ce){(C._status===0||C._status===-1)&&(C._status=2,C._result=ce)}),C._status===-1&&(C._status=0,C._result=D)}if(C._status===1)return C._result.default;throw C._result}var be={current:null},V={transition:null},ne={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:V,ReactCurrentOwner:W};function K(){throw Error("act(...) is not supported in production builds of React.")}return de.Children={map:De,forEach:function(C,D,ce){De(C,function(){D.apply(this,arguments)},ce)},count:function(C){var D=0;return De(C,function(){D++}),D},toArray:function(C){return De(C,function(D){return D})||[]},only:function(C){if(!fe(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},de.Component=w,de.Fragment=n,de.Profiler=l,de.PureComponent=L,de.StrictMode=o,de.Suspense=m,de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,de.act=K,de.cloneElement=function(C,D,ce){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var he=E({},C.props),me=C.key,ge=C.ref,je=C._owner;if(D!=null){if(D.ref!==void 0&&(ge=D.ref,je=W.current),D.key!==void 0&&(me=""+D.key),C.type&&C.type.defaultProps)var we=C.type.defaultProps;for(Ce in D)F.call(D,Ce)&&!Z.hasOwnProperty(Ce)&&(he[Ce]=D[Ce]===void 0&&we!==void 0?we[Ce]:D[Ce])}var Ce=arguments.length-2;if(Ce===1)he.children=ce;else if(1<Ce){we=Array(Ce);for(var dt=0;dt<Ce;dt++)we[dt]=arguments[dt+2];he.children=we}return{$$typeof:i,type:C.type,key:me,ref:ge,props:he,_owner:je}},de.createContext=function(C){return C={$$typeof:d,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:u,_context:C},C.Consumer=C},de.createElement=se,de.createFactory=function(C){var D=se.bind(null,C);return D.type=C,D},de.createRef=function(){return{current:null}},de.forwardRef=function(C){return{$$typeof:p,render:C}},de.isValidElement=fe,de.lazy=function(C){return{$$typeof:x,_payload:{_status:-1,_result:C},_init:Ie}},de.memo=function(C,D){return{$$typeof:g,type:C,compare:D===void 0?null:D}},de.startTransition=function(C){var D=V.transition;V.transition={};try{C()}finally{V.transition=D}},de.unstable_act=K,de.useCallback=function(C,D){return be.current.useCallback(C,D)},de.useContext=function(C){return be.current.useContext(C)},de.useDebugValue=function(){},de.useDeferredValue=function(C){return be.current.useDeferredValue(C)},de.useEffect=function(C,D){return be.current.useEffect(C,D)},de.useId=function(){return be.current.useId()},de.useImperativeHandle=function(C,D,ce){return be.current.useImperativeHandle(C,D,ce)},de.useInsertionEffect=function(C,D){return be.current.useInsertionEffect(C,D)},de.useLayoutEffect=function(C,D){return be.current.useLayoutEffect(C,D)},de.useMemo=function(C,D){return be.current.useMemo(C,D)},de.useReducer=function(C,D,ce){return be.current.useReducer(C,D,ce)},de.useRef=function(C){return be.current.useRef(C)},de.useState=function(C){return be.current.useState(C)},de.useSyncExternalStore=function(C,D,ce){return be.current.useSyncExternalStore(C,D,ce)},de.useTransition=function(){return be.current.useTransition()},de.version="18.3.1",de}var Yd;function Dl(){return Yd||(Yd=1,rl.exports=eg()),rl.exports}var Xd;function tg(){if(Xd)return ys;Xd=1;var i=Dl(),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(p,m,g){var x,v={},_=null,S=null;g!==void 0&&(_=""+g),m.key!==void 0&&(_=""+m.key),m.ref!==void 0&&(S=m.ref);for(x in m)o.call(m,x)&&!u.hasOwnProperty(x)&&(v[x]=m[x]);if(p&&p.defaultProps)for(x in m=p.defaultProps,m)v[x]===void 0&&(v[x]=m[x]);return{$$typeof:r,type:p,key:_,ref:S,props:v,_owner:l.current}}return ys.Fragment=n,ys.jsx=d,ys.jsxs=d,ys}var Zd;function rg(){return Zd||(Zd=1,tl.exports=tg()),tl.exports}var c=rg(),T=Dl();const Hh=$l(T),ng=qh({__proto__:null,default:Hh},[T]);var Di={},nl={exports:{}},ct={},sl={exports:{}},il={};var eh;function sg(){return eh||(eh=1,(function(i){function r(V,ne){var K=V.length;V.push(ne);e:for(;0<K;){var C=K-1>>>1,D=V[C];if(0<l(D,ne))V[C]=ne,V[K]=D,K=C;else break e}}function n(V){return V.length===0?null:V[0]}function o(V){if(V.length===0)return null;var ne=V[0],K=V.pop();if(K!==ne){V[0]=K;e:for(var C=0,D=V.length,ce=D>>>1;C<ce;){var he=2*(C+1)-1,me=V[he],ge=he+1,je=V[ge];if(0>l(me,K))ge<D&&0>l(je,me)?(V[C]=je,V[ge]=K,C=ge):(V[C]=me,V[he]=K,C=he);else if(ge<D&&0>l(je,K))V[C]=je,V[ge]=K,C=ge;else break e}}return ne}function l(V,ne){var K=V.sortIndex-ne.sortIndex;return K!==0?K:V.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();i.unstable_now=function(){return d.now()-p}}var m=[],g=[],x=1,v=null,_=3,S=!1,E=!1,j=!1,w=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(V){for(var ne=n(g);ne!==null;){if(ne.callback===null)o(g);else if(ne.startTime<=V)o(g),ne.sortIndex=ne.expirationTime,r(m,ne);else break;ne=n(g)}}function U(V){if(j=!1,R(V),!E)if(n(m)!==null)E=!0,Ie(F);else{var ne=n(g);ne!==null&&be(U,ne.startTime-V)}}function F(V,ne){E=!1,j&&(j=!1,O(se),se=-1),S=!0;var K=_;try{for(R(ne),v=n(m);v!==null&&(!(v.expirationTime>ne)||V&&!rt());){var C=v.callback;if(typeof C=="function"){v.callback=null,_=v.priorityLevel;var D=C(v.expirationTime<=ne);ne=i.unstable_now(),typeof D=="function"?v.callback=D:v===n(m)&&o(m),R(ne)}else o(m);v=n(m)}if(v!==null)var ce=!0;else{var he=n(g);he!==null&&be(U,he.startTime-ne),ce=!1}return ce}finally{v=null,_=K,S=!1}}var W=!1,Z=null,se=-1,J=5,fe=-1;function rt(){return!(i.unstable_now()-fe<J)}function ae(){if(Z!==null){var V=i.unstable_now();fe=V;var ne=!0;try{ne=Z(!0,V)}finally{ne?ue():(W=!1,Z=null)}}else W=!1}var ue;if(typeof L=="function")ue=function(){L(ae)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,De=_e.port2;_e.port1.onmessage=ae,ue=function(){De.postMessage(null)}}else ue=function(){w(ae,0)};function Ie(V){Z=V,W||(W=!0,ue())}function be(V,ne){se=w(function(){V(i.unstable_now())},ne)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(V){V.callback=null},i.unstable_continueExecution=function(){E||S||(E=!0,Ie(F))},i.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<V?Math.floor(1e3/V):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return n(m)},i.unstable_next=function(V){switch(_){case 1:case 2:case 3:var ne=3;break;default:ne=_}var K=_;_=ne;try{return V()}finally{_=K}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(V,ne){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var K=_;_=V;try{return ne()}finally{_=K}},i.unstable_scheduleCallback=function(V,ne,K){var C=i.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?C+K:C):K=C,V){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=K+D,V={id:x++,callback:ne,priorityLevel:V,startTime:K,expirationTime:D,sortIndex:-1},K>C?(V.sortIndex=K,r(g,V),n(m)===null&&V===n(g)&&(j?(O(se),se=-1):j=!0,be(U,K-C))):(V.sortIndex=D,r(m,V),E||S||(E=!0,Ie(F))),V},i.unstable_shouldYield=rt,i.unstable_wrapCallback=function(V){var ne=_;return function(){var K=_;_=ne;try{return V.apply(this,arguments)}finally{_=K}}}})(il)),il}var th;function ig(){return th||(th=1,sl.exports=sg()),sl.exports}var rh;function og(){if(rh)return ct;rh=1;var i=Dl(),r=ig();function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function u(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},v={};function _(e){return m.call(v,e)?!0:m.call(x,e)?!1:g.test(e)?v[e]=!0:(x[e]=!0,!1)}function S(e,t,s,a){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function E(e,t,s,a){if(t===null||typeof t>"u"||S(e,t,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function j(e,t,s,a,h,f,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=h,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=y}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){w[e]=new j(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];w[t]=new j(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){w[e]=new j(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){w[e]=new j(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){w[e]=new j(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){w[e]=new j(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){w[e]=new j(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){w[e]=new j(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){w[e]=new j(e,5,!1,e.toLowerCase(),null,!1,!1)});var O=/[\-:]([a-z])/g;function L(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(O,L);w[t]=new j(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(O,L);w[t]=new j(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(O,L);w[t]=new j(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){w[e]=new j(e,1,!1,e.toLowerCase(),null,!1,!1)}),w.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){w[e]=new j(e,1,!1,e.toLowerCase(),null,!0,!0)});function R(e,t,s,a){var h=w.hasOwnProperty(t)?w[t]:null;(h!==null?h.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(E(t,s,h,a)&&(s=null),a||h===null?_(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):h.mustUseProperty?e[h.propertyName]=s===null?h.type===3?!1:"":s:(t=h.attributeName,a=h.attributeNamespace,s===null?e.removeAttribute(t):(h=h.type,s=h===3||h===4&&s===!0?"":""+s,a?e.setAttributeNS(a,t,s):e.setAttribute(t,s))))}var U=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),W=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),se=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),fe=Symbol.for("react.provider"),rt=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),De=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),V=Symbol.iterator;function ne(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var K=Object.assign,C;function D(e){if(C===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);C=t&&t[1]||""}return`
`+C+e}var ce=!1;function he(e,t){if(!e||ce)return"";ce=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(I){var a=I}Reflect.construct(e,[],t)}else{try{t.call()}catch(I){a=I}e.call(t.prototype)}else{try{throw Error()}catch(I){a=I}e()}}catch(I){if(I&&a&&typeof I.stack=="string"){for(var h=I.stack.split(`
`),f=a.stack.split(`
`),y=h.length-1,b=f.length-1;1<=y&&0<=b&&h[y]!==f[b];)b--;for(;1<=y&&0<=b;y--,b--)if(h[y]!==f[b]){if(y!==1||b!==1)do if(y--,b--,0>b||h[y]!==f[b]){var k=`
`+h[y].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=y&&0<=b);break}}}finally{ce=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?D(e):""}function me(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=he(e.type,!1),e;case 11:return e=he(e.type.render,!1),e;case 1:return e=he(e.type,!0),e;default:return""}}function ge(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Z:return"Fragment";case W:return"Portal";case J:return"Profiler";case se:return"StrictMode";case ue:return"Suspense";case _e:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rt:return(e.displayName||"Context")+".Consumer";case fe:return(e._context.displayName||"Context")+".Provider";case ae:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case De:return t=e.displayName||null,t!==null?t:ge(e.type)||"Memo";case Ie:t=e._payload,e=e._init;try{return ge(e(t))}catch{}}return null}function je(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(t);case 8:return t===se?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function we(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ce(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function dt(e){var t=Ce(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var h=s.get,f=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return h.call(this)},set:function(y){a=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Cs(e){e._valueTracker||(e._valueTracker=dt(e))}function ru(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=Ce(e)?e.checked?"true":"false":e.value),e=a,e!==s?(t.setValue(e),!0):!1}function Ts(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ao(e,t){var s=t.checked;return K({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function nu(e,t){var s=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;s=we(t.value!=null?t.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function su(e,t){t=t.checked,t!=null&&R(e,"checked",t,!1)}function lo(e,t){su(e,t);var s=we(t.value),a=t.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?uo(e,t.type,s):t.hasOwnProperty("defaultValue")&&uo(e,t.type,we(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function iu(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function uo(e,t,s){(t!=="number"||Ts(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Rn=Array.isArray;function Hr(e,t,s,a){if(e=e.options,t){t={};for(var h=0;h<s.length;h++)t["$"+s[h]]=!0;for(s=0;s<e.length;s++)h=t.hasOwnProperty("$"+e[s].value),e[s].selected!==h&&(e[s].selected=h),h&&a&&(e[s].defaultSelected=!0)}else{for(s=""+we(s),t=null,h=0;h<e.length;h++){if(e[h].value===s){e[h].selected=!0,a&&(e[h].defaultSelected=!0);return}t!==null||e[h].disabled||(t=e[h])}t!==null&&(t.selected=!0)}}function co(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(n(91));return K({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ou(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(n(92));if(Rn(s)){if(1<s.length)throw Error(n(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:we(s)}}function au(e,t){var s=we(t.value),a=we(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function lu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function uu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ho(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?uu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ps,cu=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,a,h){MSApp.execUnsafeLocalFunction(function(){return e(t,s,a,h)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ps=Ps||document.createElement("div"),Ps.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ps.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function An(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var In={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},np=["Webkit","ms","Moz","O"];Object.keys(In).forEach(function(e){np.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),In[t]=In[e]})});function du(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||In.hasOwnProperty(e)&&In[e]?(""+t).trim():t+"px"}function hu(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var a=s.indexOf("--")===0,h=du(s,t[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,h):e[s]=h}}var sp=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fo(e,t){if(t){if(sp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(n(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(n(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(t.style!=null&&typeof t.style!="object")throw Error(n(62))}}function po(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mo=null;function go(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yo=null,Kr=null,Gr=null;function fu(e){if(e=rs(e)){if(typeof yo!="function")throw Error(n(280));var t=e.stateNode;t&&(t=Zs(t),yo(e.stateNode,e.type,t))}}function pu(e){Kr?Gr?Gr.push(e):Gr=[e]:Kr=e}function mu(){if(Kr){var e=Kr,t=Gr;if(Gr=Kr=null,fu(e),t)for(e=0;e<t.length;e++)fu(t[e])}}function gu(e,t){return e(t)}function yu(){}var vo=!1;function vu(e,t,s){if(vo)return e(t,s);vo=!0;try{return gu(e,t,s)}finally{vo=!1,(Kr!==null||Gr!==null)&&(yu(),mu())}}function Ln(e,t){var s=e.stateNode;if(s===null)return null;var a=Zs(s);if(a===null)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(n(231,t,typeof s));return s}var wo=!1;if(p)try{var Un={};Object.defineProperty(Un,"passive",{get:function(){wo=!0}}),window.addEventListener("test",Un,Un),window.removeEventListener("test",Un,Un)}catch{wo=!1}function ip(e,t,s,a,h,f,y,b,k){var I=Array.prototype.slice.call(arguments,3);try{t.apply(s,I)}catch(M){this.onError(M)}}var $n=!1,Os=null,Rs=!1,xo=null,op={onError:function(e){$n=!0,Os=e}};function ap(e,t,s,a,h,f,y,b,k){$n=!1,Os=null,ip.apply(op,arguments)}function lp(e,t,s,a,h,f,y,b,k){if(ap.apply(this,arguments),$n){if($n){var I=Os;$n=!1,Os=null}else throw Error(n(198));Rs||(Rs=!0,xo=I)}}function Er(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function wu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function xu(e){if(Er(e)!==e)throw Error(n(188))}function up(e){var t=e.alternate;if(!t){if(t=Er(e),t===null)throw Error(n(188));return t!==e?null:e}for(var s=e,a=t;;){var h=s.return;if(h===null)break;var f=h.alternate;if(f===null){if(a=h.return,a!==null){s=a;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===s)return xu(h),e;if(f===a)return xu(h),t;f=f.sibling}throw Error(n(188))}if(s.return!==a.return)s=h,a=f;else{for(var y=!1,b=h.child;b;){if(b===s){y=!0,s=h,a=f;break}if(b===a){y=!0,a=h,s=f;break}b=b.sibling}if(!y){for(b=f.child;b;){if(b===s){y=!0,s=f,a=h;break}if(b===a){y=!0,a=f,s=h;break}b=b.sibling}if(!y)throw Error(n(189))}}if(s.alternate!==a)throw Error(n(190))}if(s.tag!==3)throw Error(n(188));return s.stateNode.current===s?e:t}function _u(e){return e=up(e),e!==null?bu(e):null}function bu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bu(e);if(t!==null)return t;e=e.sibling}return null}var ju=r.unstable_scheduleCallback,Su=r.unstable_cancelCallback,cp=r.unstable_shouldYield,dp=r.unstable_requestPaint,Le=r.unstable_now,hp=r.unstable_getCurrentPriorityLevel,_o=r.unstable_ImmediatePriority,ku=r.unstable_UserBlockingPriority,As=r.unstable_NormalPriority,fp=r.unstable_LowPriority,Eu=r.unstable_IdlePriority,Is=null,Dt=null;function pp(e){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Is,e,void 0,(e.current.flags&128)===128)}catch{}}var Ct=Math.clz32?Math.clz32:yp,mp=Math.log,gp=Math.LN2;function yp(e){return e>>>=0,e===0?32:31-(mp(e)/gp|0)|0}var Ls=64,Us=4194304;function Dn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $s(e,t){var s=e.pendingLanes;if(s===0)return 0;var a=0,h=e.suspendedLanes,f=e.pingedLanes,y=s&268435455;if(y!==0){var b=y&~h;b!==0?a=Dn(b):(f&=y,f!==0&&(a=Dn(f)))}else y=s&~h,y!==0?a=Dn(y):f!==0&&(a=Dn(f));if(a===0)return 0;if(t!==0&&t!==a&&(t&h)===0&&(h=a&-a,f=t&-t,h>=f||h===16&&(f&4194240)!==0))return t;if((a&4)!==0&&(a|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)s=31-Ct(t),h=1<<s,a|=e[s],t&=~h;return a}function vp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wp(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes;0<f;){var y=31-Ct(f),b=1<<y,k=h[y];k===-1?((b&s)===0||(b&a)!==0)&&(h[y]=vp(b,t)):k<=t&&(e.expiredLanes|=b),f&=~b}}function bo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Nu(){var e=Ls;return Ls<<=1,(Ls&4194240)===0&&(Ls=64),e}function jo(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Mn(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ct(t),e[t]=s}function xp(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var h=31-Ct(s),f=1<<h;t[h]=0,a[h]=-1,e[h]=-1,s&=~f}}function So(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-Ct(s),h=1<<a;h&t|e[a]&t&&(e[a]|=t),s&=~h}}var xe=0;function Cu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Tu,ko,Pu,Ou,Ru,Eo=!1,Ds=[],Zt=null,er=null,tr=null,zn=new Map,Bn=new Map,rr=[],_p="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Au(e,t){switch(e){case"focusin":case"focusout":Zt=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":zn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bn.delete(t.pointerId)}}function Fn(e,t,s,a,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:f,targetContainers:[h]},t!==null&&(t=rs(t),t!==null&&ko(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,h!==null&&t.indexOf(h)===-1&&t.push(h),e)}function bp(e,t,s,a,h){switch(t){case"focusin":return Zt=Fn(Zt,e,t,s,a,h),!0;case"dragenter":return er=Fn(er,e,t,s,a,h),!0;case"mouseover":return tr=Fn(tr,e,t,s,a,h),!0;case"pointerover":var f=h.pointerId;return zn.set(f,Fn(zn.get(f)||null,e,t,s,a,h)),!0;case"gotpointercapture":return f=h.pointerId,Bn.set(f,Fn(Bn.get(f)||null,e,t,s,a,h)),!0}return!1}function Iu(e){var t=Nr(e.target);if(t!==null){var s=Er(t);if(s!==null){if(t=s.tag,t===13){if(t=wu(s),t!==null){e.blockedOn=t,Ru(e.priority,function(){Pu(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ms(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Co(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);mo=a,s.target.dispatchEvent(a),mo=null}else return t=rs(s),t!==null&&ko(t),e.blockedOn=s,!1;t.shift()}return!0}function Lu(e,t,s){Ms(e)&&s.delete(t)}function jp(){Eo=!1,Zt!==null&&Ms(Zt)&&(Zt=null),er!==null&&Ms(er)&&(er=null),tr!==null&&Ms(tr)&&(tr=null),zn.forEach(Lu),Bn.forEach(Lu)}function Vn(e,t){e.blockedOn===t&&(e.blockedOn=null,Eo||(Eo=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,jp)))}function Wn(e){function t(h){return Vn(h,e)}if(0<Ds.length){Vn(Ds[0],e);for(var s=1;s<Ds.length;s++){var a=Ds[s];a.blockedOn===e&&(a.blockedOn=null)}}for(Zt!==null&&Vn(Zt,e),er!==null&&Vn(er,e),tr!==null&&Vn(tr,e),zn.forEach(t),Bn.forEach(t),s=0;s<rr.length;s++)a=rr[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<rr.length&&(s=rr[0],s.blockedOn===null);)Iu(s),s.blockedOn===null&&rr.shift()}var Jr=U.ReactCurrentBatchConfig,zs=!0;function Sp(e,t,s,a){var h=xe,f=Jr.transition;Jr.transition=null;try{xe=1,No(e,t,s,a)}finally{xe=h,Jr.transition=f}}function kp(e,t,s,a){var h=xe,f=Jr.transition;Jr.transition=null;try{xe=4,No(e,t,s,a)}finally{xe=h,Jr.transition=f}}function No(e,t,s,a){if(zs){var h=Co(e,t,s,a);if(h===null)qo(e,t,a,Bs,s),Au(e,a);else if(bp(h,e,t,s,a))a.stopPropagation();else if(Au(e,a),t&4&&-1<_p.indexOf(e)){for(;h!==null;){var f=rs(h);if(f!==null&&Tu(f),f=Co(e,t,s,a),f===null&&qo(e,t,a,Bs,s),f===h)break;h=f}h!==null&&a.stopPropagation()}else qo(e,t,a,null,s)}}var Bs=null;function Co(e,t,s,a){if(Bs=null,e=go(a),e=Nr(e),e!==null)if(t=Er(e),t===null)e=null;else if(s=t.tag,s===13){if(e=wu(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bs=e,null}function Uu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hp()){case _o:return 1;case ku:return 4;case As:case fp:return 16;case Eu:return 536870912;default:return 16}default:return 16}}var nr=null,To=null,Fs=null;function $u(){if(Fs)return Fs;var e,t=To,s=t.length,a,h="value"in nr?nr.value:nr.textContent,f=h.length;for(e=0;e<s&&t[e]===h[e];e++);var y=s-e;for(a=1;a<=y&&t[s-a]===h[f-a];a++);return Fs=h.slice(e,1<a?1-a:void 0)}function Vs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ws(){return!0}function Du(){return!1}function ht(e){function t(s,a,h,f,y){this._reactName=s,this._targetInst=h,this.type=a,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(s=e[b],this[b]=s?s(f):f[b]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ws:Du,this.isPropagationStopped=Du,this}return K(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),t}var Qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Po=ht(Qr),qn=K({},Qr,{view:0,detail:0}),Ep=ht(qn),Oo,Ro,Hn,qs=K({},qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Io,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hn&&(Hn&&e.type==="mousemove"?(Oo=e.screenX-Hn.screenX,Ro=e.screenY-Hn.screenY):Ro=Oo=0,Hn=e),Oo)},movementY:function(e){return"movementY"in e?e.movementY:Ro}}),Mu=ht(qs),Np=K({},qs,{dataTransfer:0}),Cp=ht(Np),Tp=K({},qn,{relatedTarget:0}),Ao=ht(Tp),Pp=K({},Qr,{animationName:0,elapsedTime:0,pseudoElement:0}),Op=ht(Pp),Rp=K({},Qr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ap=ht(Rp),Ip=K({},Qr,{data:0}),zu=ht(Ip),Lp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Up={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$p={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$p[e])?!!t[e]:!1}function Io(){return Dp}var Mp=K({},qn,{key:function(e){if(e.key){var t=Lp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Up[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Io,charCode:function(e){return e.type==="keypress"?Vs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zp=ht(Mp),Bp=K({},qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bu=ht(Bp),Fp=K({},qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Io}),Vp=ht(Fp),Wp=K({},Qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),qp=ht(Wp),Hp=K({},qs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kp=ht(Hp),Gp=[9,13,27,32],Lo=p&&"CompositionEvent"in window,Kn=null;p&&"documentMode"in document&&(Kn=document.documentMode);var Jp=p&&"TextEvent"in window&&!Kn,Fu=p&&(!Lo||Kn&&8<Kn&&11>=Kn),Vu=" ",Wu=!1;function qu(e,t){switch(e){case"keyup":return Gp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yr=!1;function Qp(e,t){switch(e){case"compositionend":return Hu(t);case"keypress":return t.which!==32?null:(Wu=!0,Vu);case"textInput":return e=t.data,e===Vu&&Wu?null:e;default:return null}}function Yp(e,t){if(Yr)return e==="compositionend"||!Lo&&qu(e,t)?(e=$u(),Fs=To=nr=null,Yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fu&&t.locale!=="ko"?null:t.data;default:return null}}var Xp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ku(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Xp[e.type]:t==="textarea"}function Gu(e,t,s,a){pu(a),t=Qs(t,"onChange"),0<t.length&&(s=new Po("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var Gn=null,Jn=null;function Zp(e){hc(e,0)}function Hs(e){var t=rn(e);if(ru(t))return e}function em(e,t){if(e==="change")return t}var Ju=!1;if(p){var Uo;if(p){var $o="oninput"in document;if(!$o){var Qu=document.createElement("div");Qu.setAttribute("oninput","return;"),$o=typeof Qu.oninput=="function"}Uo=$o}else Uo=!1;Ju=Uo&&(!document.documentMode||9<document.documentMode)}function Yu(){Gn&&(Gn.detachEvent("onpropertychange",Xu),Jn=Gn=null)}function Xu(e){if(e.propertyName==="value"&&Hs(Jn)){var t=[];Gu(t,Jn,e,go(e)),vu(Zp,t)}}function tm(e,t,s){e==="focusin"?(Yu(),Gn=t,Jn=s,Gn.attachEvent("onpropertychange",Xu)):e==="focusout"&&Yu()}function rm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hs(Jn)}function nm(e,t){if(e==="click")return Hs(t)}function sm(e,t){if(e==="input"||e==="change")return Hs(t)}function im(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tt=typeof Object.is=="function"?Object.is:im;function Qn(e,t){if(Tt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var h=s[a];if(!m.call(t,h)||!Tt(e[h],t[h]))return!1}return!0}function Zu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ec(e,t){var s=Zu(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=t&&a>=t)return{node:s,offset:t-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Zu(s)}}function tc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rc(){for(var e=window,t=Ts();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Ts(e.document)}return t}function Do(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function om(e){var t=rc(),s=e.focusedElem,a=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&tc(s.ownerDocument.documentElement,s)){if(a!==null&&Do(s)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var h=s.textContent.length,f=Math.min(a.start,h);a=a.end===void 0?f:Math.min(a.end,h),!e.extend&&f>a&&(h=a,a=f,f=h),h=ec(s,f);var y=ec(s,a);h&&y&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(h.node,h.offset),e.removeAllRanges(),f>a?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var am=p&&"documentMode"in document&&11>=document.documentMode,Xr=null,Mo=null,Yn=null,zo=!1;function nc(e,t,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;zo||Xr==null||Xr!==Ts(a)||(a=Xr,"selectionStart"in a&&Do(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Yn&&Qn(Yn,a)||(Yn=a,a=Qs(Mo,"onSelect"),0<a.length&&(t=new Po("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=Xr)))}function Ks(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Zr={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionend:Ks("Transition","TransitionEnd")},Bo={},sc={};p&&(sc=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function Gs(e){if(Bo[e])return Bo[e];if(!Zr[e])return e;var t=Zr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in sc)return Bo[e]=t[s];return e}var ic=Gs("animationend"),oc=Gs("animationiteration"),ac=Gs("animationstart"),lc=Gs("transitionend"),uc=new Map,cc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sr(e,t){uc.set(e,t),u(t,[e])}for(var Fo=0;Fo<cc.length;Fo++){var Vo=cc[Fo],lm=Vo.toLowerCase(),um=Vo[0].toUpperCase()+Vo.slice(1);sr(lm,"on"+um)}sr(ic,"onAnimationEnd"),sr(oc,"onAnimationIteration"),sr(ac,"onAnimationStart"),sr("dblclick","onDoubleClick"),sr("focusin","onFocus"),sr("focusout","onBlur"),sr(lc,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xn));function dc(e,t,s){var a=e.type||"unknown-event";e.currentTarget=s,lp(a,t,void 0,e),e.currentTarget=null}function hc(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],h=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var y=a.length-1;0<=y;y--){var b=a[y],k=b.instance,I=b.currentTarget;if(b=b.listener,k!==f&&h.isPropagationStopped())break e;dc(h,b,I),f=k}else for(y=0;y<a.length;y++){if(b=a[y],k=b.instance,I=b.currentTarget,b=b.listener,k!==f&&h.isPropagationStopped())break e;dc(h,b,I),f=k}}}if(Rs)throw e=xo,Rs=!1,xo=null,e}function Ee(e,t){var s=t[Yo];s===void 0&&(s=t[Yo]=new Set);var a=e+"__bubble";s.has(a)||(fc(t,e,2,!1),s.add(a))}function Wo(e,t,s){var a=0;t&&(a|=4),fc(s,e,a,t)}var Js="_reactListening"+Math.random().toString(36).slice(2);function Zn(e){if(!e[Js]){e[Js]=!0,o.forEach(function(s){s!=="selectionchange"&&(cm.has(s)||Wo(s,!1,e),Wo(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Js]||(t[Js]=!0,Wo("selectionchange",!1,t))}}function fc(e,t,s,a){switch(Uu(t)){case 1:var h=Sp;break;case 4:h=kp;break;default:h=No}s=h.bind(null,t,s,e),h=void 0,!wo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(h=!0),a?h!==void 0?e.addEventListener(t,s,{capture:!0,passive:h}):e.addEventListener(t,s,!0):h!==void 0?e.addEventListener(t,s,{passive:h}):e.addEventListener(t,s,!1)}function qo(e,t,s,a,h){var f=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var y=a.tag;if(y===3||y===4){var b=a.stateNode.containerInfo;if(b===h||b.nodeType===8&&b.parentNode===h)break;if(y===4)for(y=a.return;y!==null;){var k=y.tag;if((k===3||k===4)&&(k=y.stateNode.containerInfo,k===h||k.nodeType===8&&k.parentNode===h))return;y=y.return}for(;b!==null;){if(y=Nr(b),y===null)return;if(k=y.tag,k===5||k===6){a=f=y;continue e}b=b.parentNode}}a=a.return}vu(function(){var I=f,M=go(s),z=[];e:{var $=uc.get(e);if($!==void 0){var q=Po,G=e;switch(e){case"keypress":if(Vs(s)===0)break e;case"keydown":case"keyup":q=zp;break;case"focusin":G="focus",q=Ao;break;case"focusout":G="blur",q=Ao;break;case"beforeblur":case"afterblur":q=Ao;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Mu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Cp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Vp;break;case ic:case oc:case ac:q=Op;break;case lc:q=qp;break;case"scroll":q=Ep;break;case"wheel":q=Kp;break;case"copy":case"cut":case"paste":q=Ap;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Bu}var Q=(t&4)!==0,Ue=!Q&&e==="scroll",P=Q?$!==null?$+"Capture":null:$;Q=[];for(var N=I,A;N!==null;){A=N;var B=A.stateNode;if(A.tag===5&&B!==null&&(A=B,P!==null&&(B=Ln(N,P),B!=null&&Q.push(es(N,B,A)))),Ue)break;N=N.return}0<Q.length&&($=new q($,G,null,s,M),z.push({event:$,listeners:Q}))}}if((t&7)===0){e:{if($=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",$&&s!==mo&&(G=s.relatedTarget||s.fromElement)&&(Nr(G)||G[Vt]))break e;if((q||$)&&($=M.window===M?M:($=M.ownerDocument)?$.defaultView||$.parentWindow:window,q?(G=s.relatedTarget||s.toElement,q=I,G=G?Nr(G):null,G!==null&&(Ue=Er(G),G!==Ue||G.tag!==5&&G.tag!==6)&&(G=null)):(q=null,G=I),q!==G)){if(Q=Mu,B="onMouseLeave",P="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(Q=Bu,B="onPointerLeave",P="onPointerEnter",N="pointer"),Ue=q==null?$:rn(q),A=G==null?$:rn(G),$=new Q(B,N+"leave",q,s,M),$.target=Ue,$.relatedTarget=A,B=null,Nr(M)===I&&(Q=new Q(P,N+"enter",G,s,M),Q.target=A,Q.relatedTarget=Ue,B=Q),Ue=B,q&&G)t:{for(Q=q,P=G,N=0,A=Q;A;A=en(A))N++;for(A=0,B=P;B;B=en(B))A++;for(;0<N-A;)Q=en(Q),N--;for(;0<A-N;)P=en(P),A--;for(;N--;){if(Q===P||P!==null&&Q===P.alternate)break t;Q=en(Q),P=en(P)}Q=null}else Q=null;q!==null&&pc(z,$,q,Q,!1),G!==null&&Ue!==null&&pc(z,Ue,G,Q,!0)}}e:{if($=I?rn(I):window,q=$.nodeName&&$.nodeName.toLowerCase(),q==="select"||q==="input"&&$.type==="file")var Y=em;else if(Ku($))if(Ju)Y=sm;else{Y=rm;var te=tm}else(q=$.nodeName)&&q.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(Y=nm);if(Y&&(Y=Y(e,I))){Gu(z,Y,s,M);break e}te&&te(e,$,I),e==="focusout"&&(te=$._wrapperState)&&te.controlled&&$.type==="number"&&uo($,"number",$.value)}switch(te=I?rn(I):window,e){case"focusin":(Ku(te)||te.contentEditable==="true")&&(Xr=te,Mo=I,Yn=null);break;case"focusout":Yn=Mo=Xr=null;break;case"mousedown":zo=!0;break;case"contextmenu":case"mouseup":case"dragend":zo=!1,nc(z,s,M);break;case"selectionchange":if(am)break;case"keydown":case"keyup":nc(z,s,M)}var re;if(Lo)e:{switch(e){case"compositionstart":var oe="onCompositionStart";break e;case"compositionend":oe="onCompositionEnd";break e;case"compositionupdate":oe="onCompositionUpdate";break e}oe=void 0}else Yr?qu(e,s)&&(oe="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(oe="onCompositionStart");oe&&(Fu&&s.locale!=="ko"&&(Yr||oe!=="onCompositionStart"?oe==="onCompositionEnd"&&Yr&&(re=$u()):(nr=M,To="value"in nr?nr.value:nr.textContent,Yr=!0)),te=Qs(I,oe),0<te.length&&(oe=new zu(oe,e,null,s,M),z.push({event:oe,listeners:te}),re?oe.data=re:(re=Hu(s),re!==null&&(oe.data=re)))),(re=Jp?Qp(e,s):Yp(e,s))&&(I=Qs(I,"onBeforeInput"),0<I.length&&(M=new zu("onBeforeInput","beforeinput",null,s,M),z.push({event:M,listeners:I}),M.data=re))}hc(z,t)})}function es(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Qs(e,t){for(var s=t+"Capture",a=[];e!==null;){var h=e,f=h.stateNode;h.tag===5&&f!==null&&(h=f,f=Ln(e,s),f!=null&&a.unshift(es(e,f,h)),f=Ln(e,t),f!=null&&a.push(es(e,f,h))),e=e.return}return a}function en(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pc(e,t,s,a,h){for(var f=t._reactName,y=[];s!==null&&s!==a;){var b=s,k=b.alternate,I=b.stateNode;if(k!==null&&k===a)break;b.tag===5&&I!==null&&(b=I,h?(k=Ln(s,f),k!=null&&y.unshift(es(s,k,b))):h||(k=Ln(s,f),k!=null&&y.push(es(s,k,b)))),s=s.return}y.length!==0&&e.push({event:t,listeners:y})}var dm=/\r\n?/g,hm=/\u0000|\uFFFD/g;function mc(e){return(typeof e=="string"?e:""+e).replace(dm,`
`).replace(hm,"")}function Ys(e,t,s){if(t=mc(t),mc(e)!==t&&s)throw Error(n(425))}function Xs(){}var Ho=null,Ko=null;function Go(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jo=typeof setTimeout=="function"?setTimeout:void 0,fm=typeof clearTimeout=="function"?clearTimeout:void 0,gc=typeof Promise=="function"?Promise:void 0,pm=typeof queueMicrotask=="function"?queueMicrotask:typeof gc<"u"?function(e){return gc.resolve(null).then(e).catch(mm)}:Jo;function mm(e){setTimeout(function(){throw e})}function Qo(e,t){var s=t,a=0;do{var h=s.nextSibling;if(e.removeChild(s),h&&h.nodeType===8)if(s=h.data,s==="/$"){if(a===0){e.removeChild(h),Wn(t);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=h}while(s);Wn(t)}function ir(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function yc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var tn=Math.random().toString(36).slice(2),Mt="__reactFiber$"+tn,ts="__reactProps$"+tn,Vt="__reactContainer$"+tn,Yo="__reactEvents$"+tn,gm="__reactListeners$"+tn,ym="__reactHandles$"+tn;function Nr(e){var t=e[Mt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Vt]||s[Mt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=yc(e);e!==null;){if(s=e[Mt])return s;e=yc(e)}return t}e=s,s=e.parentNode}return null}function rs(e){return e=e[Mt]||e[Vt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(n(33))}function Zs(e){return e[ts]||null}var Xo=[],nn=-1;function or(e){return{current:e}}function Ne(e){0>nn||(e.current=Xo[nn],Xo[nn]=null,nn--)}function Se(e,t){nn++,Xo[nn]=e.current,e.current=t}var ar={},Ye=or(ar),it=or(!1),Cr=ar;function sn(e,t){var s=e.type.contextTypes;if(!s)return ar;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var h={},f;for(f in s)h[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=h),h}function ot(e){return e=e.childContextTypes,e!=null}function ei(){Ne(it),Ne(Ye)}function vc(e,t,s){if(Ye.current!==ar)throw Error(n(168));Se(Ye,t),Se(it,s)}function wc(e,t,s){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var h in a)if(!(h in t))throw Error(n(108,je(e)||"Unknown",h));return K({},s,a)}function ti(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ar,Cr=Ye.current,Se(Ye,e),Se(it,it.current),!0}function xc(e,t,s){var a=e.stateNode;if(!a)throw Error(n(169));s?(e=wc(e,t,Cr),a.__reactInternalMemoizedMergedChildContext=e,Ne(it),Ne(Ye),Se(Ye,e)):Ne(it),Se(it,s)}var Wt=null,ri=!1,Zo=!1;function _c(e){Wt===null?Wt=[e]:Wt.push(e)}function vm(e){ri=!0,_c(e)}function lr(){if(!Zo&&Wt!==null){Zo=!0;var e=0,t=xe;try{var s=Wt;for(xe=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}Wt=null,ri=!1}catch(h){throw Wt!==null&&(Wt=Wt.slice(e+1)),ju(_o,lr),h}finally{xe=t,Zo=!1}}return null}var on=[],an=0,ni=null,si=0,xt=[],_t=0,Tr=null,qt=1,Ht="";function Pr(e,t){on[an++]=si,on[an++]=ni,ni=e,si=t}function bc(e,t,s){xt[_t++]=qt,xt[_t++]=Ht,xt[_t++]=Tr,Tr=e;var a=qt;e=Ht;var h=32-Ct(a)-1;a&=~(1<<h),s+=1;var f=32-Ct(t)+h;if(30<f){var y=h-h%5;f=(a&(1<<y)-1).toString(32),a>>=y,h-=y,qt=1<<32-Ct(t)+h|s<<h|a,Ht=f+e}else qt=1<<f|s<<h|a,Ht=e}function ea(e){e.return!==null&&(Pr(e,1),bc(e,1,0))}function ta(e){for(;e===ni;)ni=on[--an],on[an]=null,si=on[--an],on[an]=null;for(;e===Tr;)Tr=xt[--_t],xt[_t]=null,Ht=xt[--_t],xt[_t]=null,qt=xt[--_t],xt[_t]=null}var ft=null,pt=null,Te=!1,Pt=null;function jc(e,t){var s=kt(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Sc(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ft=e,pt=ir(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ft=e,pt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Tr!==null?{id:qt,overflow:Ht}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=kt(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,ft=e,pt=null,!0):!1;default:return!1}}function ra(e){return(e.mode&1)!==0&&(e.flags&128)===0}function na(e){if(Te){var t=pt;if(t){var s=t;if(!Sc(e,t)){if(ra(e))throw Error(n(418));t=ir(s.nextSibling);var a=ft;t&&Sc(e,t)?jc(a,s):(e.flags=e.flags&-4097|2,Te=!1,ft=e)}}else{if(ra(e))throw Error(n(418));e.flags=e.flags&-4097|2,Te=!1,ft=e}}}function kc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ft=e}function ii(e){if(e!==ft)return!1;if(!Te)return kc(e),Te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Go(e.type,e.memoizedProps)),t&&(t=pt)){if(ra(e))throw Ec(),Error(n(418));for(;t;)jc(e,t),t=ir(t.nextSibling)}if(kc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){pt=ir(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}pt=null}}else pt=ft?ir(e.stateNode.nextSibling):null;return!0}function Ec(){for(var e=pt;e;)e=ir(e.nextSibling)}function ln(){pt=ft=null,Te=!1}function sa(e){Pt===null?Pt=[e]:Pt.push(e)}var wm=U.ReactCurrentBatchConfig;function ns(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(n(309));var a=s.stateNode}if(!a)throw Error(n(147,e));var h=a,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(y){var b=h.refs;y===null?delete b[f]:b[f]=y},t._stringRef=f,t)}if(typeof e!="string")throw Error(n(284));if(!s._owner)throw Error(n(290,e))}return e}function oi(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Nc(e){var t=e._init;return t(e._payload)}function Cc(e){function t(P,N){if(e){var A=P.deletions;A===null?(P.deletions=[N],P.flags|=16):A.push(N)}}function s(P,N){if(!e)return null;for(;N!==null;)t(P,N),N=N.sibling;return null}function a(P,N){for(P=new Map;N!==null;)N.key!==null?P.set(N.key,N):P.set(N.index,N),N=N.sibling;return P}function h(P,N){return P=gr(P,N),P.index=0,P.sibling=null,P}function f(P,N,A){return P.index=A,e?(A=P.alternate,A!==null?(A=A.index,A<N?(P.flags|=2,N):A):(P.flags|=2,N)):(P.flags|=1048576,N)}function y(P){return e&&P.alternate===null&&(P.flags|=2),P}function b(P,N,A,B){return N===null||N.tag!==6?(N=Ja(A,P.mode,B),N.return=P,N):(N=h(N,A),N.return=P,N)}function k(P,N,A,B){var Y=A.type;return Y===Z?M(P,N,A.props.children,B,A.key):N!==null&&(N.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Ie&&Nc(Y)===N.type)?(B=h(N,A.props),B.ref=ns(P,N,A),B.return=P,B):(B=Pi(A.type,A.key,A.props,null,P.mode,B),B.ref=ns(P,N,A),B.return=P,B)}function I(P,N,A,B){return N===null||N.tag!==4||N.stateNode.containerInfo!==A.containerInfo||N.stateNode.implementation!==A.implementation?(N=Qa(A,P.mode,B),N.return=P,N):(N=h(N,A.children||[]),N.return=P,N)}function M(P,N,A,B,Y){return N===null||N.tag!==7?(N=Dr(A,P.mode,B,Y),N.return=P,N):(N=h(N,A),N.return=P,N)}function z(P,N,A){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Ja(""+N,P.mode,A),N.return=P,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case F:return A=Pi(N.type,N.key,N.props,null,P.mode,A),A.ref=ns(P,null,N),A.return=P,A;case W:return N=Qa(N,P.mode,A),N.return=P,N;case Ie:var B=N._init;return z(P,B(N._payload),A)}if(Rn(N)||ne(N))return N=Dr(N,P.mode,A,null),N.return=P,N;oi(P,N)}return null}function $(P,N,A,B){var Y=N!==null?N.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return Y!==null?null:b(P,N,""+A,B);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case F:return A.key===Y?k(P,N,A,B):null;case W:return A.key===Y?I(P,N,A,B):null;case Ie:return Y=A._init,$(P,N,Y(A._payload),B)}if(Rn(A)||ne(A))return Y!==null?null:M(P,N,A,B,null);oi(P,A)}return null}function q(P,N,A,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number")return P=P.get(A)||null,b(N,P,""+B,Y);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case F:return P=P.get(B.key===null?A:B.key)||null,k(N,P,B,Y);case W:return P=P.get(B.key===null?A:B.key)||null,I(N,P,B,Y);case Ie:var te=B._init;return q(P,N,A,te(B._payload),Y)}if(Rn(B)||ne(B))return P=P.get(A)||null,M(N,P,B,Y,null);oi(N,B)}return null}function G(P,N,A,B){for(var Y=null,te=null,re=N,oe=N=0,He=null;re!==null&&oe<A.length;oe++){re.index>oe?(He=re,re=null):He=re.sibling;var ye=$(P,re,A[oe],B);if(ye===null){re===null&&(re=He);break}e&&re&&ye.alternate===null&&t(P,re),N=f(ye,N,oe),te===null?Y=ye:te.sibling=ye,te=ye,re=He}if(oe===A.length)return s(P,re),Te&&Pr(P,oe),Y;if(re===null){for(;oe<A.length;oe++)re=z(P,A[oe],B),re!==null&&(N=f(re,N,oe),te===null?Y=re:te.sibling=re,te=re);return Te&&Pr(P,oe),Y}for(re=a(P,re);oe<A.length;oe++)He=q(re,P,oe,A[oe],B),He!==null&&(e&&He.alternate!==null&&re.delete(He.key===null?oe:He.key),N=f(He,N,oe),te===null?Y=He:te.sibling=He,te=He);return e&&re.forEach(function(yr){return t(P,yr)}),Te&&Pr(P,oe),Y}function Q(P,N,A,B){var Y=ne(A);if(typeof Y!="function")throw Error(n(150));if(A=Y.call(A),A==null)throw Error(n(151));for(var te=Y=null,re=N,oe=N=0,He=null,ye=A.next();re!==null&&!ye.done;oe++,ye=A.next()){re.index>oe?(He=re,re=null):He=re.sibling;var yr=$(P,re,ye.value,B);if(yr===null){re===null&&(re=He);break}e&&re&&yr.alternate===null&&t(P,re),N=f(yr,N,oe),te===null?Y=yr:te.sibling=yr,te=yr,re=He}if(ye.done)return s(P,re),Te&&Pr(P,oe),Y;if(re===null){for(;!ye.done;oe++,ye=A.next())ye=z(P,ye.value,B),ye!==null&&(N=f(ye,N,oe),te===null?Y=ye:te.sibling=ye,te=ye);return Te&&Pr(P,oe),Y}for(re=a(P,re);!ye.done;oe++,ye=A.next())ye=q(re,P,oe,ye.value,B),ye!==null&&(e&&ye.alternate!==null&&re.delete(ye.key===null?oe:ye.key),N=f(ye,N,oe),te===null?Y=ye:te.sibling=ye,te=ye);return e&&re.forEach(function(Xm){return t(P,Xm)}),Te&&Pr(P,oe),Y}function Ue(P,N,A,B){if(typeof A=="object"&&A!==null&&A.type===Z&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case F:e:{for(var Y=A.key,te=N;te!==null;){if(te.key===Y){if(Y=A.type,Y===Z){if(te.tag===7){s(P,te.sibling),N=h(te,A.props.children),N.return=P,P=N;break e}}else if(te.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Ie&&Nc(Y)===te.type){s(P,te.sibling),N=h(te,A.props),N.ref=ns(P,te,A),N.return=P,P=N;break e}s(P,te);break}else t(P,te);te=te.sibling}A.type===Z?(N=Dr(A.props.children,P.mode,B,A.key),N.return=P,P=N):(B=Pi(A.type,A.key,A.props,null,P.mode,B),B.ref=ns(P,N,A),B.return=P,P=B)}return y(P);case W:e:{for(te=A.key;N!==null;){if(N.key===te)if(N.tag===4&&N.stateNode.containerInfo===A.containerInfo&&N.stateNode.implementation===A.implementation){s(P,N.sibling),N=h(N,A.children||[]),N.return=P,P=N;break e}else{s(P,N);break}else t(P,N);N=N.sibling}N=Qa(A,P.mode,B),N.return=P,P=N}return y(P);case Ie:return te=A._init,Ue(P,N,te(A._payload),B)}if(Rn(A))return G(P,N,A,B);if(ne(A))return Q(P,N,A,B);oi(P,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,N!==null&&N.tag===6?(s(P,N.sibling),N=h(N,A),N.return=P,P=N):(s(P,N),N=Ja(A,P.mode,B),N.return=P,P=N),y(P)):s(P,N)}return Ue}var un=Cc(!0),Tc=Cc(!1),ai=or(null),li=null,cn=null,ia=null;function oa(){ia=cn=li=null}function aa(e){var t=ai.current;Ne(ai),e._currentValue=t}function la(e,t,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function dn(e,t){li=e,ia=cn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(at=!0),e.firstContext=null)}function bt(e){var t=e._currentValue;if(ia!==e)if(e={context:e,memoizedValue:t,next:null},cn===null){if(li===null)throw Error(n(308));cn=e,li.dependencies={lanes:0,firstContext:e}}else cn=cn.next=e;return t}var Or=null;function ua(e){Or===null?Or=[e]:Or.push(e)}function Pc(e,t,s,a){var h=t.interleaved;return h===null?(s.next=s,ua(t)):(s.next=h.next,h.next=s),t.interleaved=s,Kt(e,a)}function Kt(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var ur=!1;function ca(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cr(e,t,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(pe&2)!==0){var h=a.pending;return h===null?t.next=t:(t.next=h.next,h.next=t),a.pending=t,Kt(e,s)}return h=a.interleaved,h===null?(t.next=t,ua(a)):(t.next=h.next,h.next=t),a.interleaved=t,Kt(e,s)}function ui(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,So(e,s)}}function Rc(e,t){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var h=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var y={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};f===null?h=f=y:f=f.next=y,s=s.next}while(s!==null);f===null?h=f=t:f=f.next=t}else h=f=t;s={baseState:a.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function ci(e,t,s,a){var h=e.updateQueue;ur=!1;var f=h.firstBaseUpdate,y=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var k=b,I=k.next;k.next=null,y===null?f=I:y.next=I,y=k;var M=e.alternate;M!==null&&(M=M.updateQueue,b=M.lastBaseUpdate,b!==y&&(b===null?M.firstBaseUpdate=I:b.next=I,M.lastBaseUpdate=k))}if(f!==null){var z=h.baseState;y=0,M=I=k=null,b=f;do{var $=b.lane,q=b.eventTime;if((a&$)===$){M!==null&&(M=M.next={eventTime:q,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var G=e,Q=b;switch($=t,q=s,Q.tag){case 1:if(G=Q.payload,typeof G=="function"){z=G.call(q,z,$);break e}z=G;break e;case 3:G.flags=G.flags&-65537|128;case 0:if(G=Q.payload,$=typeof G=="function"?G.call(q,z,$):G,$==null)break e;z=K({},z,$);break e;case 2:ur=!0}}b.callback!==null&&b.lane!==0&&(e.flags|=64,$=h.effects,$===null?h.effects=[b]:$.push(b))}else q={eventTime:q,lane:$,tag:b.tag,payload:b.payload,callback:b.callback,next:null},M===null?(I=M=q,k=z):M=M.next=q,y|=$;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;$=b,b=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(!0);if(M===null&&(k=z),h.baseState=k,h.firstBaseUpdate=I,h.lastBaseUpdate=M,t=h.shared.interleaved,t!==null){h=t;do y|=h.lane,h=h.next;while(h!==t)}else f===null&&(h.shared.lanes=0);Ir|=y,e.lanes=y,e.memoizedState=z}}function Ac(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],h=a.callback;if(h!==null){if(a.callback=null,a=s,typeof h!="function")throw Error(n(191,h));h.call(a)}}}var ss={},zt=or(ss),is=or(ss),os=or(ss);function Rr(e){if(e===ss)throw Error(n(174));return e}function da(e,t){switch(Se(os,t),Se(is,e),Se(zt,ss),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ho(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ho(t,e)}Ne(zt),Se(zt,t)}function hn(){Ne(zt),Ne(is),Ne(os)}function Ic(e){Rr(os.current);var t=Rr(zt.current),s=ho(t,e.type);t!==s&&(Se(is,e),Se(zt,s))}function ha(e){is.current===e&&(Ne(zt),Ne(is))}var Pe=or(0);function di(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fa=[];function pa(){for(var e=0;e<fa.length;e++)fa[e]._workInProgressVersionPrimary=null;fa.length=0}var hi=U.ReactCurrentDispatcher,ma=U.ReactCurrentBatchConfig,Ar=0,Oe=null,Be=null,We=null,fi=!1,as=!1,ls=0,xm=0;function Xe(){throw Error(n(321))}function ga(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Tt(e[s],t[s]))return!1;return!0}function ya(e,t,s,a,h,f){if(Ar=f,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hi.current=e===null||e.memoizedState===null?Sm:km,e=s(a,h),as){f=0;do{if(as=!1,ls=0,25<=f)throw Error(n(301));f+=1,We=Be=null,t.updateQueue=null,hi.current=Em,e=s(a,h)}while(as)}if(hi.current=gi,t=Be!==null&&Be.next!==null,Ar=0,We=Be=Oe=null,fi=!1,t)throw Error(n(300));return e}function va(){var e=ls!==0;return ls=0,e}function Bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Oe.memoizedState=We=e:We=We.next=e,We}function jt(){if(Be===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=We===null?Oe.memoizedState:We.next;if(t!==null)We=t,Be=e;else{if(e===null)throw Error(n(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},We===null?Oe.memoizedState=We=e:We=We.next=e}return We}function us(e,t){return typeof t=="function"?t(e):t}function wa(e){var t=jt(),s=t.queue;if(s===null)throw Error(n(311));s.lastRenderedReducer=e;var a=Be,h=a.baseQueue,f=s.pending;if(f!==null){if(h!==null){var y=h.next;h.next=f.next,f.next=y}a.baseQueue=h=f,s.pending=null}if(h!==null){f=h.next,a=a.baseState;var b=y=null,k=null,I=f;do{var M=I.lane;if((Ar&M)===M)k!==null&&(k=k.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),a=I.hasEagerState?I.eagerState:e(a,I.action);else{var z={lane:M,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};k===null?(b=k=z,y=a):k=k.next=z,Oe.lanes|=M,Ir|=M}I=I.next}while(I!==null&&I!==f);k===null?y=a:k.next=b,Tt(a,t.memoizedState)||(at=!0),t.memoizedState=a,t.baseState=y,t.baseQueue=k,s.lastRenderedState=a}if(e=s.interleaved,e!==null){h=e;do f=h.lane,Oe.lanes|=f,Ir|=f,h=h.next;while(h!==e)}else h===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function xa(e){var t=jt(),s=t.queue;if(s===null)throw Error(n(311));s.lastRenderedReducer=e;var a=s.dispatch,h=s.pending,f=t.memoizedState;if(h!==null){s.pending=null;var y=h=h.next;do f=e(f,y.action),y=y.next;while(y!==h);Tt(f,t.memoizedState)||(at=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),s.lastRenderedState=f}return[f,a]}function Lc(){}function Uc(e,t){var s=Oe,a=jt(),h=t(),f=!Tt(a.memoizedState,h);if(f&&(a.memoizedState=h,at=!0),a=a.queue,_a(Mc.bind(null,s,a,e),[e]),a.getSnapshot!==t||f||We!==null&&We.memoizedState.tag&1){if(s.flags|=2048,cs(9,Dc.bind(null,s,a,h,t),void 0,null),qe===null)throw Error(n(349));(Ar&30)!==0||$c(s,t,h)}return h}function $c(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Dc(e,t,s,a){t.value=s,t.getSnapshot=a,zc(t)&&Bc(e)}function Mc(e,t,s){return s(function(){zc(t)&&Bc(e)})}function zc(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Tt(e,s)}catch{return!0}}function Bc(e){var t=Kt(e,1);t!==null&&It(t,e,1,-1)}function Fc(e){var t=Bt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:e},t.queue=e,e=e.dispatch=jm.bind(null,Oe,e),[t.memoizedState,e]}function cs(e,t,s,a){return e={tag:e,create:t,destroy:s,deps:a,next:null},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e)),e}function Vc(){return jt().memoizedState}function pi(e,t,s,a){var h=Bt();Oe.flags|=e,h.memoizedState=cs(1|t,s,void 0,a===void 0?null:a)}function mi(e,t,s,a){var h=jt();a=a===void 0?null:a;var f=void 0;if(Be!==null){var y=Be.memoizedState;if(f=y.destroy,a!==null&&ga(a,y.deps)){h.memoizedState=cs(t,s,f,a);return}}Oe.flags|=e,h.memoizedState=cs(1|t,s,f,a)}function Wc(e,t){return pi(8390656,8,e,t)}function _a(e,t){return mi(2048,8,e,t)}function qc(e,t){return mi(4,2,e,t)}function Hc(e,t){return mi(4,4,e,t)}function Kc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gc(e,t,s){return s=s!=null?s.concat([e]):null,mi(4,4,Kc.bind(null,t,e),s)}function ba(){}function Jc(e,t){var s=jt();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&ga(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function Qc(e,t){var s=jt();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&ga(t,a[1])?a[0]:(e=e(),s.memoizedState=[e,t],e)}function Yc(e,t,s){return(Ar&21)===0?(e.baseState&&(e.baseState=!1,at=!0),e.memoizedState=s):(Tt(s,t)||(s=Nu(),Oe.lanes|=s,Ir|=s,e.baseState=!0),t)}function _m(e,t){var s=xe;xe=s!==0&&4>s?s:4,e(!0);var a=ma.transition;ma.transition={};try{e(!1),t()}finally{xe=s,ma.transition=a}}function Xc(){return jt().memoizedState}function bm(e,t,s){var a=pr(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},Zc(e))ed(t,s);else if(s=Pc(e,t,s,a),s!==null){var h=st();It(s,e,a,h),td(s,t,a)}}function jm(e,t,s){var a=pr(e),h={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(Zc(e))ed(t,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,b=f(y,s);if(h.hasEagerState=!0,h.eagerState=b,Tt(b,y)){var k=t.interleaved;k===null?(h.next=h,ua(t)):(h.next=k.next,k.next=h),t.interleaved=h;return}}catch{}finally{}s=Pc(e,t,h,a),s!==null&&(h=st(),It(s,e,a,h),td(s,t,a))}}function Zc(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function ed(e,t){as=fi=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function td(e,t,s){if((s&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,So(e,s)}}var gi={readContext:bt,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},Sm={readContext:bt,useCallback:function(e,t){return Bt().memoizedState=[e,t===void 0?null:t],e},useContext:bt,useEffect:Wc,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,pi(4194308,4,Kc.bind(null,t,e),s)},useLayoutEffect:function(e,t){return pi(4194308,4,e,t)},useInsertionEffect:function(e,t){return pi(4,2,e,t)},useMemo:function(e,t){var s=Bt();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var a=Bt();return t=s!==void 0?s(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=bm.bind(null,Oe,e),[a.memoizedState,e]},useRef:function(e){var t=Bt();return e={current:e},t.memoizedState=e},useState:Fc,useDebugValue:ba,useDeferredValue:function(e){return Bt().memoizedState=e},useTransition:function(){var e=Fc(!1),t=e[0];return e=_m.bind(null,e[1]),Bt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var a=Oe,h=Bt();if(Te){if(s===void 0)throw Error(n(407));s=s()}else{if(s=t(),qe===null)throw Error(n(349));(Ar&30)!==0||$c(a,t,s)}h.memoizedState=s;var f={value:s,getSnapshot:t};return h.queue=f,Wc(Mc.bind(null,a,f,e),[e]),a.flags|=2048,cs(9,Dc.bind(null,a,f,s,t),void 0,null),s},useId:function(){var e=Bt(),t=qe.identifierPrefix;if(Te){var s=Ht,a=qt;s=(a&~(1<<32-Ct(a)-1)).toString(32)+s,t=":"+t+"R"+s,s=ls++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=xm++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},km={readContext:bt,useCallback:Jc,useContext:bt,useEffect:_a,useImperativeHandle:Gc,useInsertionEffect:qc,useLayoutEffect:Hc,useMemo:Qc,useReducer:wa,useRef:Vc,useState:function(){return wa(us)},useDebugValue:ba,useDeferredValue:function(e){var t=jt();return Yc(t,Be.memoizedState,e)},useTransition:function(){var e=wa(us)[0],t=jt().memoizedState;return[e,t]},useMutableSource:Lc,useSyncExternalStore:Uc,useId:Xc,unstable_isNewReconciler:!1},Em={readContext:bt,useCallback:Jc,useContext:bt,useEffect:_a,useImperativeHandle:Gc,useInsertionEffect:qc,useLayoutEffect:Hc,useMemo:Qc,useReducer:xa,useRef:Vc,useState:function(){return xa(us)},useDebugValue:ba,useDeferredValue:function(e){var t=jt();return Be===null?t.memoizedState=e:Yc(t,Be.memoizedState,e)},useTransition:function(){var e=xa(us)[0],t=jt().memoizedState;return[e,t]},useMutableSource:Lc,useSyncExternalStore:Uc,useId:Xc,unstable_isNewReconciler:!1};function Ot(e,t){if(e&&e.defaultProps){t=K({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function ja(e,t,s,a){t=e.memoizedState,s=s(a,t),s=s==null?t:K({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var yi={isMounted:function(e){return(e=e._reactInternals)?Er(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var a=st(),h=pr(e),f=Gt(a,h);f.payload=t,s!=null&&(f.callback=s),t=cr(e,f,h),t!==null&&(It(t,e,h,a),ui(t,e,h))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=st(),h=pr(e),f=Gt(a,h);f.tag=1,f.payload=t,s!=null&&(f.callback=s),t=cr(e,f,h),t!==null&&(It(t,e,h,a),ui(t,e,h))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=st(),a=pr(e),h=Gt(s,a);h.tag=2,t!=null&&(h.callback=t),t=cr(e,h,a),t!==null&&(It(t,e,a,s),ui(t,e,a))}};function rd(e,t,s,a,h,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,y):t.prototype&&t.prototype.isPureReactComponent?!Qn(s,a)||!Qn(h,f):!0}function nd(e,t,s){var a=!1,h=ar,f=t.contextType;return typeof f=="object"&&f!==null?f=bt(f):(h=ot(t)?Cr:Ye.current,a=t.contextTypes,f=(a=a!=null)?sn(e,h):ar),t=new t(s,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yi,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=f),t}function sd(e,t,s,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&yi.enqueueReplaceState(t,t.state,null)}function Sa(e,t,s,a){var h=e.stateNode;h.props=s,h.state=e.memoizedState,h.refs={},ca(e);var f=t.contextType;typeof f=="object"&&f!==null?h.context=bt(f):(f=ot(t)?Cr:Ye.current,h.context=sn(e,f)),h.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(ja(e,t,f,s),h.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(t=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),t!==h.state&&yi.enqueueReplaceState(h,h.state,null),ci(e,s,h,a),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function fn(e,t){try{var s="",a=t;do s+=me(a),a=a.return;while(a);var h=s}catch(f){h=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:h,digest:null}}function ka(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Ea(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var Nm=typeof WeakMap=="function"?WeakMap:Map;function id(e,t,s){s=Gt(-1,s),s.tag=3,s.payload={element:null};var a=t.value;return s.callback=function(){Si||(Si=!0,Ba=a),Ea(e,t)},s}function od(e,t,s){s=Gt(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var h=t.value;s.payload=function(){return a(h)},s.callback=function(){Ea(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(s.callback=function(){Ea(e,t),typeof a!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),s}function ad(e,t,s){var a=e.pingCache;if(a===null){a=e.pingCache=new Nm;var h=new Set;a.set(t,h)}else h=a.get(t),h===void 0&&(h=new Set,a.set(t,h));h.has(s)||(h.add(s),e=Bm.bind(null,e,t,s),t.then(e,e))}function ld(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ud(e,t,s,a,h){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Gt(-1,1),t.tag=2,cr(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=h,e)}var Cm=U.ReactCurrentOwner,at=!1;function nt(e,t,s,a){t.child=e===null?Tc(t,null,s,a):un(t,e.child,s,a)}function cd(e,t,s,a,h){s=s.render;var f=t.ref;return dn(t,h),a=ya(e,t,s,a,f,h),s=va(),e!==null&&!at?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,Jt(e,t,h)):(Te&&s&&ea(t),t.flags|=1,nt(e,t,a,h),t.child)}function dd(e,t,s,a,h){if(e===null){var f=s.type;return typeof f=="function"&&!Ga(f)&&f.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=f,hd(e,t,f,a,h)):(e=Pi(s.type,null,a,t,t.mode,h),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&h)===0){var y=f.memoizedProps;if(s=s.compare,s=s!==null?s:Qn,s(y,a)&&e.ref===t.ref)return Jt(e,t,h)}return t.flags|=1,e=gr(f,a),e.ref=t.ref,e.return=t,t.child=e}function hd(e,t,s,a,h){if(e!==null){var f=e.memoizedProps;if(Qn(f,a)&&e.ref===t.ref)if(at=!1,t.pendingProps=a=f,(e.lanes&h)!==0)(e.flags&131072)!==0&&(at=!0);else return t.lanes=e.lanes,Jt(e,t,h)}return Na(e,t,s,a,h)}function fd(e,t,s){var a=t.pendingProps,h=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(mn,mt),mt|=s;else{if((s&1073741824)===0)return e=f!==null?f.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Se(mn,mt),mt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:s,Se(mn,mt),mt|=a}else f!==null?(a=f.baseLanes|s,t.memoizedState=null):a=s,Se(mn,mt),mt|=a;return nt(e,t,h,s),t.child}function pd(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Na(e,t,s,a,h){var f=ot(s)?Cr:Ye.current;return f=sn(t,f),dn(t,h),s=ya(e,t,s,a,f,h),a=va(),e!==null&&!at?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,Jt(e,t,h)):(Te&&a&&ea(t),t.flags|=1,nt(e,t,s,h),t.child)}function md(e,t,s,a,h){if(ot(s)){var f=!0;ti(t)}else f=!1;if(dn(t,h),t.stateNode===null)wi(e,t),nd(t,s,a),Sa(t,s,a,h),a=!0;else if(e===null){var y=t.stateNode,b=t.memoizedProps;y.props=b;var k=y.context,I=s.contextType;typeof I=="object"&&I!==null?I=bt(I):(I=ot(s)?Cr:Ye.current,I=sn(t,I));var M=s.getDerivedStateFromProps,z=typeof M=="function"||typeof y.getSnapshotBeforeUpdate=="function";z||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(b!==a||k!==I)&&sd(t,y,a,I),ur=!1;var $=t.memoizedState;y.state=$,ci(t,a,y,h),k=t.memoizedState,b!==a||$!==k||it.current||ur?(typeof M=="function"&&(ja(t,s,M,a),k=t.memoizedState),(b=ur||rd(t,s,b,a,$,k,I))?(z||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=k),y.props=a,y.state=k,y.context=I,a=b):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{y=t.stateNode,Oc(e,t),b=t.memoizedProps,I=t.type===t.elementType?b:Ot(t.type,b),y.props=I,z=t.pendingProps,$=y.context,k=s.contextType,typeof k=="object"&&k!==null?k=bt(k):(k=ot(s)?Cr:Ye.current,k=sn(t,k));var q=s.getDerivedStateFromProps;(M=typeof q=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(b!==z||$!==k)&&sd(t,y,a,k),ur=!1,$=t.memoizedState,y.state=$,ci(t,a,y,h);var G=t.memoizedState;b!==z||$!==G||it.current||ur?(typeof q=="function"&&(ja(t,s,q,a),G=t.memoizedState),(I=ur||rd(t,s,I,a,$,G,k)||!1)?(M||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(a,G,k),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(a,G,k)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||b===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=G),y.props=a,y.state=G,y.context=k,a=I):(typeof y.componentDidUpdate!="function"||b===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),a=!1)}return Ca(e,t,s,a,f,h)}function Ca(e,t,s,a,h,f){pd(e,t);var y=(t.flags&128)!==0;if(!a&&!y)return h&&xc(t,s,!1),Jt(e,t,f);a=t.stateNode,Cm.current=t;var b=y&&typeof s.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&y?(t.child=un(t,e.child,null,f),t.child=un(t,null,b,f)):nt(e,t,b,f),t.memoizedState=a.state,h&&xc(t,s,!0),t.child}function gd(e){var t=e.stateNode;t.pendingContext?vc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vc(e,t.context,!1),da(e,t.containerInfo)}function yd(e,t,s,a,h){return ln(),sa(h),t.flags|=256,nt(e,t,s,a),t.child}var Ta={dehydrated:null,treeContext:null,retryLane:0};function Pa(e){return{baseLanes:e,cachePool:null,transitions:null}}function vd(e,t,s){var a=t.pendingProps,h=Pe.current,f=!1,y=(t.flags&128)!==0,b;if((b=y)||(b=e!==null&&e.memoizedState===null?!1:(h&2)!==0),b?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),Se(Pe,h&1),e===null)return na(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(y=a.children,e=a.fallback,f?(a=t.mode,f=t.child,y={mode:"hidden",children:y},(a&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=y):f=Oi(y,a,0,null),e=Dr(e,a,s,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Pa(s),t.memoizedState=Ta,e):Oa(t,y));if(h=e.memoizedState,h!==null&&(b=h.dehydrated,b!==null))return Tm(e,t,y,a,b,h,s);if(f){f=a.fallback,y=t.mode,h=e.child,b=h.sibling;var k={mode:"hidden",children:a.children};return(y&1)===0&&t.child!==h?(a=t.child,a.childLanes=0,a.pendingProps=k,t.deletions=null):(a=gr(h,k),a.subtreeFlags=h.subtreeFlags&14680064),b!==null?f=gr(b,f):(f=Dr(f,y,s,null),f.flags|=2),f.return=t,a.return=t,a.sibling=f,t.child=a,a=f,f=t.child,y=e.child.memoizedState,y=y===null?Pa(s):{baseLanes:y.baseLanes|s,cachePool:null,transitions:y.transitions},f.memoizedState=y,f.childLanes=e.childLanes&~s,t.memoizedState=Ta,a}return f=e.child,e=f.sibling,a=gr(f,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=s),a.return=t,a.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=a,t.memoizedState=null,a}function Oa(e,t){return t=Oi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function vi(e,t,s,a){return a!==null&&sa(a),un(t,e.child,null,s),e=Oa(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Tm(e,t,s,a,h,f,y){if(s)return t.flags&256?(t.flags&=-257,a=ka(Error(n(422))),vi(e,t,y,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=a.fallback,h=t.mode,a=Oi({mode:"visible",children:a.children},h,0,null),f=Dr(f,h,y,null),f.flags|=2,a.return=t,f.return=t,a.sibling=f,t.child=a,(t.mode&1)!==0&&un(t,e.child,null,y),t.child.memoizedState=Pa(y),t.memoizedState=Ta,f);if((t.mode&1)===0)return vi(e,t,y,null);if(h.data==="$!"){if(a=h.nextSibling&&h.nextSibling.dataset,a)var b=a.dgst;return a=b,f=Error(n(419)),a=ka(f,a,void 0),vi(e,t,y,a)}if(b=(y&e.childLanes)!==0,at||b){if(a=qe,a!==null){switch(y&-y){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(a.suspendedLanes|y))!==0?0:h,h!==0&&h!==f.retryLane&&(f.retryLane=h,Kt(e,h),It(a,e,h,-1))}return Ka(),a=ka(Error(n(421))),vi(e,t,y,a)}return h.data==="$?"?(t.flags|=128,t.child=e.child,t=Fm.bind(null,e),h._reactRetry=t,null):(e=f.treeContext,pt=ir(h.nextSibling),ft=t,Te=!0,Pt=null,e!==null&&(xt[_t++]=qt,xt[_t++]=Ht,xt[_t++]=Tr,qt=e.id,Ht=e.overflow,Tr=t),t=Oa(t,a.children),t.flags|=4096,t)}function wd(e,t,s){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),la(e.return,t,s)}function Ra(e,t,s,a,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:h}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=s,f.tailMode=h)}function xd(e,t,s){var a=t.pendingProps,h=a.revealOrder,f=a.tail;if(nt(e,t,a.children,s),a=Pe.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wd(e,s,t);else if(e.tag===19)wd(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Se(Pe,a),(t.mode&1)===0)t.memoizedState=null;else switch(h){case"forwards":for(s=t.child,h=null;s!==null;)e=s.alternate,e!==null&&di(e)===null&&(h=s),s=s.sibling;s=h,s===null?(h=t.child,t.child=null):(h=s.sibling,s.sibling=null),Ra(t,!1,h,s,f);break;case"backwards":for(s=null,h=t.child,t.child=null;h!==null;){if(e=h.alternate,e!==null&&di(e)===null){t.child=h;break}e=h.sibling,h.sibling=s,s=h,h=e}Ra(t,!0,s,null,f);break;case"together":Ra(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jt(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ir|=t.lanes,(s&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(n(153));if(t.child!==null){for(e=t.child,s=gr(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=gr(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Pm(e,t,s){switch(t.tag){case 3:gd(t),ln();break;case 5:Ic(t);break;case 1:ot(t.type)&&ti(t);break;case 4:da(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,h=t.memoizedProps.value;Se(ai,a._currentValue),a._currentValue=h;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Se(Pe,Pe.current&1),t.flags|=128,null):(s&t.child.childLanes)!==0?vd(e,t,s):(Se(Pe,Pe.current&1),e=Jt(e,t,s),e!==null?e.sibling:null);Se(Pe,Pe.current&1);break;case 19:if(a=(s&t.childLanes)!==0,(e.flags&128)!==0){if(a)return xd(e,t,s);t.flags|=128}if(h=t.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Se(Pe,Pe.current),a)break;return null;case 22:case 23:return t.lanes=0,fd(e,t,s)}return Jt(e,t,s)}var _d,Aa,bd,jd;_d=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Aa=function(){},bd=function(e,t,s,a){var h=e.memoizedProps;if(h!==a){e=t.stateNode,Rr(zt.current);var f=null;switch(s){case"input":h=ao(e,h),a=ao(e,a),f=[];break;case"select":h=K({},h,{value:void 0}),a=K({},a,{value:void 0}),f=[];break;case"textarea":h=co(e,h),a=co(e,a),f=[];break;default:typeof h.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Xs)}fo(s,a);var y;s=null;for(I in h)if(!a.hasOwnProperty(I)&&h.hasOwnProperty(I)&&h[I]!=null)if(I==="style"){var b=h[I];for(y in b)b.hasOwnProperty(y)&&(s||(s={}),s[y]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(l.hasOwnProperty(I)?f||(f=[]):(f=f||[]).push(I,null));for(I in a){var k=a[I];if(b=h?.[I],a.hasOwnProperty(I)&&k!==b&&(k!=null||b!=null))if(I==="style")if(b){for(y in b)!b.hasOwnProperty(y)||k&&k.hasOwnProperty(y)||(s||(s={}),s[y]="");for(y in k)k.hasOwnProperty(y)&&b[y]!==k[y]&&(s||(s={}),s[y]=k[y])}else s||(f||(f=[]),f.push(I,s)),s=k;else I==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,b=b?b.__html:void 0,k!=null&&b!==k&&(f=f||[]).push(I,k)):I==="children"?typeof k!="string"&&typeof k!="number"||(f=f||[]).push(I,""+k):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(l.hasOwnProperty(I)?(k!=null&&I==="onScroll"&&Ee("scroll",e),f||b===k||(f=[])):(f=f||[]).push(I,k))}s&&(f=f||[]).push("style",s);var I=f;(t.updateQueue=I)&&(t.flags|=4)}},jd=function(e,t,s,a){s!==a&&(t.flags|=4)};function ds(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(t)for(var h=e.child;h!==null;)s|=h.lanes|h.childLanes,a|=h.subtreeFlags&14680064,a|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)s|=h.lanes|h.childLanes,a|=h.subtreeFlags,a|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function Om(e,t,s){var a=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return ot(t.type)&&ei(),Ze(t),null;case 3:return a=t.stateNode,hn(),Ne(it),Ne(Ye),pa(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ii(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Pt!==null&&(Wa(Pt),Pt=null))),Aa(e,t),Ze(t),null;case 5:ha(t);var h=Rr(os.current);if(s=t.type,e!==null&&t.stateNode!=null)bd(e,t,s,a,h),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(n(166));return Ze(t),null}if(e=Rr(zt.current),ii(t)){a=t.stateNode,s=t.type;var f=t.memoizedProps;switch(a[Mt]=t,a[ts]=f,e=(t.mode&1)!==0,s){case"dialog":Ee("cancel",a),Ee("close",a);break;case"iframe":case"object":case"embed":Ee("load",a);break;case"video":case"audio":for(h=0;h<Xn.length;h++)Ee(Xn[h],a);break;case"source":Ee("error",a);break;case"img":case"image":case"link":Ee("error",a),Ee("load",a);break;case"details":Ee("toggle",a);break;case"input":nu(a,f),Ee("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},Ee("invalid",a);break;case"textarea":ou(a,f),Ee("invalid",a)}fo(s,f),h=null;for(var y in f)if(f.hasOwnProperty(y)){var b=f[y];y==="children"?typeof b=="string"?a.textContent!==b&&(f.suppressHydrationWarning!==!0&&Ys(a.textContent,b,e),h=["children",b]):typeof b=="number"&&a.textContent!==""+b&&(f.suppressHydrationWarning!==!0&&Ys(a.textContent,b,e),h=["children",""+b]):l.hasOwnProperty(y)&&b!=null&&y==="onScroll"&&Ee("scroll",a)}switch(s){case"input":Cs(a),iu(a,f,!0);break;case"textarea":Cs(a),lu(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=Xs)}a=h,t.updateQueue=a,a!==null&&(t.flags|=4)}else{y=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=uu(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=y.createElement(s,{is:a.is}):(e=y.createElement(s),s==="select"&&(y=e,a.multiple?y.multiple=!0:a.size&&(y.size=a.size))):e=y.createElementNS(e,s),e[Mt]=t,e[ts]=a,_d(e,t,!1,!1),t.stateNode=e;e:{switch(y=po(s,a),s){case"dialog":Ee("cancel",e),Ee("close",e),h=a;break;case"iframe":case"object":case"embed":Ee("load",e),h=a;break;case"video":case"audio":for(h=0;h<Xn.length;h++)Ee(Xn[h],e);h=a;break;case"source":Ee("error",e),h=a;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),h=a;break;case"details":Ee("toggle",e),h=a;break;case"input":nu(e,a),h=ao(e,a),Ee("invalid",e);break;case"option":h=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},h=K({},a,{value:void 0}),Ee("invalid",e);break;case"textarea":ou(e,a),h=co(e,a),Ee("invalid",e);break;default:h=a}fo(s,h),b=h;for(f in b)if(b.hasOwnProperty(f)){var k=b[f];f==="style"?hu(e,k):f==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&cu(e,k)):f==="children"?typeof k=="string"?(s!=="textarea"||k!=="")&&An(e,k):typeof k=="number"&&An(e,""+k):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l.hasOwnProperty(f)?k!=null&&f==="onScroll"&&Ee("scroll",e):k!=null&&R(e,f,k,y))}switch(s){case"input":Cs(e),iu(e,a,!1);break;case"textarea":Cs(e),lu(e);break;case"option":a.value!=null&&e.setAttribute("value",""+we(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?Hr(e,!!a.multiple,f,!1):a.defaultValue!=null&&Hr(e,!!a.multiple,a.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=Xs)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ze(t),null;case 6:if(e&&t.stateNode!=null)jd(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(n(166));if(s=Rr(os.current),Rr(zt.current),ii(t)){if(a=t.stateNode,s=t.memoizedProps,a[Mt]=t,(f=a.nodeValue!==s)&&(e=ft,e!==null))switch(e.tag){case 3:Ys(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ys(a.nodeValue,s,(e.mode&1)!==0)}f&&(t.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Mt]=t,t.stateNode=a}return Ze(t),null;case 13:if(Ne(Pe),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Te&&pt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Ec(),ln(),t.flags|=98560,f=!1;else if(f=ii(t),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(n(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));f[Mt]=t}else ln(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ze(t),f=!1}else Pt!==null&&(Wa(Pt),Pt=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=s,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Pe.current&1)!==0?Fe===0&&(Fe=3):Ka())),t.updateQueue!==null&&(t.flags|=4),Ze(t),null);case 4:return hn(),Aa(e,t),e===null&&Zn(t.stateNode.containerInfo),Ze(t),null;case 10:return aa(t.type._context),Ze(t),null;case 17:return ot(t.type)&&ei(),Ze(t),null;case 19:if(Ne(Pe),f=t.memoizedState,f===null)return Ze(t),null;if(a=(t.flags&128)!==0,y=f.rendering,y===null)if(a)ds(f,!1);else{if(Fe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(y=di(e),y!==null){for(t.flags|=128,ds(f,!1),a=y.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=s,s=t.child;s!==null;)f=s,e=a,f.flags&=14680066,y=f.alternate,y===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,f.type=y.type,e=y.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Se(Pe,Pe.current&1|2),t.child}e=e.sibling}f.tail!==null&&Le()>gn&&(t.flags|=128,a=!0,ds(f,!1),t.lanes=4194304)}else{if(!a)if(e=di(y),e!==null){if(t.flags|=128,a=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),ds(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!Te)return Ze(t),null}else 2*Le()-f.renderingStartTime>gn&&s!==1073741824&&(t.flags|=128,a=!0,ds(f,!1),t.lanes=4194304);f.isBackwards?(y.sibling=t.child,t.child=y):(s=f.last,s!==null?s.sibling=y:t.child=y,f.last=y)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Le(),t.sibling=null,s=Pe.current,Se(Pe,a?s&1|2:s&1),t):(Ze(t),null);case 22:case 23:return Ha(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(mt&1073741824)!==0&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),null;case 24:return null;case 25:return null}throw Error(n(156,t.tag))}function Rm(e,t){switch(ta(t),t.tag){case 1:return ot(t.type)&&ei(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hn(),Ne(it),Ne(Ye),pa(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return ha(t),null;case 13:if(Ne(Pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(n(340));ln()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ne(Pe),null;case 4:return hn(),null;case 10:return aa(t.type._context),null;case 22:case 23:return Ha(),null;case 24:return null;default:return null}}var xi=!1,et=!1,Am=typeof WeakSet=="function"?WeakSet:Set,H=null;function pn(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){Ae(e,t,a)}else s.current=null}function Ia(e,t,s){try{s()}catch(a){Ae(e,t,a)}}var Sd=!1;function Im(e,t){if(Ho=zs,e=rc(),Do(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var h=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break e}var y=0,b=-1,k=-1,I=0,M=0,z=e,$=null;t:for(;;){for(var q;z!==s||h!==0&&z.nodeType!==3||(b=y+h),z!==f||a!==0&&z.nodeType!==3||(k=y+a),z.nodeType===3&&(y+=z.nodeValue.length),(q=z.firstChild)!==null;)$=z,z=q;for(;;){if(z===e)break t;if($===s&&++I===h&&(b=y),$===f&&++M===a&&(k=y),(q=z.nextSibling)!==null)break;z=$,$=z.parentNode}z=q}s=b===-1||k===-1?null:{start:b,end:k}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ko={focusedElem:e,selectionRange:s},zs=!1,H=t;H!==null;)if(t=H,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,H=e;else for(;H!==null;){t=H;try{var G=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(G!==null){var Q=G.memoizedProps,Ue=G.memoizedState,P=t.stateNode,N=P.getSnapshotBeforeUpdate(t.elementType===t.type?Q:Ot(t.type,Q),Ue);P.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var A=t.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(B){Ae(t,t.return,B)}if(e=t.sibling,e!==null){e.return=t.return,H=e;break}H=t.return}return G=Sd,Sd=!1,G}function hs(e,t,s){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var h=a=a.next;do{if((h.tag&e)===e){var f=h.destroy;h.destroy=void 0,f!==void 0&&Ia(t,s,f)}h=h.next}while(h!==a)}}function _i(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==t)}}function La(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function kd(e){var t=e.alternate;t!==null&&(e.alternate=null,kd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Mt],delete t[ts],delete t[Yo],delete t[gm],delete t[ym])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ed(e){return e.tag===5||e.tag===3||e.tag===4}function Nd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ed(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ua(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Xs));else if(a!==4&&(e=e.child,e!==null))for(Ua(e,t,s),e=e.sibling;e!==null;)Ua(e,t,s),e=e.sibling}function $a(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for($a(e,t,s),e=e.sibling;e!==null;)$a(e,t,s),e=e.sibling}var Ke=null,Rt=!1;function dr(e,t,s){for(s=s.child;s!==null;)Cd(e,t,s),s=s.sibling}function Cd(e,t,s){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Is,s)}catch{}switch(s.tag){case 5:et||pn(s,t);case 6:var a=Ke,h=Rt;Ke=null,dr(e,t,s),Ke=a,Rt=h,Ke!==null&&(Rt?(e=Ke,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Ke.removeChild(s.stateNode));break;case 18:Ke!==null&&(Rt?(e=Ke,s=s.stateNode,e.nodeType===8?Qo(e.parentNode,s):e.nodeType===1&&Qo(e,s),Wn(e)):Qo(Ke,s.stateNode));break;case 4:a=Ke,h=Rt,Ke=s.stateNode.containerInfo,Rt=!0,dr(e,t,s),Ke=a,Rt=h;break;case 0:case 11:case 14:case 15:if(!et&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){h=a=a.next;do{var f=h,y=f.destroy;f=f.tag,y!==void 0&&((f&2)!==0||(f&4)!==0)&&Ia(s,t,y),h=h.next}while(h!==a)}dr(e,t,s);break;case 1:if(!et&&(pn(s,t),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(b){Ae(s,t,b)}dr(e,t,s);break;case 21:dr(e,t,s);break;case 22:s.mode&1?(et=(a=et)||s.memoizedState!==null,dr(e,t,s),et=a):dr(e,t,s);break;default:dr(e,t,s)}}function Td(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Am),t.forEach(function(a){var h=Vm.bind(null,e,a);s.has(a)||(s.add(a),a.then(h,h))})}}function At(e,t){var s=t.deletions;if(s!==null)for(var a=0;a<s.length;a++){var h=s[a];try{var f=e,y=t,b=y;e:for(;b!==null;){switch(b.tag){case 5:Ke=b.stateNode,Rt=!1;break e;case 3:Ke=b.stateNode.containerInfo,Rt=!0;break e;case 4:Ke=b.stateNode.containerInfo,Rt=!0;break e}b=b.return}if(Ke===null)throw Error(n(160));Cd(f,y,h),Ke=null,Rt=!1;var k=h.alternate;k!==null&&(k.return=null),h.return=null}catch(I){Ae(h,t,I)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Pd(t,e),t=t.sibling}function Pd(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(At(t,e),Ft(e),a&4){try{hs(3,e,e.return),_i(3,e)}catch(Q){Ae(e,e.return,Q)}try{hs(5,e,e.return)}catch(Q){Ae(e,e.return,Q)}}break;case 1:At(t,e),Ft(e),a&512&&s!==null&&pn(s,s.return);break;case 5:if(At(t,e),Ft(e),a&512&&s!==null&&pn(s,s.return),e.flags&32){var h=e.stateNode;try{An(h,"")}catch(Q){Ae(e,e.return,Q)}}if(a&4&&(h=e.stateNode,h!=null)){var f=e.memoizedProps,y=s!==null?s.memoizedProps:f,b=e.type,k=e.updateQueue;if(e.updateQueue=null,k!==null)try{b==="input"&&f.type==="radio"&&f.name!=null&&su(h,f),po(b,y);var I=po(b,f);for(y=0;y<k.length;y+=2){var M=k[y],z=k[y+1];M==="style"?hu(h,z):M==="dangerouslySetInnerHTML"?cu(h,z):M==="children"?An(h,z):R(h,M,z,I)}switch(b){case"input":lo(h,f);break;case"textarea":au(h,f);break;case"select":var $=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!f.multiple;var q=f.value;q!=null?Hr(h,!!f.multiple,q,!1):$!==!!f.multiple&&(f.defaultValue!=null?Hr(h,!!f.multiple,f.defaultValue,!0):Hr(h,!!f.multiple,f.multiple?[]:"",!1))}h[ts]=f}catch(Q){Ae(e,e.return,Q)}}break;case 6:if(At(t,e),Ft(e),a&4){if(e.stateNode===null)throw Error(n(162));h=e.stateNode,f=e.memoizedProps;try{h.nodeValue=f}catch(Q){Ae(e,e.return,Q)}}break;case 3:if(At(t,e),Ft(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{Wn(t.containerInfo)}catch(Q){Ae(e,e.return,Q)}break;case 4:At(t,e),Ft(e);break;case 13:At(t,e),Ft(e),h=e.child,h.flags&8192&&(f=h.memoizedState!==null,h.stateNode.isHidden=f,!f||h.alternate!==null&&h.alternate.memoizedState!==null||(za=Le())),a&4&&Td(e);break;case 22:if(M=s!==null&&s.memoizedState!==null,e.mode&1?(et=(I=et)||M,At(t,e),et=I):At(t,e),Ft(e),a&8192){if(I=e.memoizedState!==null,(e.stateNode.isHidden=I)&&!M&&(e.mode&1)!==0)for(H=e,M=e.child;M!==null;){for(z=H=M;H!==null;){switch($=H,q=$.child,$.tag){case 0:case 11:case 14:case 15:hs(4,$,$.return);break;case 1:pn($,$.return);var G=$.stateNode;if(typeof G.componentWillUnmount=="function"){a=$,s=$.return;try{t=a,G.props=t.memoizedProps,G.state=t.memoizedState,G.componentWillUnmount()}catch(Q){Ae(a,s,Q)}}break;case 5:pn($,$.return);break;case 22:if($.memoizedState!==null){Ad(z);continue}}q!==null?(q.return=$,H=q):Ad(z)}M=M.sibling}e:for(M=null,z=e;;){if(z.tag===5){if(M===null){M=z;try{h=z.stateNode,I?(f=h.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(b=z.stateNode,k=z.memoizedProps.style,y=k!=null&&k.hasOwnProperty("display")?k.display:null,b.style.display=du("display",y))}catch(Q){Ae(e,e.return,Q)}}}else if(z.tag===6){if(M===null)try{z.stateNode.nodeValue=I?"":z.memoizedProps}catch(Q){Ae(e,e.return,Q)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===e)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===e)break e;for(;z.sibling===null;){if(z.return===null||z.return===e)break e;M===z&&(M=null),z=z.return}M===z&&(M=null),z.sibling.return=z.return,z=z.sibling}}break;case 19:At(t,e),Ft(e),a&4&&Td(e);break;case 21:break;default:At(t,e),Ft(e)}}function Ft(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Ed(s)){var a=s;break e}s=s.return}throw Error(n(160))}switch(a.tag){case 5:var h=a.stateNode;a.flags&32&&(An(h,""),a.flags&=-33);var f=Nd(e);$a(e,f,h);break;case 3:case 4:var y=a.stateNode.containerInfo,b=Nd(e);Ua(e,b,y);break;default:throw Error(n(161))}}catch(k){Ae(e,e.return,k)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Lm(e,t,s){H=e,Od(e)}function Od(e,t,s){for(var a=(e.mode&1)!==0;H!==null;){var h=H,f=h.child;if(h.tag===22&&a){var y=h.memoizedState!==null||xi;if(!y){var b=h.alternate,k=b!==null&&b.memoizedState!==null||et;b=xi;var I=et;if(xi=y,(et=k)&&!I)for(H=h;H!==null;)y=H,k=y.child,y.tag===22&&y.memoizedState!==null?Id(h):k!==null?(k.return=y,H=k):Id(h);for(;f!==null;)H=f,Od(f),f=f.sibling;H=h,xi=b,et=I}Rd(e)}else(h.subtreeFlags&8772)!==0&&f!==null?(f.return=h,H=f):Rd(e)}}function Rd(e){for(;H!==null;){var t=H;if((t.flags&8772)!==0){var s=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:et||_i(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!et)if(s===null)a.componentDidMount();else{var h=t.elementType===t.type?s.memoizedProps:Ot(t.type,s.memoizedProps);a.componentDidUpdate(h,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Ac(t,f,a);break;case 3:var y=t.updateQueue;if(y!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Ac(t,y,s)}break;case 5:var b=t.stateNode;if(s===null&&t.flags&4){s=b;var k=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&s.focus();break;case"img":k.src&&(s.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var I=t.alternate;if(I!==null){var M=I.memoizedState;if(M!==null){var z=M.dehydrated;z!==null&&Wn(z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}et||t.flags&512&&La(t)}catch($){Ae(t,t.return,$)}}if(t===e){H=null;break}if(s=t.sibling,s!==null){s.return=t.return,H=s;break}H=t.return}}function Ad(e){for(;H!==null;){var t=H;if(t===e){H=null;break}var s=t.sibling;if(s!==null){s.return=t.return,H=s;break}H=t.return}}function Id(e){for(;H!==null;){var t=H;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{_i(4,t)}catch(k){Ae(t,s,k)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var h=t.return;try{a.componentDidMount()}catch(k){Ae(t,h,k)}}var f=t.return;try{La(t)}catch(k){Ae(t,f,k)}break;case 5:var y=t.return;try{La(t)}catch(k){Ae(t,y,k)}}}catch(k){Ae(t,t.return,k)}if(t===e){H=null;break}var b=t.sibling;if(b!==null){b.return=t.return,H=b;break}H=t.return}}var Um=Math.ceil,bi=U.ReactCurrentDispatcher,Da=U.ReactCurrentOwner,St=U.ReactCurrentBatchConfig,pe=0,qe=null,Me=null,Ge=0,mt=0,mn=or(0),Fe=0,fs=null,Ir=0,ji=0,Ma=0,ps=null,lt=null,za=0,gn=1/0,Qt=null,Si=!1,Ba=null,hr=null,ki=!1,fr=null,Ei=0,ms=0,Fa=null,Ni=-1,Ci=0;function st(){return(pe&6)!==0?Le():Ni!==-1?Ni:Ni=Le()}function pr(e){return(e.mode&1)===0?1:(pe&2)!==0&&Ge!==0?Ge&-Ge:wm.transition!==null?(Ci===0&&(Ci=Nu()),Ci):(e=xe,e!==0||(e=window.event,e=e===void 0?16:Uu(e.type)),e)}function It(e,t,s,a){if(50<ms)throw ms=0,Fa=null,Error(n(185));Mn(e,s,a),((pe&2)===0||e!==qe)&&(e===qe&&((pe&2)===0&&(ji|=s),Fe===4&&mr(e,Ge)),ut(e,a),s===1&&pe===0&&(t.mode&1)===0&&(gn=Le()+500,ri&&lr()))}function ut(e,t){var s=e.callbackNode;wp(e,t);var a=$s(e,e===qe?Ge:0);if(a===0)s!==null&&Su(s),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(s!=null&&Su(s),t===1)e.tag===0?vm(Ud.bind(null,e)):_c(Ud.bind(null,e)),pm(function(){(pe&6)===0&&lr()}),s=null;else{switch(Cu(a)){case 1:s=_o;break;case 4:s=ku;break;case 16:s=As;break;case 536870912:s=Eu;break;default:s=As}s=Wd(s,Ld.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Ld(e,t){if(Ni=-1,Ci=0,(pe&6)!==0)throw Error(n(327));var s=e.callbackNode;if(yn()&&e.callbackNode!==s)return null;var a=$s(e,e===qe?Ge:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=Ti(e,a);else{t=a;var h=pe;pe|=2;var f=Dd();(qe!==e||Ge!==t)&&(Qt=null,gn=Le()+500,Ur(e,t));do try{Mm();break}catch(b){$d(e,b)}while(!0);oa(),bi.current=f,pe=h,Me!==null?t=0:(qe=null,Ge=0,t=Fe)}if(t!==0){if(t===2&&(h=bo(e),h!==0&&(a=h,t=Va(e,h))),t===1)throw s=fs,Ur(e,0),mr(e,a),ut(e,Le()),s;if(t===6)mr(e,a);else{if(h=e.current.alternate,(a&30)===0&&!$m(h)&&(t=Ti(e,a),t===2&&(f=bo(e),f!==0&&(a=f,t=Va(e,f))),t===1))throw s=fs,Ur(e,0),mr(e,a),ut(e,Le()),s;switch(e.finishedWork=h,e.finishedLanes=a,t){case 0:case 1:throw Error(n(345));case 2:$r(e,lt,Qt);break;case 3:if(mr(e,a),(a&130023424)===a&&(t=za+500-Le(),10<t)){if($s(e,0)!==0)break;if(h=e.suspendedLanes,(h&a)!==a){st(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=Jo($r.bind(null,e,lt,Qt),t);break}$r(e,lt,Qt);break;case 4:if(mr(e,a),(a&4194240)===a)break;for(t=e.eventTimes,h=-1;0<a;){var y=31-Ct(a);f=1<<y,y=t[y],y>h&&(h=y),a&=~f}if(a=h,a=Le()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Um(a/1960))-a,10<a){e.timeoutHandle=Jo($r.bind(null,e,lt,Qt),a);break}$r(e,lt,Qt);break;case 5:$r(e,lt,Qt);break;default:throw Error(n(329))}}}return ut(e,Le()),e.callbackNode===s?Ld.bind(null,e):null}function Va(e,t){var s=ps;return e.current.memoizedState.isDehydrated&&(Ur(e,t).flags|=256),e=Ti(e,t),e!==2&&(t=lt,lt=s,t!==null&&Wa(t)),e}function Wa(e){lt===null?lt=e:lt.push.apply(lt,e)}function $m(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var h=s[a],f=h.getSnapshot;h=h.value;try{if(!Tt(f(),h))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function mr(e,t){for(t&=~Ma,t&=~ji,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Ct(t),a=1<<s;e[s]=-1,t&=~a}}function Ud(e){if((pe&6)!==0)throw Error(n(327));yn();var t=$s(e,0);if((t&1)===0)return ut(e,Le()),null;var s=Ti(e,t);if(e.tag!==0&&s===2){var a=bo(e);a!==0&&(t=a,s=Va(e,a))}if(s===1)throw s=fs,Ur(e,0),mr(e,t),ut(e,Le()),s;if(s===6)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$r(e,lt,Qt),ut(e,Le()),null}function qa(e,t){var s=pe;pe|=1;try{return e(t)}finally{pe=s,pe===0&&(gn=Le()+500,ri&&lr())}}function Lr(e){fr!==null&&fr.tag===0&&(pe&6)===0&&yn();var t=pe;pe|=1;var s=St.transition,a=xe;try{if(St.transition=null,xe=1,e)return e()}finally{xe=a,St.transition=s,pe=t,(pe&6)===0&&lr()}}function Ha(){mt=mn.current,Ne(mn)}function Ur(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,fm(s)),Me!==null)for(s=Me.return;s!==null;){var a=s;switch(ta(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&ei();break;case 3:hn(),Ne(it),Ne(Ye),pa();break;case 5:ha(a);break;case 4:hn();break;case 13:Ne(Pe);break;case 19:Ne(Pe);break;case 10:aa(a.type._context);break;case 22:case 23:Ha()}s=s.return}if(qe=e,Me=e=gr(e.current,null),Ge=mt=t,Fe=0,fs=null,Ma=ji=Ir=0,lt=ps=null,Or!==null){for(t=0;t<Or.length;t++)if(s=Or[t],a=s.interleaved,a!==null){s.interleaved=null;var h=a.next,f=s.pending;if(f!==null){var y=f.next;f.next=h,a.next=y}s.pending=a}Or=null}return e}function $d(e,t){do{var s=Me;try{if(oa(),hi.current=gi,fi){for(var a=Oe.memoizedState;a!==null;){var h=a.queue;h!==null&&(h.pending=null),a=a.next}fi=!1}if(Ar=0,We=Be=Oe=null,as=!1,ls=0,Da.current=null,s===null||s.return===null){Fe=1,fs=t,Me=null;break}e:{var f=e,y=s.return,b=s,k=t;if(t=Ge,b.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var I=k,M=b,z=M.tag;if((M.mode&1)===0&&(z===0||z===11||z===15)){var $=M.alternate;$?(M.updateQueue=$.updateQueue,M.memoizedState=$.memoizedState,M.lanes=$.lanes):(M.updateQueue=null,M.memoizedState=null)}var q=ld(y);if(q!==null){q.flags&=-257,ud(q,y,b,f,t),q.mode&1&&ad(f,I,t),t=q,k=I;var G=t.updateQueue;if(G===null){var Q=new Set;Q.add(k),t.updateQueue=Q}else G.add(k);break e}else{if((t&1)===0){ad(f,I,t),Ka();break e}k=Error(n(426))}}else if(Te&&b.mode&1){var Ue=ld(y);if(Ue!==null){(Ue.flags&65536)===0&&(Ue.flags|=256),ud(Ue,y,b,f,t),sa(fn(k,b));break e}}f=k=fn(k,b),Fe!==4&&(Fe=2),ps===null?ps=[f]:ps.push(f),f=y;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var P=id(f,k,t);Rc(f,P);break e;case 1:b=k;var N=f.type,A=f.stateNode;if((f.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(hr===null||!hr.has(A)))){f.flags|=65536,t&=-t,f.lanes|=t;var B=od(f,b,t);Rc(f,B);break e}}f=f.return}while(f!==null)}zd(s)}catch(Y){t=Y,Me===s&&s!==null&&(Me=s=s.return);continue}break}while(!0)}function Dd(){var e=bi.current;return bi.current=gi,e===null?gi:e}function Ka(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),qe===null||(Ir&268435455)===0&&(ji&268435455)===0||mr(qe,Ge)}function Ti(e,t){var s=pe;pe|=2;var a=Dd();(qe!==e||Ge!==t)&&(Qt=null,Ur(e,t));do try{Dm();break}catch(h){$d(e,h)}while(!0);if(oa(),pe=s,bi.current=a,Me!==null)throw Error(n(261));return qe=null,Ge=0,Fe}function Dm(){for(;Me!==null;)Md(Me)}function Mm(){for(;Me!==null&&!cp();)Md(Me)}function Md(e){var t=Vd(e.alternate,e,mt);e.memoizedProps=e.pendingProps,t===null?zd(e):Me=t,Da.current=null}function zd(e){var t=e;do{var s=t.alternate;if(e=t.return,(t.flags&32768)===0){if(s=Om(s,t,mt),s!==null){Me=s;return}}else{if(s=Rm(s,t),s!==null){s.flags&=32767,Me=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fe=6,Me=null;return}}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);Fe===0&&(Fe=5)}function $r(e,t,s){var a=xe,h=St.transition;try{St.transition=null,xe=1,zm(e,t,s,a)}finally{St.transition=h,xe=a}return null}function zm(e,t,s,a){do yn();while(fr!==null);if((pe&6)!==0)throw Error(n(327));s=e.finishedWork;var h=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var f=s.lanes|s.childLanes;if(xp(e,f),e===qe&&(Me=qe=null,Ge=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||ki||(ki=!0,Wd(As,function(){return yn(),null})),f=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||f){f=St.transition,St.transition=null;var y=xe;xe=1;var b=pe;pe|=4,Da.current=null,Im(e,s),Pd(s,e),om(Ko),zs=!!Ho,Ko=Ho=null,e.current=s,Lm(s),dp(),pe=b,xe=y,St.transition=f}else e.current=s;if(ki&&(ki=!1,fr=e,Ei=h),f=e.pendingLanes,f===0&&(hr=null),pp(s.stateNode),ut(e,Le()),t!==null)for(a=e.onRecoverableError,s=0;s<t.length;s++)h=t[s],a(h.value,{componentStack:h.stack,digest:h.digest});if(Si)throw Si=!1,e=Ba,Ba=null,e;return(Ei&1)!==0&&e.tag!==0&&yn(),f=e.pendingLanes,(f&1)!==0?e===Fa?ms++:(ms=0,Fa=e):ms=0,lr(),null}function yn(){if(fr!==null){var e=Cu(Ei),t=St.transition,s=xe;try{if(St.transition=null,xe=16>e?16:e,fr===null)var a=!1;else{if(e=fr,fr=null,Ei=0,(pe&6)!==0)throw Error(n(331));var h=pe;for(pe|=4,H=e.current;H!==null;){var f=H,y=f.child;if((H.flags&16)!==0){var b=f.deletions;if(b!==null){for(var k=0;k<b.length;k++){var I=b[k];for(H=I;H!==null;){var M=H;switch(M.tag){case 0:case 11:case 15:hs(8,M,f)}var z=M.child;if(z!==null)z.return=M,H=z;else for(;H!==null;){M=H;var $=M.sibling,q=M.return;if(kd(M),M===I){H=null;break}if($!==null){$.return=q,H=$;break}H=q}}}var G=f.alternate;if(G!==null){var Q=G.child;if(Q!==null){G.child=null;do{var Ue=Q.sibling;Q.sibling=null,Q=Ue}while(Q!==null)}}H=f}}if((f.subtreeFlags&2064)!==0&&y!==null)y.return=f,H=y;else e:for(;H!==null;){if(f=H,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:hs(9,f,f.return)}var P=f.sibling;if(P!==null){P.return=f.return,H=P;break e}H=f.return}}var N=e.current;for(H=N;H!==null;){y=H;var A=y.child;if((y.subtreeFlags&2064)!==0&&A!==null)A.return=y,H=A;else e:for(y=N;H!==null;){if(b=H,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:_i(9,b)}}catch(Y){Ae(b,b.return,Y)}if(b===y){H=null;break e}var B=b.sibling;if(B!==null){B.return=b.return,H=B;break e}H=b.return}}if(pe=h,lr(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Is,e)}catch{}a=!0}return a}finally{xe=s,St.transition=t}}return!1}function Bd(e,t,s){t=fn(s,t),t=id(e,t,1),e=cr(e,t,1),t=st(),e!==null&&(Mn(e,1,t),ut(e,t))}function Ae(e,t,s){if(e.tag===3)Bd(e,e,s);else for(;t!==null;){if(t.tag===3){Bd(t,e,s);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(hr===null||!hr.has(a))){e=fn(s,e),e=od(t,e,1),t=cr(t,e,1),e=st(),t!==null&&(Mn(t,1,e),ut(t,e));break}}t=t.return}}function Bm(e,t,s){var a=e.pingCache;a!==null&&a.delete(t),t=st(),e.pingedLanes|=e.suspendedLanes&s,qe===e&&(Ge&s)===s&&(Fe===4||Fe===3&&(Ge&130023424)===Ge&&500>Le()-za?Ur(e,0):Ma|=s),ut(e,t)}function Fd(e,t){t===0&&((e.mode&1)===0?t=1:(t=Us,Us<<=1,(Us&130023424)===0&&(Us=4194304)));var s=st();e=Kt(e,t),e!==null&&(Mn(e,t,s),ut(e,s))}function Fm(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Fd(e,s)}function Vm(e,t){var s=0;switch(e.tag){case 13:var a=e.stateNode,h=e.memoizedState;h!==null&&(s=h.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(n(314))}a!==null&&a.delete(t),Fd(e,s)}var Vd;Vd=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||it.current)at=!0;else{if((e.lanes&s)===0&&(t.flags&128)===0)return at=!1,Pm(e,t,s);at=(e.flags&131072)!==0}else at=!1,Te&&(t.flags&1048576)!==0&&bc(t,si,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;wi(e,t),e=t.pendingProps;var h=sn(t,Ye.current);dn(t,s),h=ya(null,t,a,e,h,s);var f=va();return t.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ot(a)?(f=!0,ti(t)):f=!1,t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,ca(t),h.updater=yi,t.stateNode=h,h._reactInternals=t,Sa(t,a,e,s),t=Ca(null,t,a,!0,f,s)):(t.tag=0,Te&&f&&ea(t),nt(null,t,h,s),t=t.child),t;case 16:a=t.elementType;e:{switch(wi(e,t),e=t.pendingProps,h=a._init,a=h(a._payload),t.type=a,h=t.tag=qm(a),e=Ot(a,e),h){case 0:t=Na(null,t,a,e,s);break e;case 1:t=md(null,t,a,e,s);break e;case 11:t=cd(null,t,a,e,s);break e;case 14:t=dd(null,t,a,Ot(a.type,e),s);break e}throw Error(n(306,a,""))}return t;case 0:return a=t.type,h=t.pendingProps,h=t.elementType===a?h:Ot(a,h),Na(e,t,a,h,s);case 1:return a=t.type,h=t.pendingProps,h=t.elementType===a?h:Ot(a,h),md(e,t,a,h,s);case 3:e:{if(gd(t),e===null)throw Error(n(387));a=t.pendingProps,f=t.memoizedState,h=f.element,Oc(e,t),ci(t,a,null,s);var y=t.memoizedState;if(a=y.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){h=fn(Error(n(423)),t),t=yd(e,t,a,s,h);break e}else if(a!==h){h=fn(Error(n(424)),t),t=yd(e,t,a,s,h);break e}else for(pt=ir(t.stateNode.containerInfo.firstChild),ft=t,Te=!0,Pt=null,s=Tc(t,null,a,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ln(),a===h){t=Jt(e,t,s);break e}nt(e,t,a,s)}t=t.child}return t;case 5:return Ic(t),e===null&&na(t),a=t.type,h=t.pendingProps,f=e!==null?e.memoizedProps:null,y=h.children,Go(a,h)?y=null:f!==null&&Go(a,f)&&(t.flags|=32),pd(e,t),nt(e,t,y,s),t.child;case 6:return e===null&&na(t),null;case 13:return vd(e,t,s);case 4:return da(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=un(t,null,a,s):nt(e,t,a,s),t.child;case 11:return a=t.type,h=t.pendingProps,h=t.elementType===a?h:Ot(a,h),cd(e,t,a,h,s);case 7:return nt(e,t,t.pendingProps,s),t.child;case 8:return nt(e,t,t.pendingProps.children,s),t.child;case 12:return nt(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(a=t.type._context,h=t.pendingProps,f=t.memoizedProps,y=h.value,Se(ai,a._currentValue),a._currentValue=y,f!==null)if(Tt(f.value,y)){if(f.children===h.children&&!it.current){t=Jt(e,t,s);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var b=f.dependencies;if(b!==null){y=f.child;for(var k=b.firstContext;k!==null;){if(k.context===a){if(f.tag===1){k=Gt(-1,s&-s),k.tag=2;var I=f.updateQueue;if(I!==null){I=I.shared;var M=I.pending;M===null?k.next=k:(k.next=M.next,M.next=k),I.pending=k}}f.lanes|=s,k=f.alternate,k!==null&&(k.lanes|=s),la(f.return,s,t),b.lanes|=s;break}k=k.next}}else if(f.tag===10)y=f.type===t.type?null:f.child;else if(f.tag===18){if(y=f.return,y===null)throw Error(n(341));y.lanes|=s,b=y.alternate,b!==null&&(b.lanes|=s),la(y,s,t),y=f.sibling}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===t){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}nt(e,t,h.children,s),t=t.child}return t;case 9:return h=t.type,a=t.pendingProps.children,dn(t,s),h=bt(h),a=a(h),t.flags|=1,nt(e,t,a,s),t.child;case 14:return a=t.type,h=Ot(a,t.pendingProps),h=Ot(a.type,h),dd(e,t,a,h,s);case 15:return hd(e,t,t.type,t.pendingProps,s);case 17:return a=t.type,h=t.pendingProps,h=t.elementType===a?h:Ot(a,h),wi(e,t),t.tag=1,ot(a)?(e=!0,ti(t)):e=!1,dn(t,s),nd(t,a,h),Sa(t,a,h,s),Ca(null,t,a,!0,e,s);case 19:return xd(e,t,s);case 22:return fd(e,t,s)}throw Error(n(156,t.tag))};function Wd(e,t){return ju(e,t)}function Wm(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,t,s,a){return new Wm(e,t,s,a)}function Ga(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qm(e){if(typeof e=="function")return Ga(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ae)return 11;if(e===De)return 14}return 2}function gr(e,t){var s=e.alternate;return s===null?(s=kt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Pi(e,t,s,a,h,f){var y=2;if(a=e,typeof e=="function")Ga(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case Z:return Dr(s.children,h,f,t);case se:y=8,h|=8;break;case J:return e=kt(12,s,t,h|2),e.elementType=J,e.lanes=f,e;case ue:return e=kt(13,s,t,h),e.elementType=ue,e.lanes=f,e;case _e:return e=kt(19,s,t,h),e.elementType=_e,e.lanes=f,e;case be:return Oi(s,h,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fe:y=10;break e;case rt:y=9;break e;case ae:y=11;break e;case De:y=14;break e;case Ie:y=16,a=null;break e}throw Error(n(130,e==null?e:typeof e,""))}return t=kt(y,s,t,h),t.elementType=e,t.type=a,t.lanes=f,t}function Dr(e,t,s,a){return e=kt(7,e,a,t),e.lanes=s,e}function Oi(e,t,s,a){return e=kt(22,e,a,t),e.elementType=be,e.lanes=s,e.stateNode={isHidden:!1},e}function Ja(e,t,s){return e=kt(6,e,null,t),e.lanes=s,e}function Qa(e,t,s){return t=kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hm(e,t,s,a,h){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jo(0),this.expirationTimes=jo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jo(0),this.identifierPrefix=a,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Ya(e,t,s,a,h,f,y,b,k){return e=new Hm(e,t,s,b,k),t===1?(t=1,f===!0&&(t|=8)):t=0,f=kt(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ca(f),e}function Km(e,t,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:a==null?null:""+a,children:e,containerInfo:t,implementation:s}}function qd(e){if(!e)return ar;e=e._reactInternals;e:{if(Er(e)!==e||e.tag!==1)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ot(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(n(171))}if(e.tag===1){var s=e.type;if(ot(s))return wc(e,s,t)}return t}function Hd(e,t,s,a,h,f,y,b,k){return e=Ya(s,a,!0,e,h,f,y,b,k),e.context=qd(null),s=e.current,a=st(),h=pr(s),f=Gt(a,h),f.callback=t??null,cr(s,f,h),e.current.lanes=h,Mn(e,h,a),ut(e,a),e}function Ri(e,t,s,a){var h=t.current,f=st(),y=pr(h);return s=qd(s),t.context===null?t.context=s:t.pendingContext=s,t=Gt(f,y),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=cr(h,t,y),e!==null&&(It(e,h,y,f),ui(e,h,y)),y}function Ai(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Kd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Xa(e,t){Kd(e,t),(e=e.alternate)&&Kd(e,t)}function Gm(){return null}var Gd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Za(e){this._internalRoot=e}Ii.prototype.render=Za.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(n(409));Ri(e,t,null,null)},Ii.prototype.unmount=Za.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Lr(function(){Ri(null,e,null,null)}),t[Vt]=null}};function Ii(e){this._internalRoot=e}Ii.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ou();e={blockedOn:null,target:e,priority:t};for(var s=0;s<rr.length&&t!==0&&t<rr[s].priority;s++);rr.splice(s,0,e),s===0&&Iu(e)}};function el(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Li(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jd(){}function Jm(e,t,s,a,h){if(h){if(typeof a=="function"){var f=a;a=function(){var I=Ai(y);f.call(I)}}var y=Hd(t,a,e,0,null,!1,!1,"",Jd);return e._reactRootContainer=y,e[Vt]=y.current,Zn(e.nodeType===8?e.parentNode:e),Lr(),y}for(;h=e.lastChild;)e.removeChild(h);if(typeof a=="function"){var b=a;a=function(){var I=Ai(k);b.call(I)}}var k=Ya(e,0,!1,null,null,!1,!1,"",Jd);return e._reactRootContainer=k,e[Vt]=k.current,Zn(e.nodeType===8?e.parentNode:e),Lr(function(){Ri(t,k,s,a)}),k}function Ui(e,t,s,a,h){var f=s._reactRootContainer;if(f){var y=f;if(typeof h=="function"){var b=h;h=function(){var k=Ai(y);b.call(k)}}Ri(t,y,e,h)}else y=Jm(s,t,e,h,a);return Ai(y)}Tu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Dn(t.pendingLanes);s!==0&&(So(t,s|1),ut(t,Le()),(pe&6)===0&&(gn=Le()+500,lr()))}break;case 13:Lr(function(){var a=Kt(e,1);if(a!==null){var h=st();It(a,e,1,h)}}),Xa(e,1)}},ko=function(e){if(e.tag===13){var t=Kt(e,134217728);if(t!==null){var s=st();It(t,e,134217728,s)}Xa(e,134217728)}},Pu=function(e){if(e.tag===13){var t=pr(e),s=Kt(e,t);if(s!==null){var a=st();It(s,e,t,a)}Xa(e,t)}},Ou=function(){return xe},Ru=function(e,t){var s=xe;try{return xe=e,t()}finally{xe=s}},yo=function(e,t,s){switch(t){case"input":if(lo(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var h=Zs(a);if(!h)throw Error(n(90));ru(a),lo(a,h)}}}break;case"textarea":au(e,s);break;case"select":t=s.value,t!=null&&Hr(e,!!s.multiple,t,!1)}},gu=qa,yu=Lr;var Qm={usingClientEntryPoint:!1,Events:[rs,rn,Zs,pu,mu,qa]},gs={findFiberByHostInstance:Nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ym={bundleType:gs.bundleType,version:gs.version,rendererPackageName:gs.rendererPackageName,rendererConfig:gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_u(e),e===null?null:e.stateNode},findFiberByHostInstance:gs.findFiberByHostInstance||Gm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$i.isDisabled&&$i.supportsFiber)try{Is=$i.inject(Ym),Dt=$i}catch{}}return ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qm,ct.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!el(t))throw Error(n(200));return Km(e,t,null,s)},ct.createRoot=function(e,t){if(!el(e))throw Error(n(299));var s=!1,a="",h=Gd;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=Ya(e,1,!1,null,null,s,!1,a,h),e[Vt]=t.current,Zn(e.nodeType===8?e.parentNode:e),new Za(t)},ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=_u(t),e=e===null?null:e.stateNode,e},ct.flushSync=function(e){return Lr(e)},ct.hydrate=function(e,t,s){if(!Li(t))throw Error(n(200));return Ui(null,e,t,!0,s)},ct.hydrateRoot=function(e,t,s){if(!el(e))throw Error(n(405));var a=s!=null&&s.hydratedSources||null,h=!1,f="",y=Gd;if(s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(y=s.onRecoverableError)),t=Hd(t,null,e,1,s??null,h,!1,f,y),e[Vt]=t.current,Zn(e),a)for(e=0;e<a.length;e++)s=a[e],h=s._getVersion,h=h(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,h]:t.mutableSourceEagerHydrationData.push(s,h);return new Ii(t)},ct.render=function(e,t,s){if(!Li(t))throw Error(n(200));return Ui(null,e,t,!1,s)},ct.unmountComponentAtNode=function(e){if(!Li(e))throw Error(n(40));return e._reactRootContainer?(Lr(function(){Ui(null,null,e,!1,function(){e._reactRootContainer=null,e[Vt]=null})}),!0):!1},ct.unstable_batchedUpdates=qa,ct.unstable_renderSubtreeIntoContainer=function(e,t,s,a){if(!Li(s))throw Error(n(200));if(e==null||e._reactInternals===void 0)throw Error(n(38));return Ui(e,t,s,!1,a)},ct.version="18.3.1-next-f1338f8080-20240426",ct}var nh;function Kh(){if(nh)return nl.exports;nh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(r){console.error(r)}}return i(),nl.exports=og(),nl.exports}var sh;function ag(){if(sh)return Di;sh=1;var i=Kh();return Di.createRoot=i.createRoot,Di.hydrateRoot=i.hydrateRoot,Di}var lg=ag();const ug=$l(lg);Kh();function _s(){return _s=Object.assign?Object.assign.bind():function(i){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])}return i},_s.apply(this,arguments)}var _r;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(_r||(_r={}));const ih="popstate";function cg(i){i===void 0&&(i={});function r(o,l){let{pathname:u,search:d,hash:p}=o.location;return vl("",{pathname:u,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(o,l){return typeof l=="string"?l:Ji(l)}return hg(r,n,null,i)}function $e(i,r){if(i===!1||i===null||typeof i>"u")throw new Error(r)}function Ml(i,r){if(!i){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function dg(){return Math.random().toString(36).substr(2,8)}function oh(i,r){return{usr:i.state,key:i.key,idx:r}}function vl(i,r,n,o){return n===void 0&&(n=null),_s({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof r=="string"?Nn(r):r,{state:n,key:r&&r.key||o||dg()})}function Ji(i){let{pathname:r="/",search:n="",hash:o=""}=i;return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),o&&o!=="#"&&(r+=o.charAt(0)==="#"?o:"#"+o),r}function Nn(i){let r={};if(i){let n=i.indexOf("#");n>=0&&(r.hash=i.substr(n),i=i.substr(0,n));let o=i.indexOf("?");o>=0&&(r.search=i.substr(o),i=i.substr(0,o)),i&&(r.pathname=i)}return r}function hg(i,r,n,o){o===void 0&&(o={});let{window:l=document.defaultView,v5Compat:u=!1}=o,d=l.history,p=_r.Pop,m=null,g=x();g==null&&(g=0,d.replaceState(_s({},d.state,{idx:g}),""));function x(){return(d.state||{idx:null}).idx}function v(){p=_r.Pop;let w=x(),O=w==null?null:w-g;g=w,m&&m({action:p,location:j.location,delta:O})}function _(w,O){p=_r.Push;let L=vl(j.location,w,O);g=x()+1;let R=oh(L,g),U=j.createHref(L);try{d.pushState(R,"",U)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;l.location.assign(U)}u&&m&&m({action:p,location:j.location,delta:1})}function S(w,O){p=_r.Replace;let L=vl(j.location,w,O);g=x();let R=oh(L,g),U=j.createHref(L);d.replaceState(R,"",U),u&&m&&m({action:p,location:j.location,delta:0})}function E(w){let O=l.location.origin!=="null"?l.location.origin:l.location.href,L=typeof w=="string"?w:Ji(w);return L=L.replace(/ $/,"%20"),$e(O,"No window.location.(origin|href) available to create URL for href: "+L),new URL(L,O)}let j={get action(){return p},get location(){return i(l,d)},listen(w){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(ih,v),m=w,()=>{l.removeEventListener(ih,v),m=null}},createHref(w){return r(l,w)},createURL:E,encodeLocation(w){let O=E(w);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:_,replace:S,go(w){return d.go(w)}};return j}var ah;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(ah||(ah={}));function fg(i,r,n){return n===void 0&&(n="/"),pg(i,r,n)}function pg(i,r,n,o){let l=typeof r=="string"?Nn(r):r,u=zl(l.pathname||"/",n);if(u==null)return null;let d=Gh(i);mg(d);let p=null;for(let m=0;p==null&&m<d.length;++m){let g=Ng(u);p=Sg(d[m],g)}return p}function Gh(i,r,n,o){r===void 0&&(r=[]),n===void 0&&(n=[]),o===void 0&&(o="");let l=(u,d,p)=>{let m={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};m.relativePath.startsWith("/")&&($e(m.relativePath.startsWith(o),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(o.length));let g=br([o,m.relativePath]),x=n.concat(m);u.children&&u.children.length>0&&($e(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),Gh(u.children,r,x,g)),!(u.path==null&&!u.index)&&r.push({path:g,score:bg(g,u.index),routesMeta:x})};return i.forEach((u,d)=>{var p;if(u.path===""||!((p=u.path)!=null&&p.includes("?")))l(u,d);else for(let m of Jh(u.path))l(u,d,m)}),r}function Jh(i){let r=i.split("/");if(r.length===0)return[];let[n,...o]=r,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(o.length===0)return l?[u,""]:[u];let d=Jh(o.join("/")),p=[];return p.push(...d.map(m=>m===""?u:[u,m].join("/"))),l&&p.push(...d),p.map(m=>i.startsWith("/")&&m===""?"/":m)}function mg(i){i.sort((r,n)=>r.score!==n.score?n.score-r.score:jg(r.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}const gg=/^:[\w-]+$/,yg=3,vg=2,wg=1,xg=10,_g=-2,lh=i=>i==="*";function bg(i,r){let n=i.split("/"),o=n.length;return n.some(lh)&&(o+=_g),r&&(o+=vg),n.filter(l=>!lh(l)).reduce((l,u)=>l+(gg.test(u)?yg:u===""?wg:xg),o)}function jg(i,r){return i.length===r.length&&i.slice(0,-1).every((o,l)=>o===r[l])?i[i.length-1]-r[r.length-1]:0}function Sg(i,r,n){let{routesMeta:o}=i,l={},u="/",d=[];for(let p=0;p<o.length;++p){let m=o[p],g=p===o.length-1,x=u==="/"?r:r.slice(u.length)||"/",v=kg({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},x),_=m.route;if(!v)return null;Object.assign(l,v.params),d.push({params:l,pathname:br([u,v.pathname]),pathnameBase:Rg(br([u,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(u=br([u,v.pathnameBase]))}return d}function kg(i,r){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,o]=Eg(i.path,i.caseSensitive,i.end),l=r.match(n);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:o.reduce((g,x,v)=>{let{paramName:_,isOptional:S}=x;if(_==="*"){let j=p[v]||"";d=u.slice(0,u.length-j.length).replace(/(.)\/+$/,"$1")}const E=p[v];return S&&!E?g[_]=void 0:g[_]=(E||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:d,pattern:i}}function Eg(i,r,n){r===void 0&&(r=!1),n===void 0&&(n=!0),Ml(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let o=[],l="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,m)=>(o.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(o.push({paramName:"*"}),l+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":i!==""&&i!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,r?void 0:"i"),o]}function Ng(i){try{return i.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Ml(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),i}}function zl(i,r){if(r==="/")return i;if(!i.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,o=i.charAt(n);return o&&o!=="/"?null:i.slice(n)||"/"}const Cg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tg=i=>Cg.test(i);function Pg(i,r){r===void 0&&(r="/");let{pathname:n,search:o="",hash:l=""}=typeof i=="string"?Nn(i):i,u;if(n)if(Tg(n))u=n;else{if(n.includes("//")){let d=n;n=n.replace(/\/\/+/g,"/"),Ml(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+n))}n.startsWith("/")?u=uh(n.substring(1),"/"):u=uh(n,r)}else u=r;return{pathname:u,search:Ag(o),hash:Ig(l)}}function uh(i,r){let n=r.replace(/\/+$/,"").split("/");return i.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function ol(i,r,n,o){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Og(i){return i.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function Bl(i,r){let n=Og(i);return r?n.map((o,l)=>l===n.length-1?o.pathname:o.pathnameBase):n.map(o=>o.pathnameBase)}function Fl(i,r,n,o){o===void 0&&(o=!1);let l;typeof i=="string"?l=Nn(i):(l=_s({},i),$e(!l.pathname||!l.pathname.includes("?"),ol("?","pathname","search",l)),$e(!l.pathname||!l.pathname.includes("#"),ol("#","pathname","hash",l)),$e(!l.search||!l.search.includes("#"),ol("#","search","hash",l)));let u=i===""||l.pathname==="",d=u?"/":l.pathname,p;if(d==null)p=n;else{let v=r.length-1;if(!o&&d.startsWith("..")){let _=d.split("/");for(;_[0]==="..";)_.shift(),v-=1;l.pathname=_.join("/")}p=v>=0?r[v]:"/"}let m=Pg(l,p),g=d&&d!=="/"&&d.endsWith("/"),x=(u||d===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(g||x)&&(m.pathname+="/"),m}const br=i=>i.join("/").replace(/\/\/+/g,"/"),Rg=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Ag=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Ig=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Lg(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const Qh=["post","put","patch","delete"];new Set(Qh);const Ug=["get",...Qh];new Set(Ug);function bs(){return bs=Object.assign?Object.assign.bind():function(i){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])}return i},bs.apply(this,arguments)}const Vl=T.createContext(null),$g=T.createContext(null),Sr=T.createContext(null),so=T.createContext(null),Xt=T.createContext({outlet:null,matches:[],isDataRoute:!1}),Yh=T.createContext(null);function Dg(i,r){let{relative:n}=r===void 0?{}:r;Cn()||$e(!1);let{basename:o,navigator:l}=T.useContext(Sr),{hash:u,pathname:d,search:p}=ef(i,{relative:n}),m=d;return o!=="/"&&(m=d==="/"?o:br([o,d])),l.createHref({pathname:m,search:p,hash:u})}function Cn(){return T.useContext(so)!=null}function Tn(){return Cn()||$e(!1),T.useContext(so).location}function Xh(i){T.useContext(Sr).static||T.useLayoutEffect(i)}function Nt(){let{isDataRoute:i}=T.useContext(Xt);return i?Yg():Mg()}function Mg(){Cn()||$e(!1);let i=T.useContext(Vl),{basename:r,future:n,navigator:o}=T.useContext(Sr),{matches:l}=T.useContext(Xt),{pathname:u}=Tn(),d=JSON.stringify(Bl(l,n.v7_relativeSplatPath)),p=T.useRef(!1);return Xh(()=>{p.current=!0}),T.useCallback(function(g,x){if(x===void 0&&(x={}),!p.current)return;if(typeof g=="number"){o.go(g);return}let v=Fl(g,JSON.parse(d),u,x.relative==="path");i==null&&r!=="/"&&(v.pathname=v.pathname==="/"?r:br([r,v.pathname])),(x.replace?o.replace:o.push)(v,x.state,x)},[r,o,d,u,i])}function Zh(){let{matches:i}=T.useContext(Xt),r=i[i.length-1];return r?r.params:{}}function ef(i,r){let{relative:n}=r===void 0?{}:r,{future:o}=T.useContext(Sr),{matches:l}=T.useContext(Xt),{pathname:u}=Tn(),d=JSON.stringify(Bl(l,o.v7_relativeSplatPath));return T.useMemo(()=>Fl(i,JSON.parse(d),u,n==="path"),[i,d,u,n])}function zg(i,r){return Bg(i,r)}function Bg(i,r,n,o){Cn()||$e(!1);let{navigator:l}=T.useContext(Sr),{matches:u}=T.useContext(Xt),d=u[u.length-1],p=d?d.params:{};d&&d.pathname;let m=d?d.pathnameBase:"/";d&&d.route;let g=Tn(),x;if(r){var v;let w=typeof r=="string"?Nn(r):r;m==="/"||(v=w.pathname)!=null&&v.startsWith(m)||$e(!1),x=w}else x=g;let _=x.pathname||"/",S=_;if(m!=="/"){let w=m.replace(/^\//,"").split("/");S="/"+_.replace(/^\//,"").split("/").slice(w.length).join("/")}let E=fg(i,{pathname:S}),j=Hg(E&&E.map(w=>Object.assign({},w,{params:Object.assign({},p,w.params),pathname:br([m,l.encodeLocation?l.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?m:br([m,l.encodeLocation?l.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),u,n,o);return r&&j?T.createElement(so.Provider,{value:{location:bs({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:_r.Pop}},j):j}function Fg(){let i=Qg(),r=Lg(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},r),n?T.createElement("pre",{style:l},n):null,null)}const Vg=T.createElement(Fg,null);class Wg extends T.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){console.error("React Router caught the following error during render",r,n)}render(){return this.state.error!==void 0?T.createElement(Xt.Provider,{value:this.props.routeContext},T.createElement(Yh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qg(i){let{routeContext:r,match:n,children:o}=i,l=T.useContext(Vl);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(Xt.Provider,{value:r},o)}function Hg(i,r,n,o){var l;if(r===void 0&&(r=[]),n===void 0&&(n=null),o===void 0&&(o=null),i==null){var u;if(!n)return null;if(n.errors)i=n.matches;else if((u=o)!=null&&u.v7_partialHydration&&r.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let d=i,p=(l=n)==null?void 0:l.errors;if(p!=null){let x=d.findIndex(v=>v.route.id&&p?.[v.route.id]!==void 0);x>=0||$e(!1),d=d.slice(0,Math.min(d.length,x+1))}let m=!1,g=-1;if(n&&o&&o.v7_partialHydration)for(let x=0;x<d.length;x++){let v=d[x];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=x),v.route.id){let{loaderData:_,errors:S}=n,E=v.route.loader&&_[v.route.id]===void 0&&(!S||S[v.route.id]===void 0);if(v.route.lazy||E){m=!0,g>=0?d=d.slice(0,g+1):d=[d[0]];break}}}return d.reduceRight((x,v,_)=>{let S,E=!1,j=null,w=null;n&&(S=p&&v.route.id?p[v.route.id]:void 0,j=v.route.errorElement||Vg,m&&(g<0&&_===0?(Xg("route-fallback"),E=!0,w=null):g===_&&(E=!0,w=v.route.hydrateFallbackElement||null)));let O=r.concat(d.slice(0,_+1)),L=()=>{let R;return S?R=j:E?R=w:v.route.Component?R=T.createElement(v.route.Component,null):v.route.element?R=v.route.element:R=x,T.createElement(qg,{match:v,routeContext:{outlet:x,matches:O,isDataRoute:n!=null},children:R})};return n&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?T.createElement(Wg,{location:n.location,revalidation:n.revalidation,component:j,error:S,children:L(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):L()},null)}var tf=(function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i})(tf||{}),rf=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(rf||{});function Kg(i){let r=T.useContext(Vl);return r||$e(!1),r}function Gg(i){let r=T.useContext($g);return r||$e(!1),r}function Jg(i){let r=T.useContext(Xt);return r||$e(!1),r}function nf(i){let r=Jg(),n=r.matches[r.matches.length-1];return n.route.id||$e(!1),n.route.id}function Qg(){var i;let r=T.useContext(Yh),n=Gg(),o=nf();return r!==void 0?r:(i=n.errors)==null?void 0:i[o]}function Yg(){let{router:i}=Kg(tf.UseNavigateStable),r=nf(rf.UseNavigateStable),n=T.useRef(!1);return Xh(()=>{n.current=!0}),T.useCallback(function(l,u){u===void 0&&(u={}),n.current&&(typeof l=="number"?i.navigate(l):i.navigate(l,bs({fromRouteId:r},u)))},[i,r])}const ch={};function Xg(i,r,n){ch[i]||(ch[i]=!0)}function Zg(i,r){i?.v7_startTransition,i?.v7_relativeSplatPath}function Et(i){let{to:r,replace:n,state:o,relative:l}=i;Cn()||$e(!1);let{future:u,static:d}=T.useContext(Sr),{matches:p}=T.useContext(Xt),{pathname:m}=Tn(),g=Nt(),x=Fl(r,Bl(p,u.v7_relativeSplatPath),m,l==="path"),v=JSON.stringify(x);return T.useEffect(()=>g(JSON.parse(v),{replace:n,state:o,relative:l}),[g,v,l,n,o]),null}function gt(i){$e(!1)}function e0(i){let{basename:r="/",children:n=null,location:o,navigationType:l=_r.Pop,navigator:u,static:d=!1,future:p}=i;Cn()&&$e(!1);let m=r.replace(/^\/*/,"/"),g=T.useMemo(()=>({basename:m,navigator:u,static:d,future:bs({v7_relativeSplatPath:!1},p)}),[m,p,u,d]);typeof o=="string"&&(o=Nn(o));let{pathname:x="/",search:v="",hash:_="",state:S=null,key:E="default"}=o,j=T.useMemo(()=>{let w=zl(x,m);return w==null?null:{location:{pathname:w,search:v,hash:_,state:S,key:E},navigationType:l}},[m,x,v,_,S,E,l]);return j==null?null:T.createElement(Sr.Provider,{value:g},T.createElement(so.Provider,{children:n,value:j}))}function t0(i){let{children:r,location:n}=i;return zg(wl(r),n)}new Promise(()=>{});function wl(i,r){r===void 0&&(r=[]);let n=[];return T.Children.forEach(i,(o,l)=>{if(!T.isValidElement(o))return;let u=[...r,l];if(o.type===T.Fragment){n.push.apply(n,wl(o.props.children,u));return}o.type!==gt&&$e(!1),!o.props.index||!o.props.children||$e(!1);let d={id:o.props.id||u.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(d.children=wl(o.props.children,u)),n.push(d)}),n}function xl(){return xl=Object.assign?Object.assign.bind():function(i){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])}return i},xl.apply(this,arguments)}function r0(i,r){if(i==null)return{};var n={},o=Object.keys(i),l,u;for(u=0;u<o.length;u++)l=o[u],!(r.indexOf(l)>=0)&&(n[l]=i[l]);return n}function n0(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function s0(i,r){return i.button===0&&(!r||r==="_self")&&!n0(i)}const i0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],o0="6";try{window.__reactRouterVersion=o0}catch{}const a0="startTransition",dh=ng[a0];function l0(i){let{basename:r,children:n,future:o,window:l}=i,u=T.useRef();u.current==null&&(u.current=cg({window:l,v5Compat:!0}));let d=u.current,[p,m]=T.useState({action:d.action,location:d.location}),{v7_startTransition:g}=o||{},x=T.useCallback(v=>{g&&dh?dh(()=>m(v)):m(v)},[m,g]);return T.useLayoutEffect(()=>d.listen(x),[d,x]),T.useEffect(()=>Zg(o),[o]),T.createElement(e0,{basename:r,children:n,location:p.location,navigationType:p.action,navigator:d,future:o})}const u0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",c0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vr=T.forwardRef(function(r,n){let{onClick:o,relative:l,reloadDocument:u,replace:d,state:p,target:m,to:g,preventScrollReset:x,viewTransition:v}=r,_=r0(r,i0),{basename:S}=T.useContext(Sr),E,j=!1;if(typeof g=="string"&&c0.test(g)&&(E=g,u0))try{let R=new URL(window.location.href),U=g.startsWith("//")?new URL(R.protocol+g):new URL(g),F=zl(U.pathname,S);U.origin===R.origin&&F!=null?g=F+U.search+U.hash:j=!0}catch{}let w=Dg(g,{relative:l}),O=d0(g,{replace:d,state:p,target:m,preventScrollReset:x,relative:l,viewTransition:v});function L(R){o&&o(R),R.defaultPrevented||O(R)}return T.createElement("a",xl({},_,{href:E||w,onClick:j||u?o:L,ref:n,target:m}))});var hh;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(hh||(hh={}));var fh;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(fh||(fh={}));function d0(i,r){let{target:n,replace:o,state:l,preventScrollReset:u,relative:d,viewTransition:p}=r===void 0?{}:r,m=Nt(),g=Tn(),x=ef(i,{relative:d});return T.useCallback(v=>{if(s0(v,n)){v.preventDefault();let _=o!==void 0?o:Ji(g)===Ji(x);m(i,{replace:_,state:l,preventScrollReset:u,relative:d,viewTransition:p})}},[g,m,x,o,l,n,i,u,d,p])}var _l=function(i,r){return _l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(n[l]=o[l])},_l(i,r)};function sf(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");_l(i,r);function n(){this.constructor=i}i.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var Qi=function(){return Qi=Object.assign||function(r){for(var n,o=1,l=arguments.length;o<l;o++){n=arguments[o];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(r[u]=n[u])}return r},Qi.apply(this,arguments)};function Pn(i,r){var n={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&r.indexOf(o)<0&&(n[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(i);l<o.length;l++)r.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(i,o[l])&&(n[o[l]]=i[o[l]]);return n}function of(i,r,n,o){var l=arguments.length,u=l<3?r:o===null?o=Object.getOwnPropertyDescriptor(r,n):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,n,o);else for(var p=i.length-1;p>=0;p--)(d=i[p])&&(u=(l<3?d(u):l>3?d(r,n,u):d(r,n))||u);return l>3&&u&&Object.defineProperty(r,n,u),u}function af(i,r){return function(n,o){r(n,o,i)}}function lf(i,r,n,o,l,u){function d(O){if(O!==void 0&&typeof O!="function")throw new TypeError("Function expected");return O}for(var p=o.kind,m=p==="getter"?"get":p==="setter"?"set":"value",g=!r&&i?o.static?i:i.prototype:null,x=r||(g?Object.getOwnPropertyDescriptor(g,o.name):{}),v,_=!1,S=n.length-1;S>=0;S--){var E={};for(var j in o)E[j]=j==="access"?{}:o[j];for(var j in o.access)E.access[j]=o.access[j];E.addInitializer=function(O){if(_)throw new TypeError("Cannot add initializers after decoration has completed");u.push(d(O||null))};var w=(0,n[S])(p==="accessor"?{get:x.get,set:x.set}:x[m],E);if(p==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(v=d(w.get))&&(x.get=v),(v=d(w.set))&&(x.set=v),(v=d(w.init))&&l.unshift(v)}else(v=d(w))&&(p==="field"?l.unshift(v):x[m]=v)}g&&Object.defineProperty(g,o.name,x),_=!0}function uf(i,r,n){for(var o=arguments.length>2,l=0;l<r.length;l++)n=o?r[l].call(i,n):r[l].call(i);return o?n:void 0}function cf(i){return typeof i=="symbol"?i:"".concat(i)}function df(i,r,n){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:n?"".concat(n," ",r):r})}function hf(i,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,r)}function X(i,r,n,o){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function p(x){try{g(o.next(x))}catch(v){d(v)}}function m(x){try{g(o.throw(x))}catch(v){d(v)}}function g(x){x.done?u(x.value):l(x.value).then(p,m)}g((o=o.apply(i,r||[])).next())})}function ff(i,r){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,l,u,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=p(0),d.throw=p(1),d.return=p(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(g){return function(x){return m([g,x])}}function m(g){if(o)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(n=0)),n;)try{if(o=1,l&&(u=g[0]&2?l.return:g[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,g[1])).done)return u;switch(l=0,u&&(g=[g[0]&2,u.value]),g[0]){case 0:case 1:u=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,l=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!u||g[1]>u[0]&&g[1]<u[3])){n.label=g[1];break}if(g[0]===6&&n.label<u[1]){n.label=u[1],u=g;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(g);break}u[2]&&n.ops.pop(),n.trys.pop();continue}g=r.call(i,n)}catch(x){g=[6,x],l=0}finally{o=u=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var io=Object.create?(function(i,r,n,o){o===void 0&&(o=n);var l=Object.getOwnPropertyDescriptor(r,n);(!l||("get"in l?!r.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(i,o,l)}):(function(i,r,n,o){o===void 0&&(o=n),i[o]=r[n]});function pf(i,r){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&io(r,i,n)}function Yi(i){var r=typeof Symbol=="function"&&Symbol.iterator,n=r&&i[r],o=0;if(n)return n.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wl(i,r){var n=typeof Symbol=="function"&&i[Symbol.iterator];if(!n)return i;var o=n.call(i),l,u=[],d;try{for(;(r===void 0||r-- >0)&&!(l=o.next()).done;)u.push(l.value)}catch(p){d={error:p}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return u}function mf(){for(var i=[],r=0;r<arguments.length;r++)i=i.concat(Wl(arguments[r]));return i}function gf(){for(var i=0,r=0,n=arguments.length;r<n;r++)i+=arguments[r].length;for(var o=Array(i),l=0,r=0;r<n;r++)for(var u=arguments[r],d=0,p=u.length;d<p;d++,l++)o[l]=u[d];return o}function yf(i,r,n){if(n||arguments.length===2)for(var o=0,l=r.length,u;o<l;o++)(u||!(o in r))&&(u||(u=Array.prototype.slice.call(r,0,o)),u[o]=r[o]);return i.concat(u||Array.prototype.slice.call(r))}function En(i){return this instanceof En?(this.v=i,this):new En(i)}function vf(i,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(i,r||[]),l,u=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",d),l[Symbol.asyncIterator]=function(){return this},l;function d(S){return function(E){return Promise.resolve(E).then(S,v)}}function p(S,E){o[S]&&(l[S]=function(j){return new Promise(function(w,O){u.push([S,j,w,O])>1||m(S,j)})},E&&(l[S]=E(l[S])))}function m(S,E){try{g(o[S](E))}catch(j){_(u[0][3],j)}}function g(S){S.value instanceof En?Promise.resolve(S.value.v).then(x,v):_(u[0][2],S)}function x(S){m("next",S)}function v(S){m("throw",S)}function _(S,E){S(E),u.shift(),u.length&&m(u[0][0],u[0][1])}}function wf(i){var r,n;return r={},o("next"),o("throw",function(l){throw l}),o("return"),r[Symbol.iterator]=function(){return this},r;function o(l,u){r[l]=i[l]?function(d){return(n=!n)?{value:En(i[l](d)),done:!1}:u?u(d):d}:u}}function xf(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i[Symbol.asyncIterator],n;return r?r.call(i):(i=typeof Yi=="function"?Yi(i):i[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(u){n[u]=i[u]&&function(d){return new Promise(function(p,m){d=i[u](d),l(p,m,d.done,d.value)})}}function l(u,d,p,m){Promise.resolve(m).then(function(g){u({value:g,done:p})},d)}}function _f(i,r){return Object.defineProperty?Object.defineProperty(i,"raw",{value:r}):i.raw=r,i}var h0=Object.create?(function(i,r){Object.defineProperty(i,"default",{enumerable:!0,value:r})}):function(i,r){i.default=r},bl=function(i){return bl=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},bl(i)};function bf(i){if(i&&i.__esModule)return i;var r={};if(i!=null)for(var n=bl(i),o=0;o<n.length;o++)n[o]!=="default"&&io(r,i,n[o]);return h0(r,i),r}function jf(i){return i&&i.__esModule?i:{default:i}}function Sf(i,r,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?i!==r||!o:!r.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(i):o?o.value:r.get(i)}function kf(i,r,n,o,l){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?i!==r||!l:!r.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?l.call(i,n):l?l.value=n:r.set(i,n),n}function Ef(i,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?r===i:i.has(r)}function Nf(i,r,n){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var o,l;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=r[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=r[Symbol.dispose],n&&(l=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");l&&(o=function(){try{l.call(this)}catch(u){return Promise.reject(u)}}),i.stack.push({value:r,dispose:o,async:n})}else n&&i.stack.push({async:!0});return r}var f0=typeof SuppressedError=="function"?SuppressedError:function(i,r,n){var o=new Error(n);return o.name="SuppressedError",o.error=i,o.suppressed=r,o};function Cf(i){function r(u){i.error=i.hasError?new f0(u,i.error,"An error was suppressed during disposal."):u,i.hasError=!0}var n,o=0;function l(){for(;n=i.stack.pop();)try{if(!n.async&&o===1)return o=0,i.stack.push(n),Promise.resolve().then(l);if(n.dispose){var u=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(u).then(l,function(d){return r(d),l()})}else o|=1}catch(d){r(d)}if(o===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return l()}function Tf(i,r){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,o,l,u,d){return o?r?".jsx":".js":l&&(!u||!d)?n:l+u+"."+d.toLowerCase()+"js"}):i}const p0={__extends:sf,__assign:Qi,__rest:Pn,__decorate:of,__param:af,__esDecorate:lf,__runInitializers:uf,__propKey:cf,__setFunctionName:df,__metadata:hf,__awaiter:X,__generator:ff,__createBinding:io,__exportStar:pf,__values:Yi,__read:Wl,__spread:mf,__spreadArrays:gf,__spreadArray:yf,__await:En,__asyncGenerator:vf,__asyncDelegator:wf,__asyncValues:xf,__makeTemplateObject:_f,__importStar:bf,__importDefault:jf,__classPrivateFieldGet:Sf,__classPrivateFieldSet:kf,__classPrivateFieldIn:Ef,__addDisposableResource:Nf,__disposeResources:Cf,__rewriteRelativeImportExtension:Tf},m0=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Nf,get __assign(){return Qi},__asyncDelegator:wf,__asyncGenerator:vf,__asyncValues:xf,__await:En,__awaiter:X,__classPrivateFieldGet:Sf,__classPrivateFieldIn:Ef,__classPrivateFieldSet:kf,__createBinding:io,__decorate:of,__disposeResources:Cf,__esDecorate:lf,__exportStar:pf,__extends:sf,__generator:ff,__importDefault:jf,__importStar:bf,__makeTemplateObject:_f,__metadata:hf,__param:af,__propKey:cf,__read:Wl,__rest:Pn,__rewriteRelativeImportExtension:Tf,__runInitializers:uf,__setFunctionName:df,__spread:mf,__spreadArray:yf,__spreadArrays:gf,__values:Yi,default:p0},Symbol.toStringTag,{value:"Module"})),g0=i=>i?(...r)=>i(...r):(...r)=>fetch(...r);class ql extends Error{constructor(r,n="FunctionsError",o){super(r),this.name=n,this.context=o}}class y0 extends ql{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class ph extends ql{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class mh extends ql{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var jl;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(jl||(jl={}));class v0{constructor(r,{headers:n={},customFetch:o,region:l=jl.Any}={}){this.url=r,this.headers=n,this.region=l,this.fetch=g0(o)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return X(this,arguments,void 0,function*(n,o={}){var l;let u,d;try{const{headers:p,method:m,body:g,signal:x,timeout:v}=o;let _={},{region:S}=o;S||(S=this.region);const E=new URL(`${this.url}/${n}`);S&&S!=="any"&&(_["x-region"]=S,E.searchParams.set("forceFunctionRegion",S));let j;g&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",j=g):typeof g=="string"?(_["Content-Type"]="text/plain",j=g):typeof FormData<"u"&&g instanceof FormData?j=g:(_["Content-Type"]="application/json",j=JSON.stringify(g)):j=g;let w=x;v&&(d=new AbortController,u=setTimeout(()=>d.abort(),v),x?(w=d.signal,x.addEventListener("abort",()=>d.abort())):w=d.signal);const O=yield this.fetch(E.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),p),body:j,signal:w}).catch(F=>{throw new y0(F)}),L=O.headers.get("x-relay-error");if(L&&L==="true")throw new ph(O);if(!O.ok)throw new mh(O);let R=((l=O.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),U;return R==="application/json"?U=yield O.json():R==="application/octet-stream"||R==="application/pdf"?U=yield O.blob():R==="text/event-stream"?U=O:R==="multipart/form-data"?U=yield O.formData():U=yield O.text(),{data:U,error:null,response:O}}catch(p){return{data:null,error:p,response:p instanceof mh||p instanceof ph?p.context:void 0}}finally{u&&clearTimeout(u)}})}}var tt={};const On=Zm(m0);var Mi={},zi={},Bi={},Fi={},Vi={},Wi={},gh;function Pf(){if(gh)return Wi;gh=1,Object.defineProperty(Wi,"__esModule",{value:!0});class i extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Wi.default=i,Wi}var yh;function Of(){if(yh)return Vi;yh=1,Object.defineProperty(Vi,"__esModule",{value:!0});const r=On.__importDefault(Pf());class n{constructor(l){var u,d;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(u=l.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=l.signal,this.isMaybeSingle=(d=l.isMaybeSingle)!==null&&d!==void 0?d:!1,l.fetch?this.fetch=l.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,u){return this.headers=new Headers(this.headers),this.headers.set(l,u),this}then(l,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let p=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var g,x,v,_;let S=null,E=null,j=null,w=m.status,O=m.statusText;if(m.ok){if(this.method!=="HEAD"){const F=await m.text();F===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?E=F:E=JSON.parse(F))}const R=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),U=(v=m.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");R&&U&&U.length>1&&(j=parseInt(U[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(S={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,j=null,w=406,O="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const R=await m.text();try{S=JSON.parse(R),Array.isArray(S)&&m.status===404&&(E=[],S=null,w=200,O="OK")}catch{m.status===404&&R===""?(w=204,O="No Content"):S={message:R}}if(S&&this.isMaybeSingle&&(!((_=S?.details)===null||_===void 0)&&_.includes("0 rows"))&&(S=null,w=200,O="OK"),S&&this.shouldThrowOnError)throw new r.default(S)}return{error:S,data:E,count:j,status:w,statusText:O}});return this.shouldThrowOnError||(p=p.catch(m=>{var g,x,v,_,S,E;let j="";const w=m?.cause;if(w){const O=(g=w?.message)!==null&&g!==void 0?g:"",L=(x=w?.code)!==null&&x!==void 0?x:"";j=`${(v=m?.name)!==null&&v!==void 0?v:"FetchError"}: ${m?.message}`,j+=`

Caused by: ${(_=w?.name)!==null&&_!==void 0?_:"Error"}: ${O}`,L&&(j+=` (${L})`),w?.stack&&(j+=`
${w.stack}`)}else j=(S=m?.stack)!==null&&S!==void 0?S:"";return{error:{message:`${(E=m?.name)!==null&&E!==void 0?E:"FetchError"}: ${m?.message}`,details:j,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),p.then(l,u)}returns(){return this}overrideTypes(){return this}}return Vi.default=n,Vi}var vh;function Rf(){if(vh)return Fi;vh=1,Object.defineProperty(Fi,"__esModule",{value:!0});const r=On.__importDefault(Of());class n extends r.default{select(l){let u=!1;const d=(l??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:u=!0,nullsFirst:d,foreignTable:p,referencedTable:m=p}={}){const g=m?`${m}.order`:"order",x=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${x?`${x},`:""}${l}.${u?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:u,referencedTable:d=u}={}){const p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(p,`${l}`),this}range(l,u,{foreignTable:d,referencedTable:p=d}={}){const m=typeof p>"u"?"offset":`${p}.offset`,g=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(m,`${l}`),this.url.searchParams.set(g,`${u-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:u=!1,settings:d=!1,buffers:p=!1,wal:m=!1,format:g="text"}={}){var x;const v=[l?"analyze":null,u?"verbose":null,d?"settings":null,p?"buffers":null,m?"wal":null].filter(Boolean).join("|"),_=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${_}"; options=${v};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return Fi.default=n,Fi}var wh;function Hl(){if(wh)return Bi;wh=1,Object.defineProperty(Bi,"__esModule",{value:!0});const r=On.__importDefault(Rf()),n=new RegExp("[,()]");class o extends r.default{eq(u,d){return this.url.searchParams.append(u,`eq.${d}`),this}neq(u,d){return this.url.searchParams.append(u,`neq.${d}`),this}gt(u,d){return this.url.searchParams.append(u,`gt.${d}`),this}gte(u,d){return this.url.searchParams.append(u,`gte.${d}`),this}lt(u,d){return this.url.searchParams.append(u,`lt.${d}`),this}lte(u,d){return this.url.searchParams.append(u,`lte.${d}`),this}like(u,d){return this.url.searchParams.append(u,`like.${d}`),this}likeAllOf(u,d){return this.url.searchParams.append(u,`like(all).{${d.join(",")}}`),this}likeAnyOf(u,d){return this.url.searchParams.append(u,`like(any).{${d.join(",")}}`),this}ilike(u,d){return this.url.searchParams.append(u,`ilike.${d}`),this}ilikeAllOf(u,d){return this.url.searchParams.append(u,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(u,d){return this.url.searchParams.append(u,`ilike(any).{${d.join(",")}}`),this}regexMatch(u,d){return this.url.searchParams.append(u,`match.${d}`),this}regexIMatch(u,d){return this.url.searchParams.append(u,`imatch.${d}`),this}is(u,d){return this.url.searchParams.append(u,`is.${d}`),this}isDistinct(u,d){return this.url.searchParams.append(u,`isdistinct.${d}`),this}in(u,d){const p=Array.from(new Set(d)).map(m=>typeof m=="string"&&n.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(u,`in.(${p})`),this}contains(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cs.{${d.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(d)}`),this}containedBy(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cd.{${d.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(d)}`),this}rangeGt(u,d){return this.url.searchParams.append(u,`sr.${d}`),this}rangeGte(u,d){return this.url.searchParams.append(u,`nxl.${d}`),this}rangeLt(u,d){return this.url.searchParams.append(u,`sl.${d}`),this}rangeLte(u,d){return this.url.searchParams.append(u,`nxr.${d}`),this}rangeAdjacent(u,d){return this.url.searchParams.append(u,`adj.${d}`),this}overlaps(u,d){return typeof d=="string"?this.url.searchParams.append(u,`ov.${d}`):this.url.searchParams.append(u,`ov.{${d.join(",")}}`),this}textSearch(u,d,{config:p,type:m}={}){let g="";m==="plain"?g="pl":m==="phrase"?g="ph":m==="websearch"&&(g="w");const x=p===void 0?"":`(${p})`;return this.url.searchParams.append(u,`${g}fts${x}.${d}`),this}match(u){return Object.entries(u).forEach(([d,p])=>{this.url.searchParams.append(d,`eq.${p}`)}),this}not(u,d,p){return this.url.searchParams.append(u,`not.${d}.${p}`),this}or(u,{foreignTable:d,referencedTable:p=d}={}){const m=p?`${p}.or`:"or";return this.url.searchParams.append(m,`(${u})`),this}filter(u,d,p){return this.url.searchParams.append(u,`${d}.${p}`),this}}return Bi.default=o,Bi}var xh;function Af(){if(xh)return zi;xh=1,Object.defineProperty(zi,"__esModule",{value:!0});const r=On.__importDefault(Hl());class n{constructor(l,{headers:u={},schema:d,fetch:p}){this.url=l,this.headers=new Headers(u),this.schema=d,this.fetch=p}select(l,u){const{head:d=!1,count:p}=u??{},m=d?"HEAD":"GET";let g=!1;const x=(l??"*").split("").map(v=>/\s/.test(v)&&!g?"":(v==='"'&&(g=!g),v)).join("");return this.url.searchParams.set("select",x),p&&this.headers.append("Prefer",`count=${p}`),new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:u,defaultToNull:d=!0}={}){var p;const m="POST";if(u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const g=l.reduce((x,v)=>x.concat(Object.keys(v)),[]);if(g.length>0){const x=[...new Set(g)].map(v=>`"${v}"`);this.url.searchParams.set("columns",x.join(","))}}return new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(l,{onConflict:u,ignoreDuplicates:d=!1,count:p,defaultToNull:m=!0}={}){var g;const x="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),p&&this.headers.append("Prefer",`count=${p}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const v=l.reduce((_,S)=>_.concat(Object.keys(S)),[]);if(v.length>0){const _=[...new Set(v)].map(S=>`"${S}"`);this.url.searchParams.set("columns",_.join(","))}}return new r.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(l,{count:u}={}){var d;const p="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new r.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:l}={}){var u;const d="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new r.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return zi.default=n,zi}var _h;function w0(){if(_h)return Mi;_h=1,Object.defineProperty(Mi,"__esModule",{value:!0});const i=On,r=i.__importDefault(Af()),n=i.__importDefault(Hl());class o{constructor(u,{headers:d={},schema:p,fetch:m}={}){this.url=u,this.headers=new Headers(d),this.schemaName=p,this.fetch=m}from(u){if(!u||typeof u!="string"||u.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const d=new URL(`${this.url}/${u}`);return new r.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new o(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,d={},{head:p=!1,get:m=!1,count:g}={}){var x;let v;const _=new URL(`${this.url}/rpc/${u}`);let S;p||m?(v=p?"HEAD":"GET",Object.entries(d).filter(([j,w])=>w!==void 0).map(([j,w])=>[j,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([j,w])=>{_.searchParams.append(j,w)})):(v="POST",S=d);const E=new Headers(this.headers);return g&&E.set("Prefer",`count=${g}`),new n.default({method:v,url:_,headers:E,schema:this.schemaName,body:S,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return Mi.default=o,Mi}var bh;function x0(){if(bh)return tt;bh=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.PostgrestError=tt.PostgrestBuilder=tt.PostgrestTransformBuilder=tt.PostgrestFilterBuilder=tt.PostgrestQueryBuilder=tt.PostgrestClient=void 0;const i=On,r=i.__importDefault(w0());tt.PostgrestClient=r.default;const n=i.__importDefault(Af());tt.PostgrestQueryBuilder=n.default;const o=i.__importDefault(Hl());tt.PostgrestFilterBuilder=o.default;const l=i.__importDefault(Rf());tt.PostgrestTransformBuilder=l.default;const u=i.__importDefault(Of());tt.PostgrestBuilder=u.default;const d=i.__importDefault(Pf());return tt.PostgrestError=d.default,tt.default={PostgrestClient:r.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:u.default,PostgrestError:d.default},tt}var If=x0();const Lf=$l(If),_0=qh({__proto__:null,default:Lf},[If]),{PostgrestClient:b0,PostgrestQueryBuilder:Nw,PostgrestFilterBuilder:Cw,PostgrestTransformBuilder:Tw,PostgrestBuilder:Pw,PostgrestError:Ow}=Lf||_0;class j0{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const o=n.node,l=parseInt(o.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let n=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(n+=`

Suggested solution: ${r.workaround}`),new Error(n)}static createWebSocket(r,n){const o=this.getWebSocketConstructor();return new o(r,n)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const S0="2.84.0",k0=`realtime-js/${S0}`,Uf="1.0.0",E0="2.0.0",jh=Uf,Sl=1e4,N0=1e3,C0=100;var Fr;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Fr||(Fr={}));var Ve;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Ve||(Ve={}));var $t;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})($t||($t={}));var kl;(function(i){i.websocket="websocket"})(kl||(kl={}));var Vr;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Vr||(Vr={}));class T0{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(r,n){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(r));let o=[r.join_ref,r.ref,r.topic,r.event,r.payload];return n(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(r){var n;return this._isArrayBuffer((n=r.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var n,o,l,u;const d=r.topic,p=(n=r.ref)!==null&&n!==void 0?n:"",m=(o=r.join_ref)!==null&&o!==void 0?o:"",g=r.payload.event,x=(u=(l=r.payload)===null||l===void 0?void 0:l.payload)!==null&&u!==void 0?u:new ArrayBuffer(0),v=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+d.length+g.length,_=new ArrayBuffer(this.HEADER_LENGTH+v);let S=new DataView(_),E=0;S.setUint8(E++,this.KINDS.userBroadcastPush),S.setUint8(E++,m.length),S.setUint8(E++,p.length),S.setUint8(E++,d.length),S.setUint8(E++,g.length),S.setUint8(E++,this.BINARY_ENCODING),Array.from(m,w=>S.setUint8(E++,w.charCodeAt(0))),Array.from(p,w=>S.setUint8(E++,w.charCodeAt(0))),Array.from(d,w=>S.setUint8(E++,w.charCodeAt(0))),Array.from(g,w=>S.setUint8(E++,w.charCodeAt(0)));var j=new Uint8Array(_.byteLength+x.byteLength);return j.set(new Uint8Array(_),0),j.set(new Uint8Array(x),_.byteLength),j.buffer}_encodeJsonUserBroadcastPush(r){var n,o,l,u;const d=r.topic,p=(n=r.ref)!==null&&n!==void 0?n:"",m=(o=r.join_ref)!==null&&o!==void 0?o:"",g=r.payload.event,x=(u=(l=r.payload)===null||l===void 0?void 0:l.payload)!==null&&u!==void 0?u:{},_=new TextEncoder().encode(JSON.stringify(x)).buffer,S=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+d.length+g.length,E=new ArrayBuffer(this.HEADER_LENGTH+S);let j=new DataView(E),w=0;j.setUint8(w++,this.KINDS.userBroadcastPush),j.setUint8(w++,m.length),j.setUint8(w++,p.length),j.setUint8(w++,d.length),j.setUint8(w++,g.length),j.setUint8(w++,this.JSON_ENCODING),Array.from(m,L=>j.setUint8(w++,L.charCodeAt(0))),Array.from(p,L=>j.setUint8(w++,L.charCodeAt(0))),Array.from(d,L=>j.setUint8(w++,L.charCodeAt(0))),Array.from(g,L=>j.setUint8(w++,L.charCodeAt(0)));var O=new Uint8Array(E.byteLength+_.byteLength);return O.set(new Uint8Array(E),0),O.set(new Uint8Array(_),E.byteLength),O.buffer}decode(r,n){if(this._isArrayBuffer(r)){let o=this._binaryDecode(r);return n(o)}if(typeof r=="string"){const o=JSON.parse(r),[l,u,d,p,m]=o;return n({join_ref:l,ref:u,topic:d,event:p,payload:m})}return n({})}_binaryDecode(r){const n=new DataView(r),o=n.getUint8(0),l=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,n,l)}}_decodeUserBroadcast(r,n,o){const l=n.getUint8(1),u=n.getUint8(2),d=n.getUint8(3),p=n.getUint8(4);let m=this.HEADER_LENGTH+4;const g=o.decode(r.slice(m,m+l));m=m+l;const x=o.decode(r.slice(m,m+u));m=m+u;const v=o.decode(r.slice(m,m+d));m=m+d;const _=r.slice(m,r.byteLength),S=p===this.JSON_ENCODING?JSON.parse(o.decode(_)):_,E={type:this.BROADCAST_EVENT,event:x,payload:S};return d>0&&(E.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(r){var n;return r instanceof ArrayBuffer||((n=r?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}}class $f{constructor(r,n){this.callback=r,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ke;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(ke||(ke={}));const Sh=(i,r,n={})=>{var o;const l=(o=n.skipTypes)!==null&&o!==void 0?o:[];return r?Object.keys(r).reduce((u,d)=>(u[d]=P0(d,i,r,l),u),{}):{}},P0=(i,r,n,o)=>{const l=r.find(p=>p.name===i),u=l?.type,d=n[i];return u&&!o.includes(u)?Df(u,d):El(d)},Df=(i,r)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return I0(r,n)}switch(i){case ke.bool:return O0(r);case ke.float4:case ke.float8:case ke.int2:case ke.int4:case ke.int8:case ke.numeric:case ke.oid:return R0(r);case ke.json:case ke.jsonb:return A0(r);case ke.timestamp:return L0(r);case ke.abstime:case ke.date:case ke.daterange:case ke.int4range:case ke.int8range:case ke.money:case ke.reltime:case ke.text:case ke.time:case ke.timestamptz:case ke.timetz:case ke.tsrange:case ke.tstzrange:return El(r);default:return El(r)}},El=i=>i,O0=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},R0=i=>{if(typeof i=="string"){const r=parseFloat(i);if(!Number.isNaN(r))return r}return i},A0=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(r){return console.log(`JSON parse error: ${r}`),i}return i},I0=(i,r)=>{if(typeof i!="string")return i;const n=i.length-1,o=i[n];if(i[0]==="{"&&o==="}"){let u;const d=i.slice(1,n);try{u=JSON.parse("["+d+"]")}catch{u=d?d.split(","):[]}return u.map(p=>Df(r,p))}return i},L0=i=>typeof i=="string"?i.replace(" ","T"):i,Mf=i=>{const r=new URL(i);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class al{constructor(r,n,o={},l=Sl){this.channel=r,this.event=n,this.payload=o,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,n){var o;return this._hasReceived(r)&&n((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:r,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:n}){this.recHooks.filter(o=>o.status===r).forEach(o=>o.callback(n))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var kh;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(kh||(kh={}));class ws{constructor(r,n){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},l=>{const{onJoin:u,onLeave:d,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ws.syncState(this.state,l,u,d),this.pendingDiffs.forEach(m=>{this.state=ws.syncDiff(this.state,m,u,d)}),this.pendingDiffs=[],p()}),this.channel._on(o.diff,{},l=>{const{onJoin:u,onLeave:d,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=ws.syncDiff(this.state,l,u,d),p())}),this.onJoin((l,u,d)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:d})}),this.onLeave((l,u,d)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,n,o,l){const u=this.cloneDeep(r),d=this.transformState(n),p={},m={};return this.map(u,(g,x)=>{d[g]||(m[g]=x)}),this.map(d,(g,x)=>{const v=u[g];if(v){const _=x.map(w=>w.presence_ref),S=v.map(w=>w.presence_ref),E=x.filter(w=>S.indexOf(w.presence_ref)<0),j=v.filter(w=>_.indexOf(w.presence_ref)<0);E.length>0&&(p[g]=E),j.length>0&&(m[g]=j)}else p[g]=x}),this.syncDiff(u,{joins:p,leaves:m},o,l)}static syncDiff(r,n,o,l){const{joins:u,leaves:d}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return o||(o=()=>{}),l||(l=()=>{}),this.map(u,(p,m)=>{var g;const x=(g=r[p])!==null&&g!==void 0?g:[];if(r[p]=this.cloneDeep(m),x.length>0){const v=r[p].map(S=>S.presence_ref),_=x.filter(S=>v.indexOf(S.presence_ref)<0);r[p].unshift(..._)}o(p,x,m)}),this.map(d,(p,m)=>{let g=r[p];if(!g)return;const x=m.map(v=>v.presence_ref);g=g.filter(v=>x.indexOf(v.presence_ref)<0),r[p]=g,l(p,g,m),g.length===0&&delete r[p]}),r}static map(r,n){return Object.getOwnPropertyNames(r).map(o=>n(o,r[o]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((n,o)=>{const l=r[o];return"metas"in l?n[o]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[o]=l,n},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Eh;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Eh||(Eh={}));var xs;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(xs||(xs={}));var Yt;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Yt||(Yt={}));class Kl{constructor(r,n={config:{}},o){var l,u;if(this.topic=r,this.params=n,this.socket=o,this.bindings={},this.state=Ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new al(this,$t.join,this.params,this.timeout),this.rejoinTimer=new $f(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ve.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on($t.reply,{},(d,p)=>{this._trigger(this._replyEventName(p),d)}),this.presence=new ws(this),this.broadcastEndpointURL=Mf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,n=this.timeout){var o,l,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Ve.closed){const{config:{broadcast:d,presence:p,private:m}}=this.params,g=(l=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(S=>S.filter))!==null&&l!==void 0?l:[],x=!!this.bindings[xs.PRESENCE]&&this.bindings[xs.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,v={},_={broadcast:d,presence:Object.assign(Object.assign({},p),{enabled:x}),postgres_changes:g,private:m};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(S=>r?.(Yt.CHANNEL_ERROR,S)),this._onClose(()=>r?.(Yt.CLOSED)),this.updateJoinPayload(Object.assign({config:_},v)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:S})=>{var E;if(this.socket.setAuth(),S===void 0){r?.(Yt.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,w=(E=j?.length)!==null&&E!==void 0?E:0,O=[];for(let L=0;L<w;L++){const R=j[L],{filter:{event:U,schema:F,table:W,filter:Z}}=R,se=S&&S[L];if(se&&se.event===U&&se.schema===F&&se.table===W&&se.filter===Z)O.push(Object.assign(Object.assign({},R),{id:se.id}));else{this.unsubscribe(),this.state=Ve.errored,r?.(Yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=O,r&&r(Yt.SUBSCRIBED);return}}).receive("error",S=>{this.state=Ve.errored,r?.(Yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{r?.(Yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,n={}){return await this.send({type:"presence",event:"track",payload:r},n.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,n,o){return this.state===Ve.joined&&r===xs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(r,n,o)}async httpSend(r,n,o={}){var l;const u=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const d={method:"POST",headers:{Authorization:u,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:n,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(l=o.timeout)!==null&&l!==void 0?l:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const g=await p.json();m=g.error||g.message||m}catch{}return Promise.reject(new Error(m))}async send(r,n={}){var o,l;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:d}=r,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:d,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return await((l=g.body)===null||l===void 0?void 0:l.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var d,p,m;const g=this._push(r.type,r,n.timeout||this.timeout);r.type==="broadcast"&&!(!((m=(p=(d=this.params)===null||d===void 0?void 0:d.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),g.receive("ok",()=>u("ok")),g.receive("error",()=>u("error")),g.receive("timeout",()=>u("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Ve.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($t.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(l=>{o=new al(this,$t.leave,{},r),o.receive("ok",()=>{n(),l("ok")}).receive("timeout",()=>{n(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ve.closed,this.bindings={}}async _fetchWithTimeout(r,n,o){const l=new AbortController,u=setTimeout(()=>l.abort(),o),d=await this.socket.fetch(r,Object.assign(Object.assign({},n),{signal:l.signal}));return clearTimeout(u),d}_push(r,n,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new al(this,r,n,o);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>C0){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(r,n,o){return n}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,n,o){var l,u;const d=r.toLocaleLowerCase(),{close:p,error:m,leave:g,join:x}=$t;if(o&&[p,m,g,x].indexOf(d)>=0&&o!==this._joinRef())return;let _=this._onMessage(d,n,o);if(n&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(S=>{var E,j,w;return((E=S.filter)===null||E===void 0?void 0:E.event)==="*"||((w=(j=S.filter)===null||j===void 0?void 0:j.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===d}).map(S=>S.callback(_,o)):(u=this.bindings[d])===null||u===void 0||u.filter(S=>{var E,j,w,O,L,R;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in S){const U=S.id,F=(E=S.filter)===null||E===void 0?void 0:E.event;return U&&((j=n.ids)===null||j===void 0?void 0:j.includes(U))&&(F==="*"||F?.toLocaleLowerCase()===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const U=(L=(O=S?.filter)===null||O===void 0?void 0:O.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return U==="*"||U===((R=n?.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===d}).map(S=>{if(typeof _=="object"&&"ids"in _){const E=_.data,{schema:j,table:w,commit_timestamp:O,type:L,errors:R}=E;_=Object.assign(Object.assign({},{schema:j,table:w,commit_timestamp:O,eventType:L,new:{},old:{},errors:R}),this._getPayloadRecords(E))}S.callback(_,o)})}_isClosed(){return this.state===Ve.closed}_isJoined(){return this.state===Ve.joined}_isJoining(){return this.state===Ve.joining}_isLeaving(){return this.state===Ve.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,n,o){const l=r.toLocaleLowerCase(),u={type:l,filter:n,callback:o};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(r,n){const o=r.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===o&&Kl.isEqual(l.filter,n))})),this}static isEqual(r,n){if(Object.keys(r).length!==Object.keys(n).length)return!1;for(const o in r)if(r[o]!==n[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on($t.close,{},r)}_onError(r){this._on($t.error,{},n=>r(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ve.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const n={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(n.new=Sh(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(n.old=Sh(r.columns,r.old_record)),n}}const ll=()=>{},qi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},U0=[1e3,2e3,5e3,1e4],$0=1e4,D0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class M0{constructor(r,n){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Sl,this.transport=null,this.heartbeatIntervalMs=qi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ll,this.ref=0,this.reconnectTimer=null,this.vsn=jh,this.logger=ll,this.conn=null,this.sendBuffer=[],this.serializer=new T0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>l?(...u)=>l(...u):(...u)=>fetch(...u),!(!((o=n?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${r}/${kl.websocket}`,this.httpEndpoint=Mf(r),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=j0.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const n=r.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const n=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const r=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,n,o){this.logger(r,n,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Fr.connecting:return Vr.Connecting;case Fr.open:return Vr.Open;case Fr.closing:return Vr.Closing;default:return Vr.Closed}}isConnected(){return this.connectionState()===Vr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,n={config:{}}){const o=`realtime:${r}`,l=this.getChannels().find(u=>u.topic===o);if(l)return l;{const u=new Kl(`realtime:${r}`,n,this);return this.channels.push(u),u}}push(r){const{topic:n,event:o,payload:l,ref:u}=r,d=()=>{this.encode(r,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${n} ${o} (${u})`,l),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(N0,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},qi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let n=this.channels.find(o=>o.topic===r&&(o._isJoined()||o._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${r}"`),n.unsubscribe())}_remove(r){this.channels=this.channels.filter(n=>n.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:l,payload:u,ref:d}=n,p=d?`(${d})`:"",m=u.status||"";this.log("receive",`${m} ${o} ${l} ${p}`.trim(),u),this.channels.filter(g=>g._isMember(o)).forEach(g=>g._trigger(l,u,d)),this._triggerStateCallbacks("message",n)})}_clearTimer(r){var n;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Fr.open||this.conn.readyState===Fr.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(r){var n;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger($t.error))}_appendParams(r,n){if(Object.keys(n).length===0)return r;const o=r.match(/\?/)?"&":"?",l=new URLSearchParams(n);return`${r}${o}${l}`}_workerObjectUrl(r){let n;if(r)n=r;else{const o=new Blob([D0],{type:"application/javascript"});n=URL.createObjectURL(o)}return n}_setConnectionState(r,n=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(r=null){let n;r?n=r:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const l={access_token:n,version:k0};n&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push($t.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${r}`,n)})}_triggerStateCallbacks(r,n){try{this.stateChangeCallbacks[r].forEach(o=>{try{o(n)}catch(l){this.log("error",`error in ${r} callback`,l)}})}catch(o){this.log("error",`error triggering ${r} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new $f(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},qi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var n,o,l,u,d,p,m,g,x,v,_,S;switch(this.transport=(n=r?.transport)!==null&&n!==void 0?n:null,this.timeout=(o=r?.timeout)!==null&&o!==void 0?o:Sl,this.heartbeatIntervalMs=(l=r?.heartbeatIntervalMs)!==null&&l!==void 0?l:qi.HEARTBEAT_INTERVAL,this.worker=(u=r?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(d=r?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(p=r?.heartbeatCallback)!==null&&p!==void 0?p:ll,this.vsn=(m=r?.vsn)!==null&&m!==void 0?m:jh,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=r?.reconnectAfterMs)!==null&&g!==void 0?g:(E=>U0[E-1]||$0),this.vsn){case Uf:this.encode=(x=r?.encode)!==null&&x!==void 0?x:((E,j)=>j(JSON.stringify(E))),this.decode=(v=r?.decode)!==null&&v!==void 0?v:((E,j)=>j(JSON.parse(E)));break;case E0:this.encode=(_=r?.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(S=r?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}class Gl extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function Re(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class z0 extends Gl{constructor(r,n,o){super(r),this.name="StorageApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Nl extends Gl{constructor(r,n){super(r),this.name="StorageUnknownError",this.originalError=n}}const Jl=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),B0=()=>Response,Cl=i=>{if(Array.isArray(i))return i.map(n=>Cl(n));if(typeof i=="function"||i!==Object(i))return i;const r={};return Object.entries(i).forEach(([n,o])=>{const l=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));r[l]=Cl(o)}),r},F0=i=>{if(typeof i!="object"||i===null)return!1;const r=Object.getPrototypeOf(i);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},ul=i=>{var r;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(r=i.error)===null||r===void 0?void 0:r.message)||JSON.stringify(i)},V0=(i,r,n)=>X(void 0,void 0,void 0,function*(){const o=yield B0();i instanceof o&&!n?.noResolveJson?i.json().then(l=>{const u=i.status||500,d=l?.statusCode||u+"";r(new z0(ul(l),u,d))}).catch(l=>{r(new Nl(ul(l),l))}):r(new Nl(ul(i),i))}),W0=(i,r,n,o)=>{const l={method:i,headers:r?.headers||{}};return i==="GET"||!o?l:(F0(o)?(l.headers=Object.assign({"Content-Type":"application/json"},r?.headers),l.body=JSON.stringify(o)):l.body=o,r?.duplex&&(l.duplex=r.duplex),Object.assign(Object.assign({},l),n))};function Ns(i,r,n,o,l,u){return X(this,void 0,void 0,function*(){return new Promise((d,p)=>{i(n,W0(r,o,l,u)).then(m=>{if(!m.ok)throw m;return o?.noResolveJson?m:m.json()}).then(m=>d(m)).catch(m=>V0(m,p,o))})})}function js(i,r,n,o){return X(this,void 0,void 0,function*(){return Ns(i,"GET",r,n,o)})}function Ut(i,r,n,o,l){return X(this,void 0,void 0,function*(){return Ns(i,"POST",r,o,l,n)})}function Tl(i,r,n,o,l){return X(this,void 0,void 0,function*(){return Ns(i,"PUT",r,o,l,n)})}function q0(i,r,n,o){return X(this,void 0,void 0,function*(){return Ns(i,"HEAD",r,Object.assign(Object.assign({},n),{noResolveJson:!0}),o)})}function Ql(i,r,n,o,l){return X(this,void 0,void 0,function*(){return Ns(i,"DELETE",r,o,l,n)})}class H0{constructor(r,n){this.downloadFn=r,this.shouldThrowOnError=n}then(r,n){return this.execute().then(r,n)}execute(){return X(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Re(r))return{data:null,error:r};throw r}})}}var zf;class K0{constructor(r,n){this.downloadFn=r,this.shouldThrowOnError=n,this[zf]="BlobDownloadBuilder",this.promise=null}asStream(){return new H0(this.downloadFn,this.shouldThrowOnError)}then(r,n){return this.getPromise().then(r,n)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return X(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Re(r))return{data:null,error:r};throw r}})}}zf=Symbol.toStringTag;const G0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Nh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class J0{constructor(r,n={},o,l){this.shouldThrowOnError=!1,this.url=r,this.headers=n,this.bucketId=o,this.fetch=Jl(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,n,o,l){return X(this,void 0,void 0,function*(){try{let u;const d=Object.assign(Object.assign({},Nh),l);let p=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(d.upsert)});const m=d.metadata;typeof Blob<"u"&&o instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),m&&u.append("metadata",this.encodeMetadata(m)),u.append("",o)):typeof FormData<"u"&&o instanceof FormData?(u=o,u.has("cacheControl")||u.append("cacheControl",d.cacheControl),m&&!u.has("metadata")&&u.append("metadata",this.encodeMetadata(m))):(u=o,p["cache-control"]=`max-age=${d.cacheControl}`,p["content-type"]=d.contentType,m&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!d.duplex&&(d.duplex="half")),l?.headers&&(p=Object.assign(Object.assign({},p),l.headers));const g=this._removeEmptyFolders(n),x=this._getFinalPath(g),v=yield(r=="PUT"?Tl:Ut)(this.fetch,`${this.url}/object/${x}`,u,Object.assign({headers:p},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:g,id:v.Id,fullPath:v.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Re(u))return{data:null,error:u};throw u}})}upload(r,n,o){return X(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,n,o)})}uploadToSignedUrl(r,n,o,l){return X(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),p=new URL(this.url+`/object/upload/sign/${d}`);p.searchParams.set("token",n);try{let m;const g=Object.assign({upsert:Nh.upsert},l),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&o instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",o)):typeof FormData<"u"&&o instanceof FormData?(m=o,m.append("cacheControl",g.cacheControl)):(m=o,x["cache-control"]=`max-age=${g.cacheControl}`,x["content-type"]=g.contentType);const v=yield Tl(this.fetch,p.toString(),m,{headers:x});return{data:{path:u,fullPath:v.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(Re(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(r,n){return X(this,void 0,void 0,function*(){try{let o=this._getFinalPath(r);const l=Object.assign({},this.headers);n?.upsert&&(l["x-upsert"]="true");const u=yield Ut(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:l}),d=new URL(this.url+u.url),p=d.searchParams.get("token");if(!p)throw new Gl("No token returned by API");return{data:{signedUrl:d.toString(),path:r,token:p},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Re(o))return{data:null,error:o};throw o}})}update(r,n,o){return X(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,n,o)})}move(r,n,o){return X(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Re(l))return{data:null,error:l};throw l}})}copy(r,n,o){return X(this,void 0,void 0,function*(){try{return{data:{path:(yield Ut(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Re(l))return{data:null,error:l};throw l}})}createSignedUrl(r,n,o){return X(this,void 0,void 0,function*(){try{let l=this._getFinalPath(r),u=yield Ut(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:n},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const d=o?.download?`&download=${o.download===!0?"":o.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${d}`)},{data:u,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Re(l))return{data:null,error:l};throw l}})}createSignedUrls(r,n,o){return X(this,void 0,void 0,function*(){try{const l=yield Ut(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:r},{headers:this.headers}),u=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:l.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${u}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Re(l))return{data:null,error:l};throw l}})}download(r,n){const l=typeof n?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(n?.transform||{}),d=u?`?${u}`:"",p=this._getFinalPath(r),m=()=>js(this.fetch,`${this.url}/${l}/${p}${d}`,{headers:this.headers,noResolveJson:!0});return new K0(m,this.shouldThrowOnError)}info(r){return X(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{const o=yield js(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Cl(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Re(o))return{data:null,error:o};throw o}})}exists(r){return X(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{return yield q0(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Re(o)&&o instanceof Nl){const l=o.originalError;if([400,404].includes(l?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(r,n){const o=this._getFinalPath(r),l=[],u=n?.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&l.push(u);const p=typeof n?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(n?.transform||{});m!==""&&l.push(m);let g=l.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${o}${g}`)}}}remove(r){return X(this,void 0,void 0,function*(){try{return{data:yield Ql(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Re(n))return{data:null,error:n};throw n}})}list(r,n,o){return X(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},G0),n),{prefix:r||""});return{data:yield Ut(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},o),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Re(l))return{data:null,error:l};throw l}})}listV2(r,n){return X(this,void 0,void 0,function*(){try{const o=Object.assign({},r);return{data:yield Ut(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},n),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Re(o))return{data:null,error:o};throw o}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const n=[];return r.width&&n.push(`width=${r.width}`),r.height&&n.push(`height=${r.height}`),r.resize&&n.push(`resize=${r.resize}`),r.format&&n.push(`format=${r.format}`),r.quality&&n.push(`quality=${r.quality}`),n.join("&")}}const Bf="2.84.0",Ff={"X-Client-Info":`storage-js/${Bf}`};class Q0{constructor(r,n={},o,l){this.shouldThrowOnError=!1;const u=new URL(r);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ff),n),this.fetch=Jl(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(r){return X(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(r);return{data:yield js(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Re(n))return{data:null,error:n};throw n}})}getBucket(r){return X(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Re(n))return{data:null,error:n};throw n}})}createBucket(r){return X(this,arguments,void 0,function*(n,o={public:!1}){try{return{data:yield Ut(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Re(l))return{data:null,error:l};throw l}})}updateBucket(r,n){return X(this,void 0,void 0,function*(){try{return{data:yield Tl(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Re(o))return{data:null,error:o};throw o}})}emptyBucket(r){return X(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Re(n))return{data:null,error:n};throw n}})}deleteBucket(r){return X(this,void 0,void 0,function*(){try{return{data:yield Ql(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Re(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(r){const n={};return r&&("limit"in r&&(n.limit=String(r.limit)),"offset"in r&&(n.offset=String(r.offset)),r.search&&(n.search=r.search),r.sortColumn&&(n.sortColumn=r.sortColumn),r.sortOrder&&(n.sortOrder=r.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class Y0{constructor(r,n={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ff),n),this.fetch=Jl(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return X(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/bucket`,{name:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Re(n))return{data:null,error:n};throw n}})}listBuckets(r){return X(this,void 0,void 0,function*(){try{const n=new URLSearchParams;r?.limit!==void 0&&n.set("limit",r.limit.toString()),r?.offset!==void 0&&n.set("offset",r.offset.toString()),r?.sortColumn&&n.set("sortColumn",r.sortColumn),r?.sortOrder&&n.set("sortOrder",r.sortOrder),r?.search&&n.set("search",r.search);const o=n.toString(),l=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield js(this.fetch,l,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Re(n))return{data:null,error:n};throw n}})}deleteBucket(r){return X(this,void 0,void 0,function*(){try{return{data:yield Ql(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Re(n))return{data:null,error:n};throw n}})}}const Yl={"X-Client-Info":`storage-js/${Bf}`,"Content-Type":"application/json"};class Vf extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function vt(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}class cl extends Vf{constructor(r,n,o){super(r),this.name="StorageVectorsApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class X0 extends Vf{constructor(r,n){super(r),this.name="StorageVectorsUnknownError",this.originalError=n}}var Ch;(function(i){i.InternalError="InternalError",i.S3VectorConflictException="S3VectorConflictException",i.S3VectorNotFoundException="S3VectorNotFoundException",i.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",i.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",i.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Ch||(Ch={}));const Xl=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),Z0=i=>{if(typeof i!="object"||i===null)return!1;const r=Object.getPrototypeOf(i);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Th=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),ey=(i,r,n)=>X(void 0,void 0,void 0,function*(){if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!n?.noResolveJson){const l=i.status||500,u=i;if(typeof u.json=="function")u.json().then(d=>{const p=d?.statusCode||d?.code||l+"";r(new cl(Th(d),l,p))}).catch(()=>{const d=l+"",p=u.statusText||`HTTP ${l} error`;r(new cl(p,l,d))});else{const d=l+"",p=u.statusText||`HTTP ${l} error`;r(new cl(p,l,d))}}else r(new X0(Th(i),i))}),ty=(i,r,n,o)=>{const l={method:i,headers:r?.headers||{}};return o?(Z0(o)?(l.headers=Object.assign({"Content-Type":"application/json"},r?.headers),l.body=JSON.stringify(o)):l.body=o,Object.assign(Object.assign({},l),n)):l};function ry(i,r,n,o,l,u){return X(this,void 0,void 0,function*(){return new Promise((d,p)=>{i(n,ty(r,o,l,u)).then(m=>{if(!m.ok)throw m;if(o?.noResolveJson)return m;const g=m.headers.get("content-type");return!g||!g.includes("application/json")?{}:m.json()}).then(m=>d(m)).catch(m=>ey(m,p,o))})})}function wt(i,r,n,o,l){return X(this,void 0,void 0,function*(){return ry(i,"POST",r,o,l,n)})}class ny{constructor(r,n={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yl),n),this.fetch=Xl(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(r){return X(this,void 0,void 0,function*(){try{return{data:(yield wt(this.fetch,`${this.url}/CreateIndex`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}getIndex(r,n){return X(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:r,indexName:n},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(vt(o))return{data:null,error:o};throw o}})}listIndexes(r){return X(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/ListIndexes`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}deleteIndex(r,n){return X(this,void 0,void 0,function*(){try{return{data:(yield wt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:r,indexName:n},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(vt(o))return{data:null,error:o};throw o}})}}class sy{constructor(r,n={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yl),n),this.fetch=Xl(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(r){return X(this,void 0,void 0,function*(){try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield wt(this.fetch,`${this.url}/PutVectors`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}getVectors(r){return X(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/GetVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}listVectors(r){return X(this,void 0,void 0,function*(){try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:yield wt(this.fetch,`${this.url}/ListVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}queryVectors(r){return X(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/QueryVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}deleteVectors(r){return X(this,void 0,void 0,function*(){try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield wt(this.fetch,`${this.url}/DeleteVectors`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}}class iy{constructor(r,n={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yl),n),this.fetch=Xl(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return X(this,void 0,void 0,function*(){try{return{data:(yield wt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}getBucket(r){return X(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}listBuckets(){return X(this,arguments,void 0,function*(r={}){try{return{data:yield wt(this.fetch,`${this.url}/ListVectorBuckets`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}deleteBucket(r){return X(this,void 0,void 0,function*(){try{return{data:(yield wt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vt(n))return{data:null,error:n};throw n}})}}class oy extends iy{constructor(r,n={}){super(r,n.headers||{},n.fetch)}from(r){return new ay(this.url,this.headers,r,this.fetch)}}class ay extends ny{constructor(r,n,o,l){super(r,n,l),this.vectorBucketName=o}createIndex(r){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return X(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const r=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return X(this,arguments,void 0,function*(n={}){return r.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(r){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return X(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,r)})}deleteIndex(r){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return X(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,r)})}index(r){return new ly(this.url,this.headers,this.vectorBucketName,r,this.fetch)}}class ly extends sy{constructor(r,n,o,l,u){super(r,n,u),this.vectorBucketName=o,this.indexName=l}putVectors(r){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return X(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(r){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return X(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const r=Object.create(null,{listVectors:{get:()=>super.listVectors}});return X(this,arguments,void 0,function*(n={}){return r.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(r){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return X(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(r){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return X(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class uy extends Q0{constructor(r,n={},o,l){super(r,n,o,l)}from(r){return new J0(this.url,this.headers,r,this.fetch)}get vectors(){return new oy(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Y0(this.url+"/iceberg",this.headers,this.fetch)}}const cy="2.84.0";let vs="";typeof Deno<"u"?vs="deno":typeof document<"u"?vs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vs="react-native":vs="node";const dy={"X-Client-Info":`supabase-js-${vs}/${cy}`},hy={headers:dy},fy={schema:"public"},py={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},my={},gy=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),yy=()=>Headers,vy=(i,r,n)=>{const o=gy(n),l=yy();return async(u,d)=>{var p;const m=(p=await r())!==null&&p!==void 0?p:i;let g=new l(d?.headers);return g.has("apikey")||g.set("apikey",i),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),o(u,Object.assign(Object.assign({},d),{headers:g}))}};function wy(i){return i.endsWith("/")?i:i+"/"}function xy(i,r){var n,o;const{db:l,auth:u,realtime:d,global:p}=i,{db:m,auth:g,realtime:x,global:v}=r,_={db:Object.assign(Object.assign({},m),l),auth:Object.assign(Object.assign({},g),u),realtime:Object.assign(Object.assign({},x),d),storage:{},global:Object.assign(Object.assign(Object.assign({},v),p),{headers:Object.assign(Object.assign({},(n=v?.headers)!==null&&n!==void 0?n:{}),(o=p?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return i.accessToken?_.accessToken=i.accessToken:delete _.accessToken,_}function _y(i){const r=i?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(wy(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Wf="2.84.0",jn=30*1e3,Pl=3,dl=Pl*jn,by="http://localhost:9999",jy="supabase.auth.token",Sy={"X-Client-Info":`gotrue-js/${Wf}`},Ol="X-Supabase-Api-Version",qf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ky=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ey=600*1e3;class Ss extends Error{constructor(r,n,o){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=o}}function ee(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class Ny extends Ss{constructor(r,n,o){super(r,n,o),this.name="AuthApiError",this.status=n,this.code=o}}function Cy(i){return ee(i)&&i.name==="AuthApiError"}class Wr extends Ss{constructor(r,n){super(r),this.name="AuthUnknownError",this.originalError=n}}class kr extends Ss{constructor(r,n,o,l){super(r,o,l),this.name=n,this.status=o}}class yt extends kr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ty(i){return ee(i)&&i.name==="AuthSessionMissingError"}class vn extends kr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hi extends kr{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Ki extends kr{constructor(r,n=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Py(i){return ee(i)&&i.name==="AuthImplicitGrantRedirectError"}class Ph extends kr{constructor(r,n=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rl extends kr{constructor(r,n){super(r,"AuthRetryableFetchError",n,void 0)}}function hl(i){return ee(i)&&i.name==="AuthRetryableFetchError"}class Oh extends kr{constructor(r,n,o){super(r,"AuthWeakPasswordError",n,"weak_password"),this.reasons=o}}class Al extends kr{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const Xi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Rh=` 	
\r=`.split(""),Oy=(()=>{const i=new Array(128);for(let r=0;r<i.length;r+=1)i[r]=-1;for(let r=0;r<Rh.length;r+=1)i[Rh[r].charCodeAt(0)]=-2;for(let r=0;r<Xi.length;r+=1)i[Xi[r].charCodeAt(0)]=r;return i})();function Ah(i,r,n){if(i!==null)for(r.queue=r.queue<<8|i,r.queuedBits+=8;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;n(Xi[o]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;n(Xi[o]),r.queuedBits-=6}}function Hf(i,r,n){const o=Oy[i];if(o>-1)for(r.queue=r.queue<<6|o,r.queuedBits+=6;r.queuedBits>=8;)n(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Ih(i){const r=[],n=d=>{r.push(String.fromCodePoint(d))},o={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=d=>{Iy(d,o,n)};for(let d=0;d<i.length;d+=1)Hf(i.charCodeAt(d),l,u);return r.join("")}function Ry(i,r){if(i<=127){r(i);return}else if(i<=2047){r(192|i>>6),r(128|i&63);return}else if(i<=65535){r(224|i>>12),r(128|i>>6&63),r(128|i&63);return}else if(i<=1114111){r(240|i>>18),r(128|i>>12&63),r(128|i>>6&63),r(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function Ay(i,r){for(let n=0;n<i.length;n+=1){let o=i.charCodeAt(n);if(o>55295&&o<=56319){const l=(o-55296)*1024&65535;o=(i.charCodeAt(n+1)-56320&65535|l)+65536,n+=1}Ry(o,r)}}function Iy(i,r,n){if(r.utf8seq===0){if(i<=127){n(i);return}for(let o=1;o<6;o+=1)if((i>>7-o&1)===0){r.utf8seq=o;break}if(r.utf8seq===2)r.codepoint=i&31;else if(r.utf8seq===3)r.codepoint=i&15;else if(r.utf8seq===4)r.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|i&63,r.utf8seq-=1,r.utf8seq===0&&n(r.codepoint)}}function kn(i){const r=[],n={queue:0,queuedBits:0},o=l=>{r.push(l)};for(let l=0;l<i.length;l+=1)Hf(i.charCodeAt(l),n,o);return new Uint8Array(r)}function Ly(i){const r=[];return Ay(i,n=>r.push(n)),new Uint8Array(r)}function qr(i){const r=[],n={queue:0,queuedBits:0},o=l=>{r.push(l)};return i.forEach(l=>Ah(l,n,o)),Ah(null,n,o),r.join("")}function Uy(i){return Math.round(Date.now()/1e3)+i}function $y(){return Symbol("auth-callback")}const Je=()=>typeof window<"u"&&typeof document<"u",Mr={tested:!1,writable:!1},Kf=()=>{if(!Je())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Mr.tested)return Mr.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Mr.tested=!0,Mr.writable=!0}catch{Mr.tested=!0,Mr.writable=!1}return Mr.writable};function Dy(i){const r={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((l,u)=>{r[u]=l})}catch{}return n.searchParams.forEach((o,l)=>{r[l]=o}),r}const Gf=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),My=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Sn=async(i,r,n)=>{await i.setItem(r,JSON.stringify(n))},zr=async(i,r)=>{const n=await i.getItem(r);if(!n)return null;try{return JSON.parse(n)}catch{return n}},wr=async(i,r)=>{await i.removeItem(r)};class oo{constructor(){this.promise=new oo.promiseConstructor((r,n)=>{this.resolve=r,this.reject=n})}}oo.promiseConstructor=Promise;function fl(i){const r=i.split(".");if(r.length!==3)throw new Al("Invalid JWT structure");for(let o=0;o<r.length;o++)if(!ky.test(r[o]))throw new Al("JWT not in base64url format");return{header:JSON.parse(Ih(r[0])),payload:JSON.parse(Ih(r[1])),signature:kn(r[2]),raw:{header:r[0],payload:r[1]}}}async function zy(i){return await new Promise(r=>{setTimeout(()=>r(null),i)})}function By(i,r){return new Promise((o,l)=>{(async()=>{for(let u=0;u<1/0;u++)try{const d=await i(u);if(!r(u,null,d)){o(d);return}}catch(d){if(!r(u,d)){l(d);return}}})()})}function Fy(i){return("0"+i.toString(16)).substr(-2)}function Vy(){const r=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=n.length;let l="";for(let u=0;u<56;u++)l+=n.charAt(Math.floor(Math.random()*o));return l}return crypto.getRandomValues(r),Array.from(r,Fy).join("")}async function Wy(i){const n=new TextEncoder().encode(i),o=await crypto.subtle.digest("SHA-256",n),l=new Uint8Array(o);return Array.from(l).map(u=>String.fromCharCode(u)).join("")}async function qy(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await Wy(i);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wn(i,r,n=!1){const o=Vy();let l=o;n&&(l+="/PASSWORD_RECOVERY"),await Sn(i,`${r}-code-verifier`,l);const u=await qy(o);return[u,o===u?"plain":"s256"]}const Hy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ky(i){const r=i.headers.get(Ol);if(!r||!r.match(Hy))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function Gy(i){if(!i)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(i<=r)throw new Error("JWT has expired")}function Jy(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Qy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xn(i){if(!Qy.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function pl(){const i={};return new Proxy(i,{get:(r,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Yy(i,r){return new Proxy(i,{get:(n,o,l)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const u=o.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,o,l)}return!r.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(n,o,l)}})}function Lh(i){return JSON.parse(JSON.stringify(i))}const Br=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Xy=[502,503,504];async function Uh(i){var r;if(!My(i))throw new Rl(Br(i),0);if(Xy.includes(i.status))throw new Rl(Br(i),i.status);let n;try{n=await i.json()}catch(u){throw new Wr(Br(u),u)}let o;const l=Ky(i);if(l&&l.getTime()>=qf["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?o=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(o=n.error_code),o){if(o==="weak_password")throw new Oh(Br(n),i.status,((r=n.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(o==="session_not_found")throw new yt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,d)=>u&&typeof d=="string",!0))throw new Oh(Br(n),i.status,n.weak_password.reasons);throw new Ny(Br(n),i.status||500,o)}const Zy=(i,r,n,o)=>{const l={method:i,headers:r?.headers||{}};return i==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),l.body=JSON.stringify(o),Object.assign(Object.assign({},l),n))};async function ie(i,r,n,o){var l;const u=Object.assign({},o?.headers);u[Ol]||(u[Ol]=qf["2024-01-01"].name),o?.jwt&&(u.Authorization=`Bearer ${o.jwt}`);const d=(l=o?.query)!==null&&l!==void 0?l:{};o?.redirectTo&&(d.redirect_to=o.redirectTo);const p=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",m=await ev(i,r,n+p,{headers:u,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(m):{data:Object.assign({},m),error:null}}async function ev(i,r,n,o,l,u){const d=Zy(r,o,l,u);let p;try{p=await i(n,Object.assign({},d))}catch(m){throw console.error(m),new Rl(Br(m),0)}if(p.ok||await Uh(p),o?.noResolveJson)return p;try{return await p.json()}catch(m){await Uh(m)}}function Lt(i){var r;let n=null;nv(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=Uy(i.expires_in)));const o=(r=i.user)!==null&&r!==void 0?r:i;return{data:{session:n,user:o},error:null}}function $h(i){const r=Lt(i);return!r.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0)&&(r.data.weak_password=i.weak_password),r}function xr(i){var r;return{data:{user:(r=i.user)!==null&&r!==void 0?r:i},error:null}}function tv(i){return{data:i,error:null}}function rv(i){const{action_link:r,email_otp:n,hashed_token:o,redirect_to:l,verification_type:u}=i,d=Pn(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:r,email_otp:n,hashed_token:o,redirect_to:l,verification_type:u},m=Object.assign({},d);return{data:{properties:p,user:m},error:null}}function Dh(i){return i}function nv(i){return i.access_token&&i.refresh_token&&i.expires_in}const ml=["global","local","others"];class sv{constructor({url:r="",headers:n={},fetch:o}){this.url=r,this.headers=n,this.fetch=Gf(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,n=ml[0]){if(ml.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ml.join(", ")}`);try{return await ie(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(o){if(ee(o))return{data:null,error:o};throw o}}async inviteUserByEmail(r,n={}){try{return await ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:xr})}catch(o){if(ee(o))return{data:{user:null},error:o};throw o}}async generateLink(r){try{const{options:n}=r,o=Pn(r,["options"]),l=Object.assign(Object.assign({},o),n);return"newEmail"in o&&(l.new_email=o?.newEmail,delete l.newEmail),await ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:rv,redirectTo:n?.redirectTo})}catch(n){if(ee(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(r){try{return await ie(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:xr})}catch(n){if(ee(n))return{data:{user:null},error:n};throw n}}async listUsers(r){var n,o,l,u,d,p,m;try{const g={nextPage:null,lastPage:0,total:0},x=await ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(u=(l=r?.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:Dh});if(x.error)throw x.error;const v=await x.json(),_=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,S=(m=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(E=>{const j=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(E.split(";")[1].split("=")[1]);g[`${w}Page`]=j}),g.total=parseInt(_)),{data:Object.assign(Object.assign({},v),g),error:null}}catch(g){if(ee(g))return{data:{users:[]},error:g};throw g}}async getUserById(r){xn(r);try{return await ie(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:xr})}catch(n){if(ee(n))return{data:{user:null},error:n};throw n}}async updateUserById(r,n){xn(r);try{return await ie(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:n,headers:this.headers,xform:xr})}catch(o){if(ee(o))return{data:{user:null},error:o};throw o}}async deleteUser(r,n=!1){xn(r);try{return await ie(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:n},xform:xr})}catch(o){if(ee(o))return{data:{user:null},error:o};throw o}}async _listFactors(r){xn(r.userId);try{const{data:n,error:o}=await ie(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:n,error:o}}catch(n){if(ee(n))return{data:null,error:n};throw n}}async _deleteFactor(r){xn(r.userId),xn(r.id);try{return{data:await ie(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}}async _listOAuthClients(r){var n,o,l,u,d,p,m;try{const g={nextPage:null,lastPage:0,total:0},x=await ie(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(u=(l=r?.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:Dh});if(x.error)throw x.error;const v=await x.json(),_=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,S=(m=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(E=>{const j=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(E.split(";")[1].split("=")[1]);g[`${w}Page`]=j}),g.total=parseInt(_)),{data:Object.assign(Object.assign({},v),g),error:null}}catch(g){if(ee(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(r){try{return await ie(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ee(n))return{data:null,error:n};throw n}}async _getOAuthClient(r){try{return await ie(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ee(n))return{data:null,error:n};throw n}}async _updateOAuthClient(r,n){try{return await ie(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:n,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(ee(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(r){try{return await ie(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(r){try{return await ie(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ee(n))return{data:null,error:n};throw n}}}function Mh(i={}){return{getItem:r=>i[r]||null,setItem:(r,n)=>{i[r]=n},removeItem:r=>{delete i[r]}}}const _n={debug:!!(globalThis&&Kf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jf extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class iv extends Jf{}async function ov(i,r,n){_n.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,r);const o=new globalThis.AbortController;return r>0&&setTimeout(()=>{o.abort(),_n.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async l=>{if(l){_n.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,l.name);try{return await n()}finally{_n.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,l.name)}}else{if(r===0)throw _n.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new iv(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(_n.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function av(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Qf(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function lv(i){return parseInt(i,16)}function uv(i){const r=new TextEncoder().encode(i);return"0x"+Array.from(r,o=>o.toString(16).padStart(2,"0")).join("")}function cv(i){var r;const{chainId:n,domain:o,expirationTime:l,issuedAt:u=new Date,nonce:d,notBefore:p,requestId:m,resources:g,scheme:x,uri:v,version:_}=i;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((r=i.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const S=Qf(i.address),E=x?`${x}://${o}`:o,j=i.statement?`${i.statement}
`:"",w=`${E} wants you to sign in with your Ethereum account:
${S}

${j}`;let O=`URI: ${v}
Version: ${_}
Chain ID: ${n}${d?`
Nonce: ${d}`:""}
Issued At: ${u.toISOString()}`;if(l&&(O+=`
Expiration Time: ${l.toISOString()}`),p&&(O+=`
Not Before: ${p.toISOString()}`),m&&(O+=`
Request ID: ${m}`),g){let L=`
Resources:`;for(const R of g){if(!R||typeof R!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${R}`);L+=`
- ${R}`}O+=L}return`${w}
${O}`}class ze extends Error{constructor({message:r,code:n,cause:o,name:l}){var u;super(r,{cause:o}),this.__isWebAuthnError=!0,this.name=(u=l??(o instanceof Error?o.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=n}}class Zi extends ze{constructor(r,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:r}),this.name="WebAuthnUnknownError",this.originalError=n}}function dv({error:i,options:r}){var n,o,l;const{publicKey:u}=r;if(!u)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(r.signal instanceof AbortSignal)return new ze({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((n=u.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ze({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(r.mediation==="conditional"&&((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ze({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((l=u.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new ze({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new ze({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new ze({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return u.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new ze({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new ze({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const d=window.location.hostname;if(Yf(d)){if(u.rp.id!==d)return new ze({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new ze({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new ze({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function hv({error:i,options:r}){const{publicKey:n}=r;if(!n)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(r.signal instanceof AbortSignal)return new ze({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new ze({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const o=window.location.hostname;if(Yf(o)){if(n.rpId!==o)return new ze({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new ze({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class fv{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const pv=new fv;function mv(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:r,user:n,excludeCredentials:o}=i,l=Pn(i,["challenge","user","excludeCredentials"]),u=kn(r).buffer,d=Object.assign(Object.assign({},n),{id:kn(n.id).buffer}),p=Object.assign(Object.assign({},l),{challenge:u,user:d});if(o&&o.length>0){p.excludeCredentials=new Array(o.length);for(let m=0;m<o.length;m++){const g=o[m];p.excludeCredentials[m]=Object.assign(Object.assign({},g),{id:kn(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return p}function gv(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:r,allowCredentials:n}=i,o=Pn(i,["challenge","allowCredentials"]),l=kn(r).buffer,u=Object.assign(Object.assign({},o),{challenge:l});if(n&&n.length>0){u.allowCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const p=n[d];u.allowCredentials[d]=Object.assign(Object.assign({},p),{id:kn(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function yv(i){var r;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i;return{id:i.id,rawId:i.id,response:{attestationObject:qr(new Uint8Array(i.response.attestationObject)),clientDataJSON:qr(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function vv(i){var r;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i,o=i.getClientExtensionResults(),l=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:qr(new Uint8Array(l.authenticatorData)),clientDataJSON:qr(new Uint8Array(l.clientDataJSON)),signature:qr(new Uint8Array(l.signature)),userHandle:l.userHandle?qr(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Yf(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function zh(){var i,r;return!!(Je()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function wv(i){try{const r=await navigator.credentials.create(i);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Zi("Browser returned unexpected credential type",r)}:{data:null,error:new Zi("Empty credential response",r)}}catch(r){return{data:null,error:dv({error:r,options:i})}}}async function xv(i){try{const r=await navigator.credentials.get(i);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Zi("Browser returned unexpected credential type",r)}:{data:null,error:new Zi("Empty credential response",r)}}catch(r){return{data:null,error:hv({error:r,options:i})}}}const _v={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},bv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function eo(...i){const r=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),n=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),o={};for(const l of i)if(l)for(const u in l){const d=l[u];if(d!==void 0)if(Array.isArray(d))o[u]=d;else if(n(d))o[u]=d;else if(r(d)){const p=o[u];r(p)?o[u]=eo(p,d):o[u]=eo(d)}else o[u]=d}return o}function jv(i,r){return eo(_v,i,r||{})}function Sv(i,r){return eo(bv,i,r||{})}class kv{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:n,friendlyName:o,signal:l},u){try{const{data:d,error:p}=await this.client.mfa.challenge({factorId:r,webauthn:n});if(!d)return{data:null,error:p};const m=l??pv.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:g}=d.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${o}`),g.displayName||(g.displayName=g.name)}switch(d.webauthn.type){case"create":{const g=jv(d.webauthn.credential_options.publicKey,u?.create),{data:x,error:v}=await wv({publicKey:g,signal:m});return x?{data:{factorId:r,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:v}}case"request":{const g=Sv(d.webauthn.credential_options.publicKey,u?.request),{data:x,error:v}=await xv(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:g,signal:m}));return x?{data:{factorId:r,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:v}}}}catch(d){return ee(d)?{data:null,error:d}:{data:null,error:new Wr("Unexpected error in challenge",d)}}}async _verify({challengeId:r,factorId:n,webauthn:o}){return this.client.mfa.verify({factorId:n,challengeId:r,webauthn:o})}async _authenticate({factorId:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},u){if(!n)return{data:null,error:new Ss("rpId is required for WebAuthn authentication")};try{if(!zh())return{data:null,error:new Wr("Browser does not support WebAuthn",null)};const{data:d,error:p}=await this.challenge({factorId:r,webauthn:{rpId:n,rpOrigins:o},signal:l},{request:u});if(!d)return{data:null,error:p};const{webauthn:m}=d;return this._verify({factorId:r,challengeId:d.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:o,credential_response:m.credential_response}})}catch(d){return ee(d)?{data:null,error:d}:{data:null,error:new Wr("Unexpected error in authenticate",d)}}}async _register({friendlyName:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},u){if(!n)return{data:null,error:new Ss("rpId is required for WebAuthn registration")};try{if(!zh())return{data:null,error:new Wr("Browser does not support WebAuthn",null)};const{data:d,error:p}=await this._enroll({friendlyName:r});if(!d)return await this.client.mfa.listFactors().then(x=>{var v;return(v=x.data)===null||v===void 0?void 0:v.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===r&&_.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x?.id}):void 0),{data:null,error:p};const{data:m,error:g}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:n,rpOrigins:o},signal:l},{create:u});return m?this._verify({factorId:d.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:o,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:g}}catch(d){return ee(d)?{data:null,error:d}:{data:null,error:new Wr("Unexpected error in register",d)}}}}av();const Ev={url:by,storageKey:jy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Sy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Bh(i,r,n){return await n()}const bn={};class ks{get jwks(){var r,n;return(n=(r=bn[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(r){bn[this.storageKey]=Object.assign(Object.assign({},bn[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,n;return(n=(r=bn[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){bn[this.storageKey]=Object.assign(Object.assign({},bn[this.storageKey]),{cachedAt:r})}constructor(r){var n,o,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},Ev),r);if(this.storageKey=u.storageKey,this.instanceID=(n=ks.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,ks.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&Je()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new sv({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Gf(u.fetch),this.lock=u.lock||Bh,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:Je()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=ov:this.lock=Bh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new kv(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:Kf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mh(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Mh(this.memoryStorage)),Je()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Wf}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let n={},o="none";if(Je()&&(n=Dy(window.location.href),this._isImplicitGrantCallback(n)?o="implicit":await this._isPKCECallback(n)&&(o="pkce")),Je()&&this.detectSessionInUrl&&o!=="none"){const{data:l,error:u}=await this._getSessionFromURL(n,o);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Py(u)){const m=(r=u.details)===null||r===void 0?void 0:r.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:d,redirectType:p}=l;return this._debug("#_initialize()","detected session in URL",d,"redirect type",p),await this._saveSession(d),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ee(n)?this._returnResult({error:n}):this._returnResult({error:new Wr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var n,o,l;try{const u=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(n=r?.options)===null||n===void 0?void 0:n.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(l=r?.options)===null||l===void 0?void 0:l.captchaToken}},xform:Lt}),{data:d,error:p}=u;if(p||!d)return this._returnResult({data:{user:null,session:null},error:p});const m=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(u){if(ee(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(r){var n,o,l;try{let u;if("email"in r){const{email:x,password:v,options:_}=r;let S=null,E=null;this.flowType==="pkce"&&([S,E]=await wn(this.storage,this.storageKey)),u=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:x,password:v,data:(n=_?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:S,code_challenge_method:E},xform:Lt})}else if("phone"in r){const{phone:x,password:v,options:_}=r;u=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:v,data:(o=_?.data)!==null&&o!==void 0?o:{},channel:(l=_?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:Lt})}else throw new Hi("You must provide either an email or phone number and a password");const{data:d,error:p}=u;if(p||!d)return this._returnResult({data:{user:null,session:null},error:p});const m=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(u){if(ee(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(r){try{let n;if("email"in r){const{email:u,password:d,options:p}=r;n=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:d,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:$h})}else if("phone"in r){const{phone:u,password:d,options:p}=r;n=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:d,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:$h})}else throw new Hi("You must provide either an email or phone number and a password");const{data:o,error:l}=n;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const u=new vn;return this._returnResult({data:{user:null,session:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:l})}catch(n){if(ee(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(r){var n,o,l,u;return await this._handleProviderSignIn(r.provider,{redirectTo:(n=r.options)===null||n===void 0?void 0:n.redirectTo,scopes:(o=r.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=r.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=r.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:n}=r;switch(n){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(r){var n,o,l,u,d,p,m,g,x,v,_;let S,E;if("message"in r)S=r.message,E=r.signature;else{const{chain:j,wallet:w,statement:O,options:L}=r;let R;if(Je())if(typeof w=="object")R=w;else{const J=window;if("ethereum"in J&&typeof J.ethereum=="object"&&"request"in J.ethereum&&typeof J.ethereum.request=="function")R=J.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=w}const U=new URL((n=L?.url)!==null&&n!==void 0?n:window.location.href),F=await R.request({method:"eth_requestAccounts"}).then(J=>J).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!F||F.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const W=Qf(F[0]);let Z=(o=L?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!Z){const J=await R.request({method:"eth_chainId"});Z=lv(J)}const se={domain:U.host,address:W,statement:O,uri:U.href,version:"1",chainId:Z,nonce:(l=L?.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(d=(u=L?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(p=L?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=L?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(g=L?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(x=L?.signInWithEthereum)===null||x===void 0?void 0:x.resources};S=cv(se),E=await R.request({method:"personal_sign",params:[uv(S),W]})}try{const{data:j,error:w}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:E},!((v=r.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(_=r.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Lt});if(w)throw w;if(!j||!j.session||!j.user){const O=new vn;return this._returnResult({data:{user:null,session:null},error:O})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:w})}catch(j){if(ee(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async signInWithSolana(r){var n,o,l,u,d,p,m,g,x,v,_,S;let E,j;if("message"in r)E=r.message,j=r.signature;else{const{chain:w,wallet:O,statement:L,options:R}=r;let U;if(Je())if(typeof O=="object")U=O;else{const W=window;if("solana"in W&&typeof W.solana=="object"&&("signIn"in W.solana&&typeof W.solana.signIn=="function"||"signMessage"in W.solana&&typeof W.solana.signMessage=="function"))U=W.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=O}const F=new URL((n=R?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in U&&U.signIn){const W=await U.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R?.signInWithSolana),{version:"1",domain:F.host,uri:F.href}),L?{statement:L}:null));let Z;if(Array.isArray(W)&&W[0]&&typeof W[0]=="object")Z=W[0];else if(W&&typeof W=="object"&&"signedMessage"in W&&"signature"in W)Z=W;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Z&&"signature"in Z&&(typeof Z.signedMessage=="string"||Z.signedMessage instanceof Uint8Array)&&Z.signature instanceof Uint8Array)E=typeof Z.signedMessage=="string"?Z.signedMessage:new TextDecoder().decode(Z.signedMessage),j=Z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in U)||typeof U.signMessage!="function"||!("publicKey"in U)||typeof U!="object"||!U.publicKey||!("toBase58"in U.publicKey)||typeof U.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${F.host} wants you to sign in with your Solana account:`,U.publicKey.toBase58(),...L?["",L,""]:[""],"Version: 1",`URI: ${F.href}`,`Issued At: ${(l=(o=R?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=R?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((d=R?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((p=R?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((m=R?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((g=R?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((v=(x=R?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||v===void 0)&&v.length?["Resources",...R.signInWithSolana.resources.map(Z=>`- ${Z}`)]:[]].join(`
`);const W=await U.signMessage(new TextEncoder().encode(E),"utf8");if(!W||!(W instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=W}}try{const{data:w,error:O}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:qr(j)},!((_=r.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(S=r.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Lt});if(O)throw O;if(!w||!w.session||!w.user){const L=new vn;return this._returnResult({data:{user:null,session:null},error:L})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:O})}catch(w){if(ee(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(r){const n=await zr(this.storage,`${this.storageKey}-code-verifier`),[o,l]=(n??"").split("/");try{const{data:u,error:d}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:o},xform:Lt});if(await wr(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!u||!u.session||!u.user){const p=new vn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:l??null}),error:d})}catch(u){if(ee(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(r){try{const{options:n,provider:o,token:l,access_token:u,nonce:d}=r,p=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:l,access_token:u,nonce:d,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Lt}),{data:m,error:g}=p;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m||!m.session||!m.user){const x=new vn;return this._returnResult({data:{user:null,session:null},error:x})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:g})}catch(n){if(ee(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(r){var n,o,l,u,d;try{if("email"in r){const{email:p,options:m}=r;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await wn(this.storage,this.storageKey));const{error:v}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(n=m?.data)!==null&&n!==void 0?n:{},create_user:(o=m?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:x},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in r){const{phone:p,options:m}=r,{data:g,error:x}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(l=m?.data)!==null&&l!==void 0?l:{},create_user:(u=m?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(d=m?.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:x})}throw new Hi("You must provide either an email or phone number.")}catch(p){if(ee(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(r){var n,o;try{let l,u;"options"in r&&(l=(n=r.options)===null||n===void 0?void 0:n.redirectTo,u=(o=r.options)===null||o===void 0?void 0:o.captchaToken);const{data:d,error:p}=await ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:Lt});if(p)throw p;if(!d)throw new Error("An error occurred on token verification.");const m=d.session,g=d.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(l){if(ee(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(r){var n,o,l,u,d;try{let p=null,m=null;this.flowType==="pkce"&&([p,m]=await wn(this.storage,this.storageKey));const g=await ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(o=(n=r.options)===null||n===void 0?void 0:n.redirectTo)!==null&&o!==void 0?o:void 0}),!((l=r?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:m}),headers:this.headers,xform:tv});return!((u=g.data)===null||u===void 0)&&u.url&&Je()&&!(!((d=r.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(p){if(ee(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;if(o)throw o;if(!n)throw new yt;const{error:l}=await ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(r){if(ee(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const n=`${this.url}/resend`;if("email"in r){const{email:o,type:l,options:u}=r,{error:d}=await ie(this.fetch,"POST",n,{headers:this.headers,body:{email:o,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in r){const{phone:o,type:l,options:u}=r,{data:d,error:p}=await ie(this.fetch,"POST",n,{headers:this.headers,body:{phone:o,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:p})}throw new Hi("You must provide either an email or phone number and a type")}catch(n){if(ee(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(r,n){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await o,await n()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=n();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await r(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const n=await zr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?r=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const o=r.expires_at?r.expires_at*1e3-Date.now()<dl:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",r.expires_at),!o){if(this.userStorage){const d=await zr(this.userStorage,this.storageKey+"-user");d?.user?r.user=d.user:r.user=pl()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};r.user=Yy(r.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:l,error:u}=await this._callRefreshToken(r.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){return r?await this._getUser(r):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(r){try{return r?await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:xr}):await this._useSession(async n=>{var o,l,u;const{data:d,error:p}=n;if(p)throw p;return!(!((o=d.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yt}:await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:xr})})}catch(n){if(ee(n))return Ty(n)&&(await this._removeSession(),await wr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(r,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,n))}async _updateUser(r,n={}){try{return await this._useSession(async o=>{const{data:l,error:u}=o;if(u)throw u;if(!l.session)throw new yt;const d=l.session;let p=null,m=null;this.flowType==="pkce"&&r.email!=null&&([p,m]=await wn(this.storage,this.storageKey));const{data:g,error:x}=await ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:p,code_challenge_method:m}),jwt:d.access_token,xform:xr});if(x)throw x;return d.user=g.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(o){if(ee(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new yt;const n=Date.now()/1e3;let o=n,l=!0,u=null;const{payload:d}=fl(r.access_token);if(d.exp&&(o=d.exp,l=o<=n),l){const{data:p,error:m}=await this._callRefreshToken(r.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:m}=await this._getUser(r.access_token);if(m)throw m;u={access_token:r.access_token,refresh_token:r.refresh_token,user:p.user,token_type:"bearer",expires_in:o-n,expires_at:o},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(n){if(ee(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async n=>{var o;if(!r){const{data:d,error:p}=n;if(p)throw p;r=(o=d.session)!==null&&o!==void 0?o:void 0}if(!r?.refresh_token)throw new yt;const{data:l,error:u}=await this._callRefreshToken(r.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ee(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(r,n){try{if(!Je())throw new Ki("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Ki(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ph("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ki("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new Ph("No code detected.");const{data:L,error:R}=await this._exchangeCodeForSession(r.code);if(R)throw R;const U=new URL(window.location.href);return U.searchParams.delete("code"),window.history.replaceState(window.history.state,"",U.toString()),{data:{session:L.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:l,access_token:u,refresh_token:d,expires_in:p,expires_at:m,token_type:g}=r;if(!u||!p||!d||!g)throw new Ki("No session defined in URL");const x=Math.round(Date.now()/1e3),v=parseInt(p);let _=x+v;m&&(_=parseInt(m));const S=_-x;S*1e3<=jn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${v}s`);const E=_-v;x-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,_,x):x-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,_,x);const{data:j,error:w}=await this._getUser(u);if(w)throw w;const O={provider_token:o,provider_refresh_token:l,access_token:u,expires_in:v,expires_at:_,refresh_token:d,token_type:g,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:O,redirectType:r.type},error:null})}catch(o){if(ee(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const n=await zr(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&n)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async n=>{var o;const{data:l,error:u}=n;if(u)return this._returnResult({error:u});const d=(o=l.session)===null||o===void 0?void 0:o.access_token;if(d){const{error:p}=await this.admin.signOut(d,r);if(p&&!(Cy(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return r!=="others"&&(await this._removeSession(),await wr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const n=$y(),o={id:n,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:o}}}async _emitInitialSession(r){return await this._useSession(async n=>{var o,l;try{const{data:{session:u},error:d}=n;if(d)throw d;await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",r,"session",u)}catch(u){await((l=this.stateChangeEmitters.get(r))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",u),console.error(u)}})}async resetPasswordForEmail(r,n={}){let o=null,l=null;this.flowType==="pkce"&&([o,l]=await wn(this.storage,this.storageKey,!0));try{return await ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:o,code_challenge_method:l,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(ee(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var r;try{const{data:n,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(r=n.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(n){if(ee(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var n;try{const{data:o,error:l}=await this._useSession(async u=>{var d,p,m,g,x;const{data:v,error:_}=u;if(_)throw _;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(d=r.options)===null||d===void 0?void 0:d.redirectTo,scopes:(p=r.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=r.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await ie(this.fetch,"GET",S,{headers:this.headers,jwt:(x=(g=v.session)===null||g===void 0?void 0:g.access_token)!==null&&x!==void 0?x:void 0})});if(l)throw l;return Je()&&!(!((n=r.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:r.provider,url:o?.url},error:null})}catch(o){if(ee(o))return this._returnResult({data:{provider:r.provider,url:null},error:o});throw o}}async linkIdentityIdToken(r){return await this._useSession(async n=>{var o;try{const{error:l,data:{session:u}}=n;if(l)throw l;const{options:d,provider:p,token:m,access_token:g,nonce:x}=r,v=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=u?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:p,id_token:m,access_token:g,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Lt}),{data:_,error:S}=v;return S?this._returnResult({data:{user:null,session:null},error:S}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new vn}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:S}))}catch(l){if(ee(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(r){try{return await this._useSession(async n=>{var o,l;const{data:u,error:d}=n;if(d)throw d;return await ie(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0})})}catch(n){if(ee(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(r){const n=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(n,"begin");try{const o=Date.now();return await By(async l=>(l>0&&await zy(200*Math.pow(2,l-1)),this._debug(n,"refreshing attempt",l),await ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Lt})),(l,u)=>{const d=200*Math.pow(2,l);return u&&hl(u)&&Date.now()+d-o<jn})}catch(o){if(this._debug(n,"error",o),ee(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(n,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,n){const o=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",n,"url",o),Je()&&!n.skipBrowserRedirect&&window.location.assign(o),{data:{provider:r,url:o},error:null}}async _recoverAndRefresh(){var r,n;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const l=await zr(this.storage,this.storageKey);if(l&&this.userStorage){let d=await zr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:l.user},await Sn(this.userStorage,this.storageKey+"-user",d)),l.user=(r=d?.user)!==null&&r!==void 0?r:pl()}else if(l&&!l.user&&!l.user){const d=await zr(this.storage,this.storageKey+"-user");d&&d?.user?(l.user=d.user,await wr(this.storage,this.storageKey+"-user"),await Sn(this.storage,this.storageKey,l)):l.user=pl()}if(this._debug(o,"session from storage",l),!this._isValidSession(l)){this._debug(o,"session is not valid"),l!==null&&await this._removeSession();return}const u=((n=l.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<dl;if(this._debug(o,`session has${u?"":" not"} expired with margin of ${dl}s`),u){if(this.autoRefreshToken&&l.refresh_token){const{error:d}=await this._callRefreshToken(l.refresh_token);d&&(console.error(d),hl(d)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:p}=await this._getUser(l.access_token);!p&&d?.user?(l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(o,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(o,"error",l),console.error(l);return}finally{this._debug(o,"end")}}async _callRefreshToken(r){var n,o;if(!r)throw new yt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new oo;const{data:u,error:d}=await this._refreshAccessToken(r);if(d)throw d;if(!u.session)throw new yt;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={data:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(l,"error",u),ee(u)){const d={data:null,error:u};return hl(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(d),d}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(r,n,o=!0){const l=`#_notifyAllSubscribers(${r})`;this._debug(l,"begin",n,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:r,session:n});const u=[],d=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(r,n)}catch(m){u.push(m)}});if(await Promise.all(d),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(l,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0;const n=Object.assign({},r),o=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&n.user&&await Sn(this.userStorage,this.storageKey+"-user",{user:n.user});const l=Object.assign({},n);delete l.user;const u=Lh(l);await Sn(this.storage,this.storageKey,u)}else{const l=Lh(n);await Sn(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await wr(this.storage,this.storageKey),await wr(this.storage,this.storageKey+"-code-verifier"),await wr(this.storage,this.storageKey+"-user"),this.userStorage&&await wr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&Je()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),jn);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async n=>{const{data:{session:o}}=n;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((o.expires_at*1e3-r)/jn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${jn}ms, refresh threshold is ${Pl} ticks`),l<=Pl&&await this._callRefreshToken(o.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Jf)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Je()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const n=`#_onVisibilityChanged(${r})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,n,o){const l=[`provider=${encodeURIComponent(n)}`];if(o?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&l.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[u,d]=await wn(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(d)}`});l.push(p.toString())}if(o?.queryParams){const u=new URLSearchParams(o.queryParams);l.push(u.toString())}return o?.skipBrowserRedirect&&l.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${r}?${l.join("&")}`}async _unenroll(r){try{return await this._useSession(async n=>{var o;const{data:l,error:u}=n;return u?this._returnResult({data:null,error:u}):await ie(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token})})}catch(n){if(ee(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(r){try{return await this._useSession(async n=>{var o,l;const{data:u,error:d}=n;if(d)return this._returnResult({data:null,error:d});const p=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:m,error:g}=await ie(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return g?this._returnResult({data:null,error:g}):(r.factorType==="totp"&&m.type==="totp"&&(!((l=m?.totp)===null||l===void 0)&&l.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if(ee(n))return this._returnResult({data:null,error:n});throw n}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?yv(r.webauthn.credential_response):vv(r.webauthn.credential_response)})}:{code:r.code}),{data:p,error:m}=await ie(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:d,headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(n){if(ee(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const d=await ie(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token});if(d.error)return d;const{data:p}=d;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:mv(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:gv(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ee(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(r){const{data:n,error:o}=await this._challenge({factorId:r.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:r.factorId,challengeId:n.id,code:r.code})}async _listFactors(){var r;const{data:{user:n},error:o}=await this.getUser();if(o)return{data:null,error:o};const l={all:[],phone:[],totp:[],webauthn:[]};for(const u of(r=n?.factors)!==null&&r!==void 0?r:[])l.all.push(u),u.status==="verified"&&l[u.factor_type].push(u);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(){var r,n;const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=fl(o.access_token);let d=null;u.aal&&(d=u.aal);let p=d;((n=(r=o.user.factors)===null||r===void 0?void 0:r.filter(x=>x.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(p="aal2");const g=u.amr||[];return{data:{currentLevel:d,nextLevel:p,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async n=>{const{data:{session:o},error:l}=n;return l?this._returnResult({data:null,error:l}):o?await ie(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:o.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new yt})})}catch(n){if(ee(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(r,n){try{return await this._useSession(async o=>{const{data:{session:l},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!l)return this._returnResult({data:null,error:new yt});const d=await ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return d.data&&d.data.redirect_url&&Je()&&!n?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(o){if(ee(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(r,n){try{return await this._useSession(async o=>{const{data:{session:l},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!l)return this._returnResult({data:null,error:new yt});const d=await ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return d.data&&d.data.redirect_url&&Je()&&!n?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(o){if(ee(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;return o?this._returnResult({data:null,error:o}):n?await ie(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new yt})})}catch(r){if(ee(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async n=>{const{data:{session:o},error:l}=n;return l?this._returnResult({data:null,error:l}):o?await ie(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:r.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new yt})})}catch(n){if(ee(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(r,n={keys:[]}){let o=n.keys.find(p=>p.kid===r);if(o)return o;const l=Date.now();if(o=this.jwks.keys.find(p=>p.kid===r),o&&this.jwks_cached_at+Ey>l)return o;const{data:u,error:d}=await ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=l,o=u.keys.find(p=>p.kid===r),!o)?null:o}async getClaims(r,n={}){try{let o=r;if(!o){const{data:S,error:E}=await this.getSession();if(E||!S.session)return this._returnResult({data:null,error:E});o=S.session.access_token}const{header:l,payload:u,signature:d,raw:{header:p,payload:m}}=fl(o);n?.allowExpired||Gy(u.exp);const g=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!g){const{error:S}=await this.getUser(o);if(S)throw S;return{data:{claims:u,header:l,signature:d},error:null}}const x=Jy(l.alg),v=await crypto.subtle.importKey("jwk",g,x,!0,["verify"]);if(!await crypto.subtle.verify(x,v,d,Ly(`${p}.${m}`)))throw new Al("Invalid JWT signature");return{data:{claims:u,header:l,signature:d},error:null}}catch(o){if(ee(o))return this._returnResult({data:null,error:o});throw o}}}ks.nextInstanceID={};const Nv=ks;class Cv extends Nv{constructor(r){super(r)}}class Tv{constructor(r,n,o){var l,u,d;this.supabaseUrl=r,this.supabaseKey=n;const p=_y(r);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const m=`sb-${p.hostname.split(".")[0]}-auth-token`,g={db:fy,realtime:my,auth:Object.assign(Object.assign({},py),{storageKey:m}),global:hy},x=xy(o??{},g);this.storageKey=(l=x.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(u=x.global.headers)!==null&&u!==void 0?u:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(v,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=x.auth)!==null&&d!==void 0?d:{},this.headers,x.global.fetch),this.fetch=vy(n,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new b0(new URL("rest/v1",p).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new uy(this.storageUrl.href,this.headers,this.fetch,o?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new v0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,n={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,n,o)}channel(r,n={config:{}}){return this.realtime.channel(r,n)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r,n;if(this.accessToken)return await this.accessToken();const{data:o}=await this.auth.getSession();return(n=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:n,detectSessionInUrl:o,storage:l,userStorage:u,storageKey:d,flowType:p,lock:m,debug:g,throwOnError:x},v,_){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Cv({url:this.authUrl.href,headers:Object.assign(Object.assign({},S),v),storageKey:d,autoRefreshToken:r,persistSession:n,detectSessionInUrl:o,storage:l,userStorage:u,flowType:p,lock:m,debug:g,throwOnError:x,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new M0(this.realtimeUrl.href,Object.assign(Object.assign({},r),{params:Object.assign({apikey:this.supabaseKey},r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,o)=>{this._handleTokenChanged(n,"CLIENT",o?.access_token)})}_handleTokenChanged(r,n,o){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Pv=(i,r,n)=>new Tv(i,r,n);function Ov(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const r=i.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Ov()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Rv="https://zxdxdleaqbbserxrtwlp.supabase.co",Av="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp4ZHhkbGVhcWJic2VyeHJ0d2xwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ4MzUzNTQsImV4cCI6MjA4MDQxMTM1NH0.3LObL2-_BuYKRxWu2a9ksvFIzIHRrMmaBy8mVoonm8A",le=Pv(Rv,Av),Iv=async(i,r,n,o)=>{const{data:l,error:u}=await le.auth.signUp({email:i,password:r,options:{data:{name:n,role:o}}});if(u)throw u;return l},Lv=async(i,r)=>{const{data:n,error:o}=await le.auth.signInWithPassword({email:i,password:r});if(o)throw o;return n},Uv=async()=>{const{error:i}=await le.auth.signOut();if(i)throw i},$v=async()=>{const{data:{user:i}}=await le.auth.getUser();if(!i)return null;const{data:r,error:n}=await le.from("users").select("*").eq("id",i.id).single();return n?(console.error("Error fetching user profile:",n),null):r};var Dv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Mv=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ve=(i,r)=>{const n=T.forwardRef(({color:o="currentColor",size:l=24,strokeWidth:u=2,absoluteStrokeWidth:d,className:p="",children:m,...g},x)=>T.createElement("svg",{ref:x,...Dv,width:l,height:l,stroke:o,strokeWidth:d?Number(u)*24/Number(l):u,className:["lucide",`lucide-${Mv(i)}`,p].join(" "),...g},[...r.map(([v,_])=>T.createElement(v,_)),...Array.isArray(m)?m:[m]]));return n.displayName=`${i}`,n};const to=ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Zl=ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const jr=ve("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);const Xf=ve("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const zv=ve("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);const Bv=ve("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const Zf=ve("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const Il=ve("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Fh=ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const ro=ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Fv=ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const gl=ve("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const yl=ve("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Es=ve("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);const ep=ve("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const Ll=ve("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const Vv=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Wv=ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const qv=ve("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);const Ul=ve("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);const Hv=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Kv=ve("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const tp=ve("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const no=ve("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const eu=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Gv=ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Vh=ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const tu=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Jv=ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Qv=ve("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const rp=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Yv=({onLogin:i})=>{const[r,n]=T.useState(!1),[o,l]=T.useState(""),[u,d]=T.useState(""),[p,m]=T.useState(""),[g,x]=T.useState("student"),[v,_]=T.useState(""),[S,E]=T.useState(!1),j=async w=>{w.preventDefault(),_(""),E(!0);try{r?(await Iv(o,u,p,g),alert("Account created! Please check your email to verify your account.")):(await Lv(o,u),i())}catch(O){_(O.message||"An error occurred")}finally{E(!1)}};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8",children:[c.jsxs("div",{className:"flex flex-col items-center mb-8",children:[c.jsx("div",{className:"bg-primary-100 p-3 rounded-full mb-4",children:c.jsx(jr,{className:"w-8 h-8 text-primary-600"})}),c.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"EduVerge"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Smart Learning & Assessment"})]}),c.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),c.jsx("input",{type:"text",value:p,onChange:w=>m(w.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),c.jsx("input",{type:"email",value:o,onChange:w=>l(w.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),c.jsx("input",{type:"password",value:u,onChange:w=>d(w.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,minLength:6})]}),r&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),c.jsxs("select",{value:g,onChange:w=>x(w.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[c.jsx("option",{value:"student",children:"Student"}),c.jsx("option",{value:"faculty",children:"Faculty"})]})]}),v&&c.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:v}),c.jsx("button",{type:"submit",disabled:S,className:"w-full bg-primary-600 hover:bg-primary-700 text-blue-400 font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:S?"Loading...":r?"Sign Up":"Sign In"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("button",{onClick:()=>{n(!r),_("")},className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:r?"Already have an account? Sign In":"Don't have an account? Sign Up"})})]})})},Qe=({user:i})=>{const r=Nt(),n=Tn(),o=async()=>{try{await Uv(),r("/login"),window.location.reload()}catch(u){console.error("Error signing out:",u)}},l=u=>n.pathname===u;return c.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col shadow-sm",children:[c.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:c.jsx(jr,{className:"w-5 h-5 text-white"})}),c.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"EduVerge"})]}),c.jsx("p",{className:"text-sm font-medium text-gray-800",children:i.name}),c.jsx("p",{className:"text-xs text-gray-500 capitalize mt-1",children:i.role==="faculty"?" Faculty":" Student"})]}),c.jsxs("nav",{className:"flex-1 p-4 space-y-2",children:[c.jsxs(vr,{to:"/",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${l("/")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,children:[c.jsx(ep,{className:"w-5 h-5"}),c.jsx("span",{children:"Dashboard"})]}),i.role==="faculty"&&c.jsxs(c.Fragment,{children:[c.jsxs(vr,{to:"/create-assessment",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${l("/create-assessment")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,children:[c.jsx(Ul,{className:"w-5 h-5"}),c.jsx("span",{children:"Create Assessment"})]}),c.jsxs(vr,{to:"/course-materials",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${l("/course-materials")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,children:[c.jsx(Es,{className:"w-5 h-5"}),c.jsx("span",{children:"Course Materials"})]})]}),i.role==="student"&&c.jsxs(c.Fragment,{children:[c.jsxs(vr,{to:"/courses",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${l("/courses")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"}`,children:[c.jsx(jr,{className:"w-5 h-5"}),c.jsx("span",{children:"Course Materials"})]}),c.jsxs(vr,{to:"/score-calculator",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${l("/score-calculator")?"bg-purple-100 text-purple-700":"text-gray-700 hover:bg-purple-50 hover:text-purple-700"}`,children:[c.jsx(Bv,{className:"w-5 h-5"}),c.jsx("span",{children:"Score Calculator"})]}),c.jsxs(vr,{to:"/ai-assistant",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${l("/ai-assistant")?"bg-gradient-to-r from-purple-100 to-blue-100 text-purple-700":"text-gray-700 hover:bg-purple-50 hover:text-purple-700"}`,children:[c.jsx(no,{className:"w-5 h-5"}),c.jsx("span",{children:"AI Assistant"})]})]}),c.jsx("div",{className:"my-4 h-px bg-gray-200"}),c.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 py-2",children:"Settings"}),c.jsxs(vr,{to:"/profile",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${l("/profile")?"bg-green-100 text-green-700":"text-gray-700 hover:bg-green-50 hover:text-green-700"}`,children:[c.jsx(tu,{className:"w-5 h-5"}),c.jsx("span",{children:"My Profile"})]}),c.jsxs(vr,{to:"/change-password",className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors font-medium ${l("/change-password")?"bg-orange-100 text-orange-700":"text-gray-700 hover:bg-orange-50 hover:text-orange-700"}`,children:[c.jsx(Ll,{className:"w-5 h-5"}),c.jsx("span",{children:"Change Password"})]})]}),c.jsx("div",{className:"mx-4 h-px bg-gray-200"}),c.jsx("div",{className:"p-4",children:c.jsxs("button",{onClick:o,className:"flex items-center gap-3 px-4 py-3 text-red-600 hover:bg-red-50 rounded-lg transition-colors w-full font-medium",children:[c.jsx(Vv,{className:"w-5 h-5"}),c.jsx("span",{children:"Sign Out"})]})})]})},Xv=({assessmentId:i,onClose:r})=>{const[n,o]=T.useState([]),[l,u]=T.useState([]),[d,p]=T.useState(!0),[m,g]=T.useState({});T.useEffect(()=>{x()},[i]);const x=async()=>{p(!0);const{data:w,error:O}=await le.from("submissions").select("*").eq("assessment_id",i);if(O){console.error("Error fetching submissions:",O),p(!1);return}const L=[];if(w)for(const U of w){const{data:F}=await le.from("users").select("name, email").eq("id",U.student_id).single();L.push({...U,student_name:F?.name||"Student",student_email:F?.email||"-"})}o(L);const{data:R}=await le.from("questions").select("*").eq("assessment_id",i);u(R||[]),p(!1)},v=(w,O)=>{g(L=>({...L,[w]:O}))},_=async w=>{const O=Number(m[w]);if(isNaN(O)){alert("Please enter a valid number");return}const{error:L}=await le.from("submissions").update({theory_score:O}).eq("id",w);if(L){console.error("Error saving score:",L),alert("Error saving score");return}alert("Score saved successfully!"),x()},S=()=>l.filter(w=>w.type==="Theory"),E=w=>S().map(L=>({questionText:L.question_text,maxMarks:L.marks,studentAnswer:w.answers[L.id]||"No answer provided"})),j=()=>S().reduce((w,O)=>w+O.marks,0);return c.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Assessment Submissions"}),c.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[n.length," student",n.length!==1?"s":""," submitted"]})]}),c.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 transition-colors",children:c.jsx(rp,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d?c.jsx("div",{className:"text-center py-8 text-gray-600",children:"Loading submissions..."}):n.length===0?c.jsx("div",{className:"text-center py-8 text-gray-600",children:"No submissions yet for this assessment."}):c.jsx("div",{className:"space-y-6",children:n.map(w=>c.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-6",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4 pb-4 border-b border-gray-300",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:w.student_name}),c.jsx("p",{className:"text-sm text-gray-600",children:w.student_email}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Submitted: ",new Date(w.submitted_at).toLocaleString()]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-sm text-gray-600",children:"MCQ Score"}),c.jsx("div",{className:"text-2xl font-bold text-green-600",children:w.mcq_score})]})]}),E(w).length>0?c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-gray-700",children:"Theory Answers:"}),E(w).map((O,L)=>c.jsxs("div",{className:"bg-white rounded p-4 border border-gray-200",children:[c.jsxs("div",{className:"font-medium text-gray-800 mb-2",children:["Q",L+1,": ",O.questionText,c.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(Max: ",O.maxMarks," marks)"]})]}),c.jsx("div",{className:"text-gray-700 bg-gray-50 p-3 rounded border border-gray-200",children:O.studentAnswer})]},L)),c.jsxs("div",{className:"flex items-center gap-4 mt-4 bg-blue-50 p-4 rounded border border-blue-200",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Theory Score (Max: ",j(),")"]}),c.jsx("input",{type:"number",min:"0",max:j(),value:m[w.id]!==void 0?m[w.id]:w.theory_score??"",onChange:O=>v(w.id,O.target.value),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter marks"})]}),c.jsx("button",{onClick:()=>_(w.id),className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors",children:"Save Score"}),c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium",children:"Status: "}),c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${w.theory_score===null?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:w.theory_score===null?"Pending":"Graded"})]})]})]}):c.jsx("div",{className:"text-gray-600 text-sm",children:"No theory questions in this assessment."}),c.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-300 flex justify-between items-center",children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Total Score:"}),c.jsxs("span",{className:"text-xl font-bold text-blue-600",children:[w.total_score,"%"]})]})]},w.id))})})]})})},Zv=({user:i})=>{const r=Nt(),[n,o]=T.useState([]),[l,u]=T.useState([]),[d,p]=T.useState({totalAssessments:0,totalSubmissions:0,averageScore:0}),[m,g]=T.useState(!0),[x,v]=T.useState(!1),[_,S]=T.useState(null);T.useEffect(()=>{E()},[i.id]);const E=async()=>{try{const{data:w}=await le.from("assessments").select("*").eq("faculty_id",i.id).order("created_at",{ascending:!1});if(o(w||[]),w&&w.length>0){const O=w.map(F=>F.id),{data:L}=await le.from("submissions").select("*").in("assessment_id",O);u(L||[]);const R=L?.length||0,U=R>0?L.reduce((F,W)=>F+W.total_score,0)/R:0;p({totalAssessments:w.length,totalSubmissions:R,averageScore:Math.round(U*10)/10})}}catch(w){console.error("Error fetching data:",w)}finally{g(!1)}},j=w=>l.filter(O=>O.assessment_id===w).length;return m?c.jsxs("div",{className:"flex",children:[c.jsx(Qe,{user:i}),c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsx("div",{className:"text-lg text-gray-600",children:"Loading..."})})]}):c.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[c.jsx(Qe,{user:i}),c.jsxs("div",{className:"flex-1 p-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Faculty Dashboard"}),c.jsx("p",{className:"text-gray-600",children:"Manage your assessments and view student performance"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Assessments"}),c.jsx("p",{className:"text-3xl font-bold text-gray-800",children:d.totalAssessments})]}),c.jsx("div",{className:"bg-primary-100 p-3 rounded-lg",children:c.jsx(Es,{className:"w-6 h-6 text-primary-600"})})]})}),c.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Submissions"}),c.jsx("p",{className:"text-3xl font-bold text-gray-800",children:d.totalSubmissions})]}),c.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:c.jsx(Jv,{className:"w-6 h-6 text-green-600"})})]})}),c.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Average Score"}),c.jsxs("p",{className:"text-3xl font-bold text-gray-800",children:[d.averageScore,"%"]})]}),c.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:c.jsx(Gv,{className:"w-6 h-6 text-purple-600"})})]})})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[c.jsx("div",{className:"p-6 border-b border-gray-200",children:c.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Your Assessments"})}),n.length===0?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("p",{className:"text-gray-500 mb-4",children:"No assessments created yet"}),c.jsx("button",{onClick:()=>r("/create-assessment"),className:"bg-primary-600 hover:bg-primary-700 text-primary-500 px-6 py-2 rounded-lg transition-colors",children:"Create Your First Assessment"})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Duration"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Submissions"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map(w=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-800",children:w.title}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:w.subject}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:w.unit}),c.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[w.duration_minutes," mins"]}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:j(w.id)}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(w.created_at).toLocaleDateString()}),c.jsx("td",{className:"px-6 py-4 text-sm",children:c.jsx("button",{onClick:()=>{S(w.id),v(!0)},className:"px-4 py-2 bg-blue-100 hover:bg-blue-400 text-gray-600 font-medium rounded-lg transition-colors",children:"View Submissions"})})]},w.id))})]})})]}),x&&_&&c.jsx(Xv,{assessmentId:_,onClose:()=>v(!1)})]})]})},ew=({user:i})=>{const r=Nt(),[n,o]=T.useState([]),[l,u]=T.useState([]),[d,p]=T.useState(!0);T.useEffect(()=>{m()},[i.id]);const m=async()=>{try{const{data:v}=await le.from("assessments").select("*").order("created_at",{ascending:!1});o(v||[]);const{data:_}=await le.from("submissions").select("*").eq("student_id",i.id);u(_||[])}catch(v){console.error("Error fetching data:",v)}finally{p(!1)}},g=v=>l.some(_=>_.assessment_id===v),x=v=>l.find(_=>_.assessment_id===v);return d?c.jsxs("div",{className:"flex",children:[c.jsx(Qe,{user:i}),c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsx("div",{className:"text-lg text-gray-600",children:"Loading..."})})]}):c.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[c.jsx(Qe,{user:i}),c.jsxs("div",{className:"flex-1 p-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Student Dashboard"}),c.jsx("p",{className:"text-gray-600",children:"View and attempt available assessments"})]}),c.jsx("div",{className:"mb-6 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white shadow-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(no,{className:"w-6 h-6"}),c.jsx("h3",{className:"text-xl font-bold",children:"AI Learning Assistant"})]}),c.jsx("p",{className:"text-purple-100 mb-4",children:"Get instant help with your studies, assignments, and exam preparation"}),c.jsx("button",{onClick:()=>r("/ai-assistant"),className:"bg-white text-purple-600 px-6 py-2 rounded-lg font-medium hover:bg-purple-50 transition-colors",children:"Start Chat"})]}),c.jsx("div",{className:"hidden md:block",children:c.jsx("div",{className:"w-24 h-24 bg-white/20 rounded-full flex items-center justify-center",children:c.jsx(no,{className:"w-12 h-12"})})})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Available Tests"}),c.jsx("p",{className:"text-3xl font-bold text-gray-800",children:n.length})]}),c.jsx("div",{className:"bg-primary-100 p-3 rounded-lg",children:c.jsx(jr,{className:"w-6 h-6 text-primary-600"})})]})}),c.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Completed"}),c.jsx("p",{className:"text-3xl font-bold text-gray-800",children:l.length})]}),c.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:c.jsx(Il,{className:"w-6 h-6 text-green-600"})})]})}),c.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg Score"}),c.jsxs("p",{className:"text-3xl font-bold text-gray-800",children:[l.length>0?Math.round(l.reduce((v,_)=>v+_.total_score,0)/l.length*10)/10:0,"%"]})]}),c.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:c.jsx(ro,{className:"w-6 h-6 text-purple-600"})})]})})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[c.jsx("div",{className:"p-6 border-b border-gray-200",children:c.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Available Assessments"})}),n.length===0?c.jsx("div",{className:"p-8 text-center",children:c.jsx("p",{className:"text-gray-500",children:"No assessments available at the moment"})}):c.jsx("div",{className:"divide-y divide-gray-200",children:n.map(v=>{const _=g(v.id),S=x(v.id);return c.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:v.title}),c.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(jr,{className:"w-4 h-4"}),v.subject]}),c.jsxs("span",{children:["Unit: ",v.unit]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(ro,{className:"w-4 h-4"}),v.duration_minutes," mins"]})]}),_&&S&&c.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[c.jsx("span",{className:"text-sm font-medium text-green-600",children:"Completed"}),c.jsxs("span",{className:"text-sm text-gray-600",children:["Score: ",S.total_score,"%"]})]})]}),c.jsx("div",{className:"ml-4",children:_?c.jsxs("button",{onClick:()=>r(`/results/${S?.id}`),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",children:[c.jsx(Il,{className:"w-4 h-4"}),"View Results"]}):c.jsxs("button",{onClick:()=>r(`/take-test/${v.id}`),className:"px-4 py-2 bg-gray-100 text-green-600 rounded-lg hover:bg-primary-300 transition-colors flex items-center gap-2",children:[c.jsx(qv,{className:"w-4 h-4"}),"Start Test"]})})]})},v.id)})})]})]})]})},tw=({user:i})=>{const r=Nt(),[n,o]=T.useState(""),[l,u]=T.useState(""),[d,p]=T.useState(""),[m,g]=T.useState(60),[x,v]=T.useState([]),[_,S]=T.useState(!1),E=R=>{v([...x,{type:R,question_text:"",options:R==="MCQ"?["","","",""]:[],correct_answer:"",marks:1}])},j=(R,U,F)=>{const W=[...x];W[R]={...W[R],[U]:F},v(W)},w=(R,U,F)=>{const W=[...x];W[R].options[U]=F,v(W)},O=R=>{v(x.filter((U,F)=>F!==R))},L=async R=>{if(R.preventDefault(),x.length===0){alert("Please add at least one question");return}S(!0);try{const{data:U,error:F}=await le.from("assessments").insert({faculty_id:i.id,subject:l,unit:d,title:n,duration_minutes:m}).select().single();if(F)throw F;const W=x.map(se=>({assessment_id:U.id,type:se.type,question_text:se.question_text,options:se.type==="MCQ"?se.options:null,correct_answer:se.type==="MCQ"?se.correct_answer:null,marks:se.marks})),{error:Z}=await le.from("questions").insert(W);if(Z)throw Z;alert("Assessment created successfully!"),r("/")}catch(U){console.error("Error creating assessment:",U),alert("Error creating assessment: "+U.message)}finally{S(!1)}};return c.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[c.jsx(Qe,{user:i}),c.jsx("div",{className:"flex-1 p-8 overflow-y-auto",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Create Assessment"}),c.jsx("p",{className:"text-gray-600",children:"Design a new test for your students"})]}),c.jsxs("form",{onSubmit:L,className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Basic Information"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assessment Title *"}),c.jsx("input",{type:"text",value:n,onChange:R=>o(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"}),c.jsx("input",{type:"number",value:m,onChange:R=>g(parseInt(R.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"1",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject *"}),c.jsx("input",{type:"text",value:l,onChange:R=>u(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit *"}),c.jsx("input",{type:"text",value:d,onChange:R=>p(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]})]})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Questions"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>E("MCQ"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2",children:[c.jsx(Ul,{className:"w-4 h-4"}),"Add MCQ"]}),c.jsxs("button",{type:"button",onClick:()=>E("Theory"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[c.jsx(Ul,{className:"w-4 h-4"}),"Add Theory"]})]})]}),x.length===0?c.jsx("div",{className:"text-center py-8 text-gray-500",children:"No questions added yet. Click the buttons above to add questions."}):c.jsx("div",{className:"space-y-6",children:x.map((R,U)=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Question ",U+1," (",R.type,")"]}),c.jsx("button",{type:"button",onClick:()=>O(U),className:"text-red-600 hover:text-red-700",children:c.jsx(eu,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text *"}),c.jsx("textarea",{value:R.question_text,onChange:F=>j(U,"question_text",F.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:2,required:!0})]}),R.type==="MCQ"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:R.options.map((F,W)=>c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Option ",String.fromCharCode(65+W)," *"]}),c.jsx("input",{type:"text",value:F,onChange:Z=>w(U,W,Z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]},W))}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer *"}),c.jsxs("select",{value:R.correct_answer,onChange:F=>j(U,"correct_answer",F.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,children:[c.jsx("option",{value:"",children:"Select correct answer"}),R.options.map((F,W)=>c.jsxs("option",{value:F,children:[String.fromCharCode(65+W),": ",F]},W))]})]})]}),c.jsxs("div",{className:"w-32",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marks *"}),c.jsx("input",{type:"number",value:R.marks,onChange:F=>j(U,"marks",parseInt(F.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"1",required:!0})]})]})]},U))})]}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{type:"button",onClick:()=>r("/"),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),c.jsxs("button",{type:"submit",disabled:_,className:"px-6 py-3 bg-primary-600 text-blue-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(Kv,{className:"w-5 h-5"}),_?"Creating...":"Create Assessment"]})]})]})]})})]})},rw=(i,r)=>{let n=0;return i.forEach(o=>{if(o.type==="MCQ"&&o.correct_answer){const l=r[o.id];l&&l.trim().toLowerCase()===o.correct_answer.trim().toLowerCase()&&(n+=o.marks)}}),n},nw=async(i,r)=>{try{const{data:{user:n}}=await le.auth.getUser();if(!n)throw new Error("User not authenticated");const{data:o,error:l}=await le.from("test_sessions").select("*").eq("assessment_id",i).eq("student_id",n.id).maybeSingle();if(o&&!o.is_completed)return console.log(" Existing test session found, resuming..."),o;if(l)throw l;console.log(" Creating new test session...");try{const{data:u,error:d}=await le.from("test_sessions").insert([{assessment_id:i,student_id:n.id,started_at:new Date().toISOString(),duration_minutes:r,is_completed:!1}]).select().single();if(d){if(d.code==="23505"){console.log(" Race condition detected, retrieving existing session..."),await new Promise(g=>setTimeout(g,100));const{data:p,error:m}=await le.from("test_sessions").select("*").eq("assessment_id",i).eq("student_id",n.id).maybeSingle();if(m)throw m;if(p)return console.log(" Retrieved session created by concurrent request"),p}throw d}if(!u)throw new Error("Failed to create test session");return console.log(" New test session created"),u}catch(u){if(u?.code==="23505"){console.log(" Handling race condition with retry..."),await new Promise(m=>setTimeout(m,100));const{data:d,error:p}=await le.from("test_sessions").select("*").eq("assessment_id",i).eq("student_id",n.id).maybeSingle();if(p)throw p;if(d)return console.log(" Successfully retrieved session after retry"),d}throw u}}catch(n){throw console.error("Error in getOrCreateTestSession:",n),n}},Wh=i=>{try{const r=new Date(i.started_at).getTime(),n=i.duration_minutes*60*1e3,o=r+n,l=Date.now(),u=Math.max(0,o-l);return Math.ceil(u/1e3)}catch(r){return console.error("Error calculating remaining time:",r),0}},sw=async i=>{try{const{error:r}=await le.from("test_sessions").update({submitted_at:new Date().toISOString(),is_completed:!0}).eq("id",i);if(r)throw r;console.log(" Test session marked as completed")}catch(r){throw console.error("Error completing test session:",r),r}},iw=({user:i})=>{const{assessmentId:r}=Zh(),n=Nt(),[o,l]=T.useState(null),[u,d]=T.useState([]),[p,m]=T.useState({}),[g,x]=T.useState(0),[v,_]=T.useState(!0),[S,E]=T.useState(!1),[j,w]=T.useState(null),[O,L]=T.useState(!1),[R,U]=T.useState(null);T.useEffect(()=>{(async()=>{try{if(!r){U("Assessment ID is missing"),_(!1);return}const{data:ue,error:_e}=await le.from("assessments").select("*").eq("id",r).single();if(_e||!ue){console.error("Assessment fetch error:",_e),U("Failed to load assessment"),_(!1);return}l(ue);const{data:De,error:Ie}=await le.from("questions").select("*").eq("assessment_id",r);if(Ie){console.error("Questions fetch error:",Ie),U("Failed to load questions"),_(!1);return}d(De||[]);const be=await nw(r,ue.duration_minutes);w(be);const V=Wh(be);x(V),V<=0&&(L(!0),alert(" Time expired for this assessment")),_(!1)}catch(ue){console.error("Error initializing test:",ue),U("Error loading test: "+(ue.message||"Unknown error")),_(!1)}})()},[r]),T.useEffect(()=>{if(!j||O||S)return;const ae=setInterval(()=>{const ue=Wh(j);ue<=0?(L(!0),x(0),clearInterval(ae),alert(" Time expired! Auto-submitting your test..."),W()):x(ue)},1e3);return()=>clearInterval(ae)},[j,O,S]);const F=(ae,ue)=>{m({...p,[ae]:ue})},W=async()=>{j&&await se(!0)},Z=async()=>{S||!window.confirm("Are you sure you want to submit your test?")||await se(!1)},se=async ae=>{if(j){E(!0);try{await sw(j.id);const ue=rw(u,p),_e=u.reduce((V,ne)=>V+ne.marks,0),De=_e>0?Math.round(ue/_e*100):0,{data:Ie,error:be}=await le.from("submissions").insert({assessment_id:r,student_id:i.id,test_session_id:j.id,answers:p,mcq_score:ue,theory_score:null,total_score:De,is_auto_submitted:ae,submitted_at:new Date().toISOString()}).select().single();if(be)throw be;alert(ae?" Test auto-submitted due to time expiry!":" Test submitted successfully!"),n(`/results/${Ie.id}`)}catch(ue){console.error("Error submitting test:",ue),U("Error submitting test: "+(ue.message||"Unknown error")),alert("Error submitting test. Please try again.")}finally{E(!1)}}},J=ae=>{const ue=Math.floor(ae/3600),_e=Math.floor(ae%3600/60),De=ae%60;return ue>0?`${ue}h ${_e}m ${De.toString().padStart(2,"0")}s`:`${_e}m ${De.toString().padStart(2,"0")}s`},fe=()=>g<=300?"text-red-600":g<=600?"text-yellow-600":"text-green-600",rt=()=>g<=300?"bg-red-50":g<=600?"bg-yellow-50":"bg-green-50";return v?c.jsxs("div",{className:"flex",children:[c.jsx(Qe,{user:i}),c.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:c.jsx("div",{className:"text-lg text-gray-600",children:"Loading test..."})})]}):R?c.jsxs("div",{className:"flex",children:[c.jsx(Qe,{user:i}),c.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md text-center",children:[c.jsx(to,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),c.jsx("h2",{className:"text-xl font-bold text-red-600 mb-2",children:"Error"}),c.jsx("p",{className:"text-gray-600 mb-6",children:R}),c.jsx("button",{onClick:()=>n("/"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Dashboard"})]})})]}):!o||!j?c.jsxs("div",{className:"flex",children:[c.jsx(Qe,{user:i}),c.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:c.jsx("div",{className:"text-lg text-red-600",children:"Assessment not found"})})]}):O?c.jsxs("div",{className:"flex",children:[c.jsx(Qe,{user:i}),c.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center max-w-md",children:[c.jsx(to,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:" Time Expired"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Your test time has been used up. Your answers have been auto-submitted."}),c.jsx("button",{onClick:()=>n("/"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Dashboard"})]})})]}):c.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[c.jsx(Qe,{user:i}),c.jsx("div",{className:"flex-1 p-8 overflow-y-auto",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:o.title}),c.jsxs("p",{className:"text-gray-600",children:[o.subject," - Unit ",o.unit]})]}),c.jsxs("div",{className:`text-right px-6 py-4 rounded-lg border-2 ${rt()} ${g<=300?"border-red-200":"border-green-200"}`,children:[c.jsxs("div",{className:`flex items-center gap-2 text-2xl font-bold ${fe()}`,children:[c.jsx(ro,{className:"w-6 h-6"}),J(g)]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Time Remaining"}),g<=300&&c.jsx("p",{className:"text-xs text-red-600 font-semibold mt-2 animate-pulse",children:" Time running out!"})]})]}),c.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-800",children:" Your timer is secure and server-managed. Refreshing the page will NOT reset your time."})]}),c.jsx("div",{className:"space-y-6 mb-6",children:u.map((ae,ue)=>c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Question ",ue+1,c.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",ae.marks," ",ae.marks===1?"mark":"marks",")"]})]}),c.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:ae.type})]}),c.jsx("p",{className:"text-gray-700 mb-4",children:ae.question_text}),ae.type==="MCQ"&&ae.options?c.jsx("div",{className:"space-y-2",children:ae.options.map((_e,De)=>c.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[c.jsx("input",{type:"radio",name:`question-${ae.id}`,value:_e,checked:p[ae.id]===_e,onChange:Ie=>F(ae.id,Ie.target.value),className:"w-4 h-4 text-blue-600",disabled:O}),c.jsxs("span",{className:"ml-3 text-gray-700",children:[String.fromCharCode(65+De),". ",_e]})]},De))}):c.jsx("textarea",{value:p[ae.id]||"",onChange:_e=>F(ae.id,_e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:6,placeholder:"Type your answer here...",disabled:O})]},ae.id))}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("p",{className:"text-gray-600",children:[Object.keys(p).length," of ",u.length," questions answered"]}),c.jsxs("button",{onClick:Z,disabled:S||O,className:"px-6 py-3 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:[c.jsx(tp,{className:"w-5 h-5"}),S?"Submitting...":"Submit Test"]})]})})]})})]})},ow=({user:i})=>{const{submissionId:r}=Zh(),n=Nt(),[o,l]=T.useState(null),[u,d]=T.useState(null),[p,m]=T.useState([]),[g,x]=T.useState(!0);T.useEffect(()=>{v()},[r]);const v=async()=>{try{const{data:j,error:w}=await le.from("submissions").select("*").eq("id",r).single();if(w)throw w;l(j);const{data:O,error:L}=await le.from("assessments").select("*").eq("id",j.assessment_id).single();if(L)throw L;d(O);const{data:R,error:U}=await le.from("questions").select("*").eq("assessment_id",j.assessment_id);if(U)throw U;m(R||[])}catch(j){console.error("Error fetching results:",j),alert("Error loading results"),n("/")}finally{x(!1)}},_=(j,w)=>j.type==="MCQ"&&j.correct_answer?w?.trim().toLowerCase()===j.correct_answer.trim().toLowerCase():null;if(g)return c.jsxs("div",{className:"flex",children:[c.jsx(Qe,{user:i}),c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsx("div",{className:"text-lg text-gray-600",children:"Loading results..."})})]});if(!o||!u)return c.jsxs("div",{className:"flex",children:[c.jsx(Qe,{user:i}),c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsx("div",{className:"text-lg text-red-600",children:"Results not found"})})]});const S=p.filter(j=>j.type==="MCQ").reduce((j,w)=>j+w.marks,0),E=p.filter(j=>j.type==="Theory").reduce((j,w)=>j+w.marks,0);return c.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[c.jsx(Qe,{user:i}),c.jsx("div",{className:"flex-1 p-8 overflow-y-auto",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Test Results"}),c.jsx("h3",{className:"text-xl text-gray-700 mb-4",children:u.title}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Score"}),c.jsxs("p",{className:"text-3xl font-bold text-primary-400",children:[o.total_score,"%"]})]}),c.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"MCQ Score"}),c.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[o.mcq_score,"/",S]})]}),c.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Theory Score"}),c.jsx("p",{className:"text-3xl font-bold text-purple-600",children:o.theory_score!==null?`${o.theory_score}/${E}`:"Pending"})]})]}),o.theory_score===null&&E>0&&c.jsx("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx(ro,{className:"w-4 h-4 inline mr-1"}),"Your theory answers are pending faculty review. The final score will be updated once grading is complete."]})})]}),c.jsxs("div",{className:"space-y-6 mb-6",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Question Review"}),p.map((j,w)=>{const O=o.answers[j.id],L=_(j,O);return c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",w+1,c.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",j.marks," ",j.marks===1?"mark":"marks",")"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm font-medium",children:j.type}),L!==null&&c.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1 ${L?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:L?c.jsxs(c.Fragment,{children:[c.jsx(Il,{className:"w-4 h-4"})," Correct"]}):c.jsxs(c.Fragment,{children:[c.jsx(Qv,{className:"w-4 h-4"})," Incorrect"]})})]})]}),c.jsx("p",{className:"text-gray-700 mb-4",children:j.question_text}),j.type==="MCQ"&&j.options?c.jsx("div",{className:"space-y-2",children:j.options.map((R,U)=>{const F=O===R,W=j.correct_answer===R;return c.jsx("div",{className:`p-3 border rounded-lg ${W?"bg-green-50 border-green-300":F?"bg-red-50 border-red-300":"border-gray-200"}`,children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("span",{className:"text-gray-700",children:[String.fromCharCode(65+U),". ",R]}),W&&c.jsx("span",{className:"text-green-700 text-sm font-medium",children:"Correct Answer"}),F&&!W&&c.jsx("span",{className:"text-red-700 text-sm font-medium",children:"Your Answer"})]})},U)})}):c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Your Answer:"}),c.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:c.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:O||"No answer provided"})})]}),o.theory_score===null&&c.jsx("p",{className:"text-sm text-gray-600 italic",children:"Pending faculty review"})]})]},j.id)})]}),c.jsx("div",{className:"flex justify-center",children:c.jsxs("button",{onClick:()=>n("/"),className:"px-6 py-3 bg-primary-600 text-blue-900 rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2",children:[c.jsx(ep,{className:"w-5 h-5"}),"Back to Dashboard"]})})]})})]})},aw=({user:i})=>{const[r,n]=T.useState([]),[o,l]=T.useState(!0),[u,d]=T.useState(3);T.useEffect(()=>{p()},[u]);const p=async()=>{l(!0);try{const{data:v,error:_}=await le.from("subjects").select("*").eq("semester",u).order("code");if(_)throw _;const{data:S}=await le.from("course_materials").select("*").eq("semester",u).order("created_at",{ascending:!1}),E=(v||[]).map(j=>({...j,materials:(S||[]).filter(w=>w.subject_id===j.id)}));n(E)}catch(v){console.error("Error fetching courses:",v)}finally{l(!1)}},m=async v=>{try{const{data:_,error:S}=await le.storage.from("course-materials").createSignedUrl(v.file_url,60);if(S)throw S;_?.signedUrl&&window.open(_.signedUrl,"_blank")}catch(_){console.error("Error downloading material:",_),alert("Error downloading file. Please try again.")}},g=v=>{if(!v)return"Unknown size";const _=v/(1024*1024);return _<1?`${(v/1024).toFixed(1)} KB`:`${_.toFixed(1)} MB`},x=v=>{switch(v){case"syllabus":return c.jsx(jr,{className:"w-5 h-5"});case"notes":return c.jsx(Es,{className:"w-5 h-5"});case"assignment":return c.jsx(Zf,{className:"w-5 h-5"});default:return c.jsx(Es,{className:"w-5 h-5"})}};return o?c.jsxs("div",{className:"flex",children:[c.jsx(Qe,{user:i}),c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsx("div",{className:"text-lg text-gray-600",children:"Loading courses..."})})]}):c.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[c.jsx(Qe,{user:i}),c.jsxs("div",{className:"flex-1 p-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Course Materials"}),c.jsx("p",{className:"text-gray-600",children:"Access syllabus and study materials for your courses"})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Semester"}),c.jsx("select",{value:u,onChange:v=>d(Number(v.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[1,2,3,4,5,6,7,8].map(v=>c.jsxs("option",{value:v,children:["Semester ",v]},v))})]}),r.length===0?c.jsxs("div",{className:"bg-white rounded-xl p-8 text-center shadow-sm border border-gray-200",children:[c.jsx(jr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),c.jsxs("p",{className:"text-gray-600",children:["No courses available for Semester ",u]})]}):c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:r.map(v=>c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[c.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-500 p-6 text-white",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold mb-1",children:v.name}),c.jsx("p",{className:"text-blue-100 text-sm",children:v.code})]}),c.jsxs("span",{className:"bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm",children:["Sem ",v.semester]})]}),v.description&&c.jsx("p",{className:"mt-4 text-blue-50 text-sm",children:v.description})]}),c.jsx("div",{className:"p-6",children:v.materials.length===0?c.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No materials uploaded yet"}):c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"font-semibold text-gray-700 text-sm uppercase tracking-wide mb-3",children:"Study Materials"}),v.materials.map(_=>c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all",children:[c.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[c.jsx("div",{className:"text-blue-600 mt-1",children:x(_.material_type)}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h5",{className:"font-medium text-gray-800 mb-1",children:_.title}),_.description&&c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:_.description}),c.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[c.jsx("span",{className:"capitalize",children:_.material_type}),c.jsx("span",{children:""}),c.jsx("span",{children:g(_.file_size)}),c.jsx("span",{children:""}),c.jsx("span",{children:new Date(_.created_at).toLocaleDateString()})]})]})]}),c.jsx("button",{onClick:()=>m(_),className:"ml-4 p-2 bg-indigo-400 hover:bg-blue-500 text-white rounded-lg transition-colors",title:"Download",children:c.jsx(Fv,{className:"w-5 h-5"})})]},_.id))]})})]},v.id))})]})]})},lw=({onSubjectAdded:i})=>{const[r,n]=T.useState(!1),[o,l]=T.useState(!1),[u,d]=T.useState(""),[p,m]=T.useState(""),[g,x]=T.useState(1),[v,_]=T.useState(""),[S,E]=T.useState(""),j=async w=>{w.preventDefault(),l(!0);try{const{error:O}=await le.from("subjects").insert({name:u,code:p.toUpperCase(),semester:g,department:v,description:S||null});if(O)throw O;alert("Subject added successfully!"),d(""),m(""),x(1),_(""),E(""),n(!1),i()}catch(O){console.error("Error adding subject:",O),alert("Error adding subject. Please try again.")}finally{l(!1)}};return r?c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Add New Subject"}),c.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700",children:c.jsx(rp,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:j,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Subject Name ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",value:u,onChange:w=>d(w.target.value),placeholder:"e.g., Data Structures",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Subject Code ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",value:p,onChange:w=>m(w.target.value),placeholder:"e.g., CS201",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase",required:!0})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Semester ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("select",{value:g,onChange:w=>x(Number(w.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[1,2,3,4,5,6,7,8].map(w=>c.jsxs("option",{value:w,children:["Semester ",w]},w))})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Department ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",value:v,onChange:w=>_(w.target.value),placeholder:"e.g., Computer Science",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),c.jsx("textarea",{value:S,onChange:w=>E(w.target.value),placeholder:"Brief description of the subject...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50",children:o?"Adding...":"Add Subject"}),c.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-6 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors",children:"Cancel"})]})]})]}):c.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors text-sm font-medium mb-6",children:[c.jsx(Hv,{className:"w-4 h-4"}),"Add New Subject"]})},uw=({user:i})=>{const[r,n]=T.useState([]),[o,l]=T.useState([]),[u,d]=T.useState(!0),[p,m]=T.useState(!1),[g,x]=T.useState(""),[v,_]=T.useState(""),[S,E]=T.useState(""),[j,w]=T.useState("pdf"),[O,L]=T.useState(null);T.useEffect(()=>{R()},[]);const R=async()=>{d(!0);try{const{data:J}=await le.from("subjects").select("*").order("semester",{ascending:!0});n(J||[]);const{data:fe}=await le.from("course_materials").select("*").eq("faculty_id",i.id).order("created_at",{ascending:!1});l(fe||[])}catch(J){console.error("Error fetching data:",J)}finally{d(!1)}},U=J=>{const fe=J.target.files?.[0];if(fe){if(fe.type!=="application/pdf"){alert("Please upload only PDF files");return}if(fe.size>10*1024*1024){alert("File size should not exceed 10MB");return}L(fe)}},F=async J=>{if(J.preventDefault(),!g||!v||!O){alert("Please fill all required fields and select a file");return}m(!0);try{const fe=r.find(_e=>_e.id===g);if(!fe){alert("Subject not found");return}const rt=`${fe.code}/${Date.now()}_${O.name}`,{error:ae}=await le.storage.from("course-materials").upload(rt,O);if(ae)throw ae;const{error:ue}=await le.from("course_materials").insert({subject_id:g,faculty_id:i.id,title:v,description:S||null,file_url:rt,file_name:O.name,file_size:O.size,file_type:O.type,material_type:j,semester:fe.semester});if(ue)throw ue;alert("Material uploaded successfully!"),x(""),_(""),E(""),w("pdf"),L(null),R()}catch(fe){console.error("Error uploading material:",fe),alert("Error uploading material. Please try again.")}finally{m(!1)}},W=async J=>{if(confirm("Are you sure you want to delete this material?"))try{const{error:fe}=await le.storage.from("course-materials").remove([J.file_url]);if(fe)throw fe;const{error:rt}=await le.from("course_materials").delete().eq("id",J.id);if(rt)throw rt;alert("Material deleted successfully!"),R()}catch(fe){console.error("Error deleting material:",fe),alert("Error deleting material. Please try again.")}},Z=J=>{if(!J)return"Unknown";const fe=J/(1024*1024);return fe<1?`${(J/1024).toFixed(1)} KB`:`${fe.toFixed(1)} MB`},se=J=>{const fe={syllabus:"bg-purple-100 text-purple-700",notes:"bg-blue-100 text-blue-700",assignment:"bg-orange-100 text-orange-700",pdf:"bg-gray-100 text-gray-700"};return fe[J]||fe.pdf};return u?c.jsxs("div",{className:"flex",children:[c.jsx(Qe,{user:i}),c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsx("div",{className:"text-lg text-gray-600",children:"Loading..."})})]}):c.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[c.jsx(Qe,{user:i}),c.jsxs("div",{className:"flex-1 p-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Course Materials Management"}),c.jsx("p",{className:"text-gray-600",children:"Upload and manage study materials for your courses"})]}),c.jsx(lw,{onSubjectAdded:R}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:c.jsx(Vh,{className:"w-6 h-6 text-blue-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Upload New Material"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Add study materials for your courses"})]})]}),c.jsxs("form",{onSubmit:F,className:"space-y-5",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Subject ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:g,onChange:J=>x(J.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[c.jsx("option",{value:"",children:"Select a subject"}),r.map(J=>c.jsxs("option",{value:J.id,children:[J.code," - ",J.name," (Sem ",J.semester,")"]},J.id))]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Material Type ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("select",{value:j,onChange:J=>w(J.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[c.jsx("option",{value:"pdf",children:" General PDF"}),c.jsx("option",{value:"syllabus",children:" Syllabus"}),c.jsx("option",{value:"notes",children:" Lecture Notes"}),c.jsx("option",{value:"assignment",children:" Assignment"})]})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Title ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",value:v,onChange:J=>_(J.target.value),placeholder:"e.g., Chapter 1 - Introduction to Data Structures",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),c.jsx("textarea",{value:S,onChange:J=>E(J.target.value),placeholder:"Brief description of the material...",rows:3,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Upload PDF File ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"file",accept:".pdf",onChange:U,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",required:!0}),O&&c.jsxs("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-3",children:[c.jsx(Es,{className:"w-5 h-5 text-green-600"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-green-800",children:O.name}),c.jsxs("p",{className:"text-xs text-green-600",children:[(O.size/1024/1024).toFixed(2)," MB"]})]})]}),c.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Maximum file size: 10MB"})]}),c.jsx("button",{type:"submit",disabled:p,className:"px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:p?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Vh,{className:"w-5 h-5"}),"Upload Material"]})})]})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"p-6 border-b border-gray-200",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Your Uploaded Materials"}),c.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[o.length," material",o.length!==1?"s":""," uploaded"]})]}),o.length===0?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx(jr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 font-medium",children:"No materials uploaded yet"}),c.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Upload your first course material to get started"})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"File"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Size"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Uploaded"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:o.map(J=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900",children:J.title}),J.description&&c.jsx("span",{className:"text-xs text-gray-500 mt-1",children:J.description})]})}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:`inline-flex px-2.5 py-0.5 rounded-full text-xs font-medium capitalize ${se(J.material_type)}`,children:J.material_type})}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:J.file_name}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Z(J.file_size)}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(J.created_at).toLocaleDateString()}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("button",{onClick:()=>W(J),className:"text-red-600 hover:text-red-700 p-2 hover:bg-red-50 rounded-lg transition-all",title:"Delete",children:c.jsx(eu,{className:"w-5 h-5"})})})]},J.id))})]})})]})]})]})},cw=({title:i,children:r,className:n})=>c.jsxs("div",{className:`bg-white rounded-lg shadow p-6 mb-4 ${n??""}`,children:[c.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:i}),r]}),dw=()=>{const[i,r]=T.useState([{id:1,score:"",maxScore:""}]),[n,o]=T.useState(null),l=()=>{r([...i,{id:Date.now(),score:"",maxScore:""}])},u=g=>{i.length>1&&r(i.filter(x=>x.id!==g))},d=(g,x,v)=>{r(i.map(_=>_.id===g?{..._,[x]:v}:_))},p=()=>{const g=i.filter(E=>E.score&&E.maxScore);if(g.length===0){alert("Please enter at least one assignment score");return}const x=g.reduce((E,j)=>E+parseFloat(j.score),0),v=g.reduce((E,j)=>E+parseFloat(j.maxScore),0),_=x/g.length,S=x/v*100;o({average:parseFloat(_.toFixed(2)),percentage:parseFloat(S.toFixed(2))})},m=()=>{r([{id:1,score:"",maxScore:""}]),o(null)};return c.jsxs(cw,{title:"Assignment Score Calculator",children:[c.jsx("div",{className:"space-y-3 mb-4",children:i.map((g,x)=>c.jsxs("div",{className:"flex gap-3 items-center",children:[c.jsxs("span",{className:"text-gray-600 w-24",children:["Assignment ",x+1]}),c.jsx("input",{type:"number",placeholder:"Score",value:g.score,onChange:v=>d(g.id,"score",v.target.value),className:"border border-gray-300 rounded px-3 py-2 w-28 focus:outline-none focus:ring-2 focus:ring-blue-500"}),c.jsx("span",{className:"text-gray-500",children:"out of"}),c.jsx("input",{type:"number",placeholder:"Max",value:g.maxScore,onChange:v=>d(g.id,"maxScore",v.target.value),className:"border border-gray-300 rounded px-3 py-2 w-28 focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.length>1&&c.jsx("button",{onClick:()=>u(g.id),className:"text-red-500 hover:text-red-700 font-medium",children:""})]},g.id))}),c.jsxs("div",{className:"flex gap-3 mb-6",children:[c.jsx("button",{onClick:l,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition",children:"+ Add Assignment"}),c.jsx("button",{onClick:p,className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Calculate"}),c.jsx("button",{onClick:m,className:"px-4 py-2 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition",children:"Reset"})]}),n&&c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Results"}),c.jsxs("p",{className:"text-gray-700",children:[c.jsx("span",{className:"font-medium",children:"Average Score:"})," ",n.average]}),c.jsxs("p",{className:"text-gray-700",children:[c.jsx("span",{className:"font-medium",children:"Overall Percentage:"})," ",n.percentage,"%"]})]})]})},hw=()=>{const[i,r]=T.useState(""),[n,o]=T.useState(null),l=()=>{const d=parseFloat(i);if(isNaN(d)||d<0||d>20){alert("Please enter a valid mark between 0 and 20");return}const p=d/20*100;o(parseFloat(p.toFixed(2)))},u=()=>{r(""),o(null)};return c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Mid-Exam Percentage Calculator"}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Marks Obtained (out of 20)"}),c.jsx("input",{type:"number",placeholder:"Enter marks",value:i,onChange:d=>r(d.target.value),className:"border border-gray-300 rounded px-4 py-2 w-full max-w-xs focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",max:"20",step:"0.5"})]}),c.jsxs("div",{className:"flex gap-3 mb-6",children:[c.jsx("button",{onClick:l,className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Calculate"}),c.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition",children:"Reset"})]}),n!==null&&c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Result"}),c.jsxs("p",{className:"text-gray-700 text-lg",children:[c.jsx("span",{className:"font-medium",children:"Percentage:"})," ",n,"%"]}),c.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Grade: ",n>=90?"A+":n>=80?"A":n>=70?"B":n>=60?"C":n>=50?"D":"F"]})]})]})},fw=()=>{const[i,r]=T.useState(""),[n,o]=T.useState(""),[l,u]=T.useState(null),d=()=>{const m=parseFloat(i),g=parseFloat(n);if(isNaN(m)||isNaN(g)||m<=0||g<0||g>m){alert("Please enter valid values");return}const x=g/m*100,v=x>=75?"Good Standing":x>=65?"Warning":"At Risk";u({percentage:parseFloat(x.toFixed(2)),status:v})},p=()=>{r(""),o(""),u(null)};return c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Attendance Percentage Calculator"}),c.jsxs("div",{className:"space-y-4 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Total Classes Conducted"}),c.jsx("input",{type:"number",placeholder:"Enter total classes",value:i,onChange:m=>r(m.target.value),className:"border border-gray-300 rounded px-4 py-2 w-full max-w-xs focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Classes Attended"}),c.jsx("input",{type:"number",placeholder:"Enter attended classes",value:n,onChange:m=>o(m.target.value),className:"border border-gray-300 rounded px-4 py-2 w-full max-w-xs focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]}),c.jsxs("div",{className:"flex gap-3 mb-6",children:[c.jsx("button",{onClick:d,className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Calculate"}),c.jsx("button",{onClick:p,className:"px-4 py-2 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition",children:"Reset"})]}),l&&c.jsxs("div",{className:`rounded-lg p-4 border ${l.percentage>=75?"bg-green-50 border-green-200":l.percentage>=65?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200"}`,children:[c.jsx("h3",{className:`font-semibold mb-2 ${l.percentage>=75?"text-green-900":l.percentage>=65?"text-yellow-900":"text-red-900"}`,children:"Attendance Result"}),c.jsxs("p",{className:"text-gray-700 text-lg",children:[c.jsx("span",{className:"font-medium",children:"Percentage:"})," ",l.percentage,"%"]}),c.jsxs("p",{className:"text-gray-700",children:[c.jsx("span",{className:"font-medium",children:"Status:"})," ",l.status]}),l.percentage<75&&c.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[" You need ",Math.ceil(.75*parseFloat(i)-parseFloat(n))," more classes to reach 75%"]})]})]})},pw=()=>{const[i,r]=T.useState("assignment"),n=Nt();return c.jsxs("div",{className:"max-w-4xl mx-auto p-6 min-h-screen flex flex-col",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold mb-2 text-gray-800",children:"Score Calculator"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Calculate your academic performance metrics accurately"}),c.jsxs("div",{className:"flex gap-2 mb-6 border-b border-gray-200",children:[c.jsx("button",{onClick:()=>r("assignment"),className:`px-4 py-2 font-medium transition-colors ${i==="assignment"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Assignment Scores"}),c.jsx("button",{onClick:()=>r("midexam"),className:`px-4 py-2 font-medium transition-colors ${i==="midexam"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Mid-Exam"}),c.jsx("button",{onClick:()=>r("attendance"),className:`px-4 py-2 font-medium transition-colors ${i==="attendance"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Attendance"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i==="assignment"&&c.jsx(dw,{}),i==="midexam"&&c.jsx(hw,{}),i==="attendance"&&c.jsx(fw,{})]})]}),c.jsx("div",{className:"flex-1 flex flex-col justify-end items-center",children:c.jsx("button",{onClick:()=>n("/"),className:"mt-10 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-medium",children:"Back to Dashboard"})})]})},mw="/api/openrouter",gw="openai/gpt-4o",yw=async(i,r)=>{try{const n={role:"system",content:`You are an intelligent academic assistant helping ${r} on EduVerge learning platform. Answer questions clearly, provide study tips, and help with homework. Keep responses under 250 words unless detailed explanations are needed.`};console.log("[AI] Sending request...");const o=new AbortController,l=setTimeout(()=>o.abort(),3e4),u=await fetch(mw,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:gw,messages:[n,...i],temperature:.7,max_tokens:800}),signal:o.signal});if(clearTimeout(l),!u.ok){const m=await u.json().catch(()=>({error:"Unknown error"}));throw console.error("[AI] Error:",u.status,m),new Error(m.error?.message||`Request failed: ${u.status}`)}const p=(await u.json())?.choices?.[0]?.message?.content;if(!p)throw console.error("[AI] No content in response"),new Error("No response generated");return console.log("[AI]  Success"),p.trim()}catch(n){return console.error("[AI] Request failed:",n),n?.name==="AbortError"?"Request timeout. Please try a shorter question.":"I'm having trouble connecting right now. Please try again in a moment."}},vw=i=>{const r=new Date().getHours();let n="Good evening";return r<12?n="Good morning":r<17&&(n="Good afternoon"),`${n}, ${i}!  I'm your AI assistant powered by ChatGPT-4o. How can I help you today?`},ww=({message:i,isUser:r,timestamp:n})=>c.jsxs("div",{className:`flex gap-3 mb-4 ${r?"justify-end":"justify-start"}`,children:[!r&&c.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center",children:c.jsx(Xf,{className:"w-5 h-5 text-white"})}),c.jsxs("div",{className:`max-w-[70%] ${r?"order-first":""}`,children:[c.jsx("div",{className:`rounded-2xl px-4 py-3 ${r?"bg-blue-600 text-white rounded-tr-none":"bg-gray-100 text-gray-800 rounded-tl-none"}`,children:c.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:i})}),n&&c.jsx("p",{className:"text-xs text-gray-500 mt-1 px-2",children:n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),r&&c.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center",children:c.jsx(tu,{className:"w-5 h-5 text-white"})})]}),xw=({onSendMessage:i,disabled:r})=>{const[n,o]=T.useState(""),l=()=>{n.trim()&&!r&&(i(n.trim()),o(""))},u=d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),l())};return c.jsxs("div",{className:"border-t border-gray-200 p-4 bg-white",children:[c.jsxs("div",{className:"flex gap-2 items-end",children:[c.jsx("textarea",{value:n,onChange:d=>o(d.target.value),onKeyPress:u,placeholder:"Ask me anything about your studies...",disabled:r,rows:1,className:"flex-1 resize-none border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",style:{maxHeight:"120px"}}),c.jsx("button",{onClick:l,disabled:r||!n.trim(),className:"bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex-shrink-0",children:c.jsx(tp,{className:"w-5 h-5"})})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Press Enter to send, Shift+Enter for new line"})]})},_w=()=>c.jsxs("div",{className:"flex gap-3 mb-4",children:[c.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center",children:c.jsx(Xf,{className:"w-5 h-5 text-white"})}),c.jsx("div",{className:"bg-gray-100 rounded-2xl rounded-tl-none px-4 py-3",children:c.jsxs("div",{className:"flex gap-1",children:[c.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),c.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),c.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),Gi="eduverge_chat_",bw=2,jw=({user:i})=>{const r=Nt(),[n,o]=T.useState([]),[l,u]=T.useState(!1),d=T.useRef(null),p=T.useRef([]);T.useEffect(()=>{m()},[i.id]),T.useEffect(()=>{d.current?.scrollIntoView({behavior:"smooth"})},[n,l]);const m=()=>{try{const E=sessionStorage.getItem(Gi+i.id);if(E){const j=JSON.parse(E);if(Date.now()<j.expiresAt){const w=j.messages||[],O=w.map((L,R)=>({id:`${Date.now()}-${R}`,content:L.content,isUser:L.role==="user",timestamp:new Date(L.timestamp)}));o(O),p.current=w.map(L=>({role:L.role,content:L.content}));return}else sessionStorage.removeItem(Gi+i.id)}}catch(E){console.error("Error loading history:",E)}g()},g=()=>{const E=vw(i.name);o([{id:Date.now().toString(),content:E,isUser:!1,timestamp:new Date}])},x=E=>{try{const j={messages:E,expiresAt:Date.now()+bw*60*60*1e3};sessionStorage.setItem(Gi+i.id,JSON.stringify(j))}catch(j){console.error("Error saving to session:",j)}},v=async E=>{const j={id:Date.now().toString(),content:E,isUser:!0,timestamp:new Date};o(O=>[...O,j]),p.current.push({role:"user",content:E});const w=p.current.map(O=>({role:O.role,content:O.content,timestamp:new Date().toISOString()}));x(w),u(!0);try{const O=await yw(p.current,i.name),L={id:(Date.now()+1).toString(),content:O,isUser:!1,timestamp:new Date};o(U=>[...U,L]),p.current.push({role:"assistant",content:O});const R=p.current.map(U=>({role:U.role,content:U.content,timestamp:new Date().toISOString()}));x(R)}catch(O){console.error("AI Error:",O);const L={id:(Date.now()+1).toString(),content:"Sorry, I encountered an error. Please try again.",isUser:!1,timestamp:new Date};o(R=>[...R,L])}finally{u(!1)}},_=()=>{window.confirm("Are you sure you want to clear this conversation?")&&(sessionStorage.removeItem(Gi+i.id),p.current=[],g())},S=["What is java?","How do I improve my soft skills?","Study tips for exams","Summarize a topic"];return c.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white p-4 shadow-lg",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>r("/"),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Back to dashboard",children:c.jsx(Zl,{className:"w-5 h-5"})}),c.jsx(no,{className:"w-6 h-6"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold",children:"AI Learning Assistant"}),c.jsx("p",{className:"text-sm text-purple-100",children:"Your 24/7 study companion"})]})]}),c.jsx("button",{onClick:_,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Clear conversation",children:c.jsx(eu,{className:"w-5 h-5"})})]})}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 max-w-4xl mx-auto w-full",children:[n.map(E=>c.jsx(ww,{message:E.content,isUser:E.isUser,timestamp:E.timestamp},E.id)),l&&c.jsx(_w,{}),n.length===1&&!l&&c.jsxs("div",{className:"mt-6",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Quick suggestions:"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:S.map((E,j)=>c.jsx("button",{onClick:()=>v(E),className:"text-left text-sm bg-white border border-gray-200 rounded-lg px-4 py-3 hover:bg-blue-50 hover:border-blue-300 transition-colors",children:E},j))})]}),c.jsx("div",{ref:d})]}),c.jsx(xw,{onSendMessage:v,disabled:l})]})},Sw=()=>{const i=Nt(),[r,n]=T.useState(""),[o,l]=T.useState(""),[u,d]=T.useState(""),[p,m]=T.useState(!1),[g,x]=T.useState(!1),[v,_]=T.useState(!1),[S,E]=T.useState(!1),[j,w]=T.useState(null),[O,L]=T.useState(null),R=Z=>{let se=0;return Z.length>=8&&se++,Z.length>=12&&se++,/[a-z]/.test(Z)&&se++,/[A-Z]/.test(Z)&&se++,/[0-9]/.test(Z)&&se++,/[^a-zA-Z0-9]/.test(Z)&&se++,[{score:0,label:"Too Weak",color:"bg-red-500"},{score:1,label:"Weak",color:"bg-orange-500"},{score:2,label:"Fair",color:"bg-yellow-500"},{score:3,label:"Good",color:"bg-blue-500"},{score:4,label:"Strong",color:"bg-green-500"},{score:6,label:"Very Strong",color:"bg-green-600"}][Math.min(se,5)]},U=Z=>{const se=Z.target.value;l(se),se.length>0?L(R(se)):L(null)},F=()=>r.trim()?o.length<8?(w({type:"error",text:"New password must be at least 8 characters."}),!1):o!==u?(w({type:"error",text:"New passwords do not match."}),!1):r===o?(w({type:"error",text:"New password must be different from current password."}),!1):!0:(w({type:"error",text:"Current password is required."}),!1),W=async Z=>{if(Z.preventDefault(),w(null),!!F()){E(!0);try{const{error:se}=await le.auth.updateUser({password:o});se?w({type:"error",text:se.message}):(w({type:"success",text:" Password changed successfully! Please log in again."}),n(""),l(""),d(""),L(null),setTimeout(()=>{le.auth.signOut()},2e3))}catch{w({type:"error",text:"An unexpected error occurred."})}finally{E(!1)}}};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-4",children:c.jsxs("div",{className:"max-w-md mx-auto mt-10",children:[c.jsxs("button",{onClick:()=>i("/"),className:"flex items-center gap-2 mb-8 px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors font-medium",children:[c.jsx(Zl,{className:"w-5 h-5"}),"Back to Dashboard"]}),c.jsxs("div",{className:"mb-8 text-center",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 mb-4",children:c.jsx(Ll,{className:"w-8 h-8 text-blue-600"})}),c.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Change Password"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Secure your account with a strong password"})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 space-y-6",children:[c.jsxs("form",{onSubmit:W,className:"space-y-5",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Current Password"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:p?"text":"password",value:r,onChange:Z=>n(Z.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter current password",required:!0}),c.jsx("button",{type:"button",onClick:()=>m(!p),className:"absolute right-3 top-3.5 text-gray-500 hover:text-gray-700",children:p?c.jsx(gl,{className:"w-5 h-5"}):c.jsx(yl,{className:"w-5 h-5"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"New Password"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:g?"text":"password",value:o,onChange:U,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter new password",minLength:8,required:!0}),c.jsx("button",{type:"button",onClick:()=>x(!g),className:"absolute right-3 top-3.5 text-gray-500 hover:text-gray-700",children:g?c.jsx(gl,{className:"w-5 h-5"}):c.jsx(yl,{className:"w-5 h-5"})})]}),O&&c.jsxs("div",{className:"mt-3",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Strength:"}),c.jsx("span",{className:`text-xs font-semibold ${O.color.replace("bg-","text-")}`,children:O.label})]}),c.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full ${O.color} transition-all`,style:{width:`${O.score/6*100}%`}})}),c.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[c.jsx("p",{children:" At least 8 characters"}),c.jsx("p",{children:" Mix of uppercase and lowercase"}),c.jsx("p",{children:" Include numbers and symbols for better security"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm New Password"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:v?"text":"password",value:u,onChange:Z=>d(Z.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Re-enter new password",minLength:8,required:!0}),c.jsx("button",{type:"button",onClick:()=>_(!v),className:"absolute right-3 top-3.5 text-gray-500 hover:text-gray-700",children:v?c.jsx(gl,{className:"w-5 h-5"}):c.jsx(yl,{className:"w-5 h-5"})})]}),o&&u&&c.jsx("div",{className:"mt-2",children:o===u?c.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-sm",children:[c.jsx(Fh,{className:"w-4 h-4"}),c.jsx("span",{children:"Passwords match"})]}):c.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[c.jsx(to,{className:"w-4 h-4"}),c.jsx("span",{children:"Passwords do not match"})]})})]}),c.jsx("button",{type:"submit",disabled:S,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold py-3 rounded-lg transition-colors flex items-center justify-center gap-2",children:S?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Updating..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Ll,{className:"w-5 h-5"}),"Change Password"]})})]}),j&&c.jsxs("div",{className:`p-4 rounded-lg flex items-center gap-3 ${j.type==="success"?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:[j.type==="success"?c.jsx(Fh,{className:"w-5 h-5 flex-shrink-0"}):c.jsx(to,{className:"w-5 h-5 flex-shrink-0"}),c.jsx("span",{className:"text-sm font-medium",children:j.text})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:" Security Tips"}),c.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[c.jsx("li",{children:" Use a unique password not used elsewhere"}),c.jsx("li",{children:" Include uppercase, lowercase, numbers & symbols"}),c.jsx("li",{children:" Never share your password with anyone"}),c.jsx("li",{children:" Change your password regularly"})]})]})]})]})})},kw=()=>{const[i,r]=T.useState(null),[n,o]=T.useState(!0),l=Nt();return T.useEffect(()=>{(async()=>{const{data:{user:d}}=await le.auth.getUser();if(d){const{data:p}=await le.from("users").select("*").eq("id",d.id).single();p&&r(p)}o(!1)})()},[]),n?c.jsx("div",{className:"flex items-center justify-center h-screen",children:c.jsx("div",{className:"text-gray-600",children:"Loading profile..."})}):c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-4",children:c.jsxs("div",{className:"max-w-2xl mx-auto mt-10",children:[c.jsxs("button",{onClick:()=>l("/"),className:"flex items-center gap-2 mb-8 px-4 py-2 text-blue-400 hover:bg-blue-50 rounded-lg transition-colors font-medium",children:[c.jsx(Zl,{className:"w-5 h-5"}),"Back to Dashboard"]}),c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"My Profile"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage your account information"})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[c.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-yellow-600 px-8 py-12 text-center",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-white bg-opacity-20 mb-4",children:c.jsx(tu,{className:"w-10 h-10 text-white"})}),c.jsx("h2",{className:"text-2xl font-bold text-white",children:i?.name||"User"}),c.jsx("p",{className:"text-blue-100 mt-1 capitalize",children:i?.role})]}),c.jsxs("div",{className:"p-8 space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4 pb-6 border-b border-gray-200",children:[c.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:c.jsx(Wv,{className:"w-6 h-6 text-blue-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Email"}),c.jsx("p",{className:"text-gray-800 font-medium",children:i?.email})]})]}),c.jsxs("div",{className:"flex items-center gap-4 pb-6 border-b border-gray-200",children:[c.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:c.jsx(zv,{className:"w-6 h-6 text-green-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Role"}),c.jsx("p",{className:"text-gray-800 font-medium capitalize",children:i?.role})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:c.jsx(Zf,{className:"w-6 h-6 text-purple-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Member Since"}),c.jsx("p",{className:"text-gray-800 font-medium",children:i?.created_at?new Date(i.created_at).toLocaleDateString():"N/A"})]})]})]})]}),c.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsx("p",{className:"text-sm text-blue-800",children:" To change your password, use the options in your Settings menu."})})]})})},Ew=()=>{const[i,r]=T.useState(null),[n,o]=T.useState(!0);T.useEffect(()=>{l()},[]);const l=async()=>{try{const u=await $v();r(u)}catch(u){console.error("Error checking user:",u)}finally{o(!1)}};return n?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsx("div",{className:"text-lg text-gray-600",children:"Loading..."})}):c.jsx(l0,{children:c.jsxs(t0,{children:[c.jsx(gt,{path:"/login",element:i?c.jsx(Et,{to:"/"}):c.jsx(Yv,{onLogin:l})}),c.jsx(gt,{path:"/",element:i?i.role==="faculty"?c.jsx(Zv,{user:i}):c.jsx(ew,{user:i}):c.jsx(Et,{to:"/login"})}),c.jsx(gt,{path:"/create-assessment",element:i?.role==="faculty"?c.jsx(tw,{user:i}):c.jsx(Et,{to:"/"})}),c.jsx(gt,{path:"/course-materials",element:i?.role==="faculty"?c.jsx(uw,{user:i}):c.jsx(Et,{to:"/"})}),c.jsx(gt,{path:"/take-test/:assessmentId",element:i?.role==="student"?c.jsx(iw,{user:i}):c.jsx(Et,{to:"/"})}),c.jsx(gt,{path:"/results/:submissionId",element:i?c.jsx(ow,{user:i}):c.jsx(Et,{to:"/login"})}),c.jsx(gt,{path:"/courses",element:i?.role==="student"?c.jsx(aw,{user:i}):c.jsx(Et,{to:"/"})}),c.jsx(gt,{path:"/ai-assistant",element:i?.role==="student"?c.jsx(jw,{user:i}):c.jsx(Et,{to:"/"})}),c.jsx(gt,{path:"/score-calculator",element:i?.role==="student"?c.jsx(pw,{}):c.jsx(Et,{to:"/"})}),c.jsx(gt,{path:"/profile",element:i?c.jsx(kw,{}):c.jsx(Et,{to:"/login"})}),c.jsx(gt,{path:"/change-password",element:i?c.jsx(Sw,{}):c.jsx(Et,{to:"/login"})}),c.jsx(gt,{path:"*",element:c.jsx(Et,{to:"/"})})]})})};ug.createRoot(document.getElementById("root")).render(c.jsx(Hh.StrictMode,{children:c.jsx(Ew,{})}));
